import{j as e,U as se,C as S,M as ae,b as W,e as le,F as re,f as k,a as q}from"./index-d07a4565.js";import{g as De,h as Ie}from"./index-d07a4565.js";import{r as c}from"./vendor-8a332d8f.js";import{F as oe}from"./file-spreadsheet-00869b6b.js";import{U as _}from"./upload-5b885fb0.js";import{P as Q}from"./plus-968e5801.js";import{S as ne}from"./search-001f2433.js";import{A as X}from"./arrow-up-down-59719749.js";import{P as de}from"./phone-69323ed2.js";import{C as ie}from"./calendar-da7962d8.js";import{A as ce}from"./alert-triangle-f3e24c64.js";import{S as xe}from"./star-7ffeefff.js";const Z=({size:a=14})=>e.jsx("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),H=({score:a})=>{const o=parseInt(a)||70,h=Math.round(o/20),u=(n=>n>=80?{bg:"bg-emerald-100 dark:bg-emerald-900/40",text:"text-emerald-700 dark:text-emerald-300",star:"text-emerald-500"}:n>=60?{bg:"bg-yellow-100 dark:bg-yellow-900/40",text:"text-yellow-700 dark:text-yellow-300",star:"text-yellow-500"}:n>=40?{bg:"bg-orange-100 dark:bg-orange-900/40",text:"text-orange-700 dark:text-orange-300",star:"text-orange-500"}:{bg:"bg-red-100 dark:bg-red-900/40",text:"text-red-700 dark:text-red-300",star:"text-red-500"})(o);return e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${u.bg}`,children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(n=>e.jsx(xe,{size:12,className:n<=h?u.star:"text-slate-300 dark:text-slate-600",fill:n<=h?"currentColor":"none"},n))}),e.jsx("span",{className:`text-xs font-bold ${u.text}`,children:o})]})},me=a=>({ACTIVE:"Activo",PAID:"Pagado",LATE:"Atrasado",PENDING:"Pendiente",APPROVED:"Aprobado",REJECTED:"Rechazado",REVIEW:"En revisión",COMPLETED:"Completado"})[a]||a,he=a=>({ACTIVE:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",PAID:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300",COMPLETED:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300",LATE:"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300",PENDING:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"})[a]||"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300";function ye({clients:a,loans:o,receipts:h=[],collectors:b=[],onNewClient:u,selectedClientId:n,onSelectClient:T,onSelectLoan:M,onEditClient:w,onDeleteClient:z,onCreateLoan:$,onUpdateClient:U,onNavigateToDocuments:F}){const[j,J]=c.useState(""),[p,K]=c.useState("ALL"),[f,R]=c.useState("name"),[N,L]=c.useState("asc"),[Y,C]=c.useState(!1),[ee,O]=c.useState(!1),[y,V]=c.useState("info"),s=a.find(t=>t.id===n)||null,A=c.useMemo(()=>{let t=[...a];if(j.trim()){const r=j.toLowerCase();t=t.filter(l=>(l.name||"").toLowerCase().includes(r)||(l.phone||"").includes(r)||(l.idNumber||"").includes(r)||(l.email||"").toLowerCase().includes(r))}return p!=="ALL"&&(t=t.filter(r=>{const l=parseInt(r.score)||70;return p==="EXCELLENT"?l>=80:p==="GOOD"?l>=60&&l<80:p==="REGULAR"?l>=40&&l<60:p==="BAD"?l<40:!0})),t.sort((r,l)=>{let m,x;return f==="name"?(m=(r.name||"").toLowerCase(),x=(l.name||"").toLowerCase()):f==="score"?(m=parseInt(r.score)||70,x=parseInt(l.score)||70):f==="date"&&(m=new Date(r.createdAt||0),x=new Date(l.createdAt||0)),m<x?N==="asc"?-1:1:m>x?N==="asc"?1:-1:0}),t},[a,j,p,f,N]),P=c.useMemo(()=>s?o.filter(t=>t.clientId===s.id&&!t.archived):[],[o,s]),v=c.useMemo(()=>s?h.filter(t=>t.clientId===s.id).sort((t,r)=>new Date(r.date)-new Date(t.date)).slice(0,20):[],[h,s]),g=c.useMemo(()=>{if(!s)return null;const t=o.filter(i=>i.clientId===s.id),r=t.reduce((i,I)=>i+parseFloat(I.amount||0),0),l=t.reduce((i,I)=>i+(I.totalPaid||0),0),m=t.filter(i=>i.status==="ACTIVE").length,x=t.filter(i=>i.status==="COMPLETED"||i.status==="PAID").length;let d=0,E=0;return v.forEach(i=>{i.wasLate||i.penaltyAmount>0?E++:d++}),{totalLent:r,totalPaid:l,activeLoansCount:m,completedLoans:x,totalLoans:t.length,onTimePayments:d,latePayments:E,paymentScore:d+E>0?Math.round(d/(d+E)*100):100}},[s,o,v]),D=c.useMemo(()=>s!=null&&s.collectorId?b.find(t=>t.id===s.collectorId):null,[s,b]),te=()=>{const t=["Nombre","Teléfono","Cédula","Dirección","Email","Score","Notas"],r=A.map(d=>[d.name||"",d.phone||"",d.idNumber||"",d.address||"",d.email||"",d.score||70,(d.notes||"").replace(/,/g,";")].join(",")),l=[t.join(","),...r].join(`
`),m=new Blob([l],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a");x.href=URL.createObjectURL(m),x.download=`clientes_${new Date().toISOString().split("T")[0]}.csv`,x.click()},B=t=>{f===t?L(N==="asc"?"desc":"asc"):(R(t),L("asc"))},G=async t=>{s&&w?(await w({...s,collectorId:t}),C(!1)):s&&U&&(await U({...s,collectorId:t}),C(!1))};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(se,{className:"w-6 h-6 text-blue-600"}),"Clientes"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[A.length," de ",a.length," clientes"]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:te,className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 flex items-center gap-2",children:[e.jsx(oe,{size:16})," Exportar"]}),e.jsxs("button",{onClick:()=>O(!0),className:"px-3 py-2 text-sm bg-slate-600 text-white rounded-xl hover:bg-slate-700 flex items-center gap-2",children:[e.jsx(_,{size:16})," Importar"]}),e.jsxs("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded-xl flex items-center gap-2 hover:bg-blue-700",children:[e.jsx(Q,{size:18})," Nuevo Cliente"]})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(ne,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre, teléfono, cédula...",value:j,onChange:t=>J(t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200 placeholder:text-slate-400 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:p,onChange:t=>K(t.target.value),className:"px-3 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",children:[e.jsx("option",{value:"ALL",children:"Todos los scores"}),e.jsx("option",{value:"EXCELLENT",children:"⭐ Excelente (80+)"}),e.jsx("option",{value:"GOOD",children:"⭐ Bueno (60-79)"}),e.jsx("option",{value:"REGULAR",children:"⭐ Regular (40-59)"}),e.jsx("option",{value:"BAD",children:"⭐ Malo (0-39)"})]}),e.jsxs("select",{value:`${f}-${N}`,onChange:t=>{const[r,l]=t.target.value.split("-");R(r),L(l)},className:"px-3 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",children:[e.jsx("option",{value:"name-asc",children:"Nombre A-Z"}),e.jsx("option",{value:"name-desc",children:"Nombre Z-A"}),e.jsx("option",{value:"score-desc",children:"Mayor Score"}),e.jsx("option",{value:"score-asc",children:"Menor Score"}),e.jsx("option",{value:"date-desc",children:"Más reciente"}),e.jsx("option",{value:"date-asc",children:"Más antiguo"})]})]})}),e.jsx(S,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left w-12"}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:text-blue-600",onClick:()=>B("name"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Nombre ",e.jsx(X,{size:12})]})}),e.jsx("th",{className:"p-2 text-left hidden sm:table-cell",children:"Teléfono"}),e.jsx("th",{className:"p-2 text-left hidden md:table-cell cursor-pointer hover:text-blue-600",onClick:()=>B("score"),children:e.jsxs("span",{className:"flex items-center gap-1",children:["Score ",e.jsx(X,{size:12})]})}),e.jsx("th",{className:"p-2 text-left hidden lg:table-cell",children:"Cobrador"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[A.map(t=>{const r=b.find(l=>l.id===t.collectorId);return e.jsxs("tr",{onClick:()=>T&&T(t.id),className:`cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors ${n===t.id?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-slate-200 dark:bg-slate-700 border border-slate-300 dark:border-slate-600",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-500 dark:text-slate-400 font-bold",children:(t.name||"?").charAt(0).toUpperCase()})})}),e.jsx("td",{className:"p-2 font-medium text-slate-800 dark:text-slate-200",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"sm:hidden text-xs text-slate-500",children:t.phone})]})}),e.jsx("td",{className:"p-2 text-slate-600 dark:text-slate-400 hidden sm:table-cell",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${t.phone}`,className:"hover:text-blue-600",onClick:l=>l.stopPropagation(),children:t.phone}),t.phone&&e.jsx("a",{href:`https://wa.me/${(t.phone||"").replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700",onClick:l=>l.stopPropagation(),title:"WhatsApp",children:e.jsx(Z,{size:14})})]})}),e.jsx("td",{className:"p-2 hidden md:table-cell",children:e.jsx(H,{score:t.score})}),e.jsx("td",{className:"p-2 text-slate-600 dark:text-slate-400 hidden lg:table-cell",children:(r==null?void 0:r.name)||e.jsx("span",{className:"text-slate-400",children:"Sin asignar"})})]},t.id)}),A.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-slate-400",colSpan:5,children:j?"No se encontraron clientes.":"No hay clientes registrados."})})]})]})})}),s&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(S,{className:"lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-slate-100 dark:bg-slate-700 border-2 border-indigo-100 dark:border-slate-600 shadow-sm flex-shrink-0",children:s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xl text-slate-400 font-bold",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-100",children:s.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["ID: ",s.idNumber||"N/A"]}),e.jsx(H,{score:s.score})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx(de,{size:14,className:"text-slate-400"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:text-blue-600",children:s.phone||"N/D"}),s.phone&&e.jsx("a",{href:`https://wa.me/${(s.phone||"").replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700",title:"WhatsApp",children:e.jsx(Z,{size:14})})]}),s.email&&e.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx(ae,{size:14,className:"text-slate-400"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-600",children:s.email})]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("span",{className:"font-semibold",children:"Dirección: "}),s.address||"N/D"]}),s.birthDate&&e.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx(ie,{size:14,className:"text-slate-400"}),W(s.birthDate)]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[e.jsx(le,{size:14,className:"text-slate-400"}),e.jsx("span",{className:"font-semibold",children:"Cobrador: "}),(D==null?void 0:D.name)||"Sin asignar",e.jsx("button",{onClick:()=>C(!0),className:"text-blue-600 hover:text-blue-700 text-xs underline",children:"Cambiar"})]}),s.notes&&e.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Notas: "}),s.notes]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>w&&w(s),className:"px-3 py-2 rounded-lg bg-slate-900 dark:bg-slate-700 hover:bg-slate-800 dark:hover:bg-slate-600 text-white text-sm font-semibold transition-colors",children:"Editar"}),$&&e.jsxs("button",{onClick:()=>$(s.id),className:"px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold transition-colors flex items-center gap-1",children:[e.jsx(Q,{size:14})," Nuevo Préstamo"]}),F&&e.jsxs("button",{onClick:()=>F(s.id),className:"px-3 py-2 rounded-lg bg-amber-600 hover:bg-amber-700 text-white text-sm font-semibold transition-colors flex items-center gap-1",children:[e.jsx(re,{size:14})," Documentos"]}),e.jsx("button",{onClick:()=>z&&z(s),className:"px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm font-semibold transition-colors",children:"Eliminar"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[g&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-semibold",children:"Total Prestado"}),e.jsx("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:k(g.totalLent)})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800",children:[e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-semibold",children:"Total Pagado"}),e.jsx("p",{className:"text-xl font-bold text-emerald-800 dark:text-emerald-200",children:k(g.totalPaid)})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-violet-50 dark:bg-violet-900/20 border border-violet-100 dark:border-violet-800",children:[e.jsx("p",{className:"text-xs text-violet-600 dark:text-violet-400 font-semibold",children:"Préstamos"}),e.jsxs("p",{className:"text-xl font-bold text-violet-800 dark:text-violet-200",children:[g.activeLoansCount," activos"]}),e.jsxs("p",{className:"text-xs text-violet-600",children:[g.completedLoans," completados"]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800",children:[e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-semibold",children:"Puntualidad"}),e.jsxs("p",{className:"text-xl font-bold text-amber-800 dark:text-amber-200",children:[g.paymentScore,"%"]}),e.jsxs("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(q,{size:10})," ",g.onTimePayments," a tiempo"]})]})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-4",children:[e.jsxs("button",{onClick:()=>V("loans"),className:`px-4 py-2 text-sm font-semibold ${y==="loans"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"}`,children:["Préstamos (",P.length,")"]}),e.jsxs("button",{onClick:()=>V("payments"),className:`px-4 py-2 text-sm font-semibold ${y==="payments"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700"}`,children:["Historial de Pagos (",v.length,")"]})]}),y==="loans"&&e.jsx(e.Fragment,{children:P.length===0?e.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"Este cliente no tiene préstamos activos."}):e.jsx("ul",{className:"divide-y divide-slate-100 dark:divide-slate-700 text-sm",children:P.map(t=>e.jsxs("li",{className:"py-3 flex justify-between items-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors",onClick:()=>M&&M(t.id),children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:[k(t.amount)," • ",t.rate,"%"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[t.term," cuotas · ",t.frequency]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${he(t.status)}`,children:me(t.status)})]},t.id))})}),y==="payments"&&e.jsx(e.Fragment,{children:v.length===0?e.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"No hay pagos registrados."}):e.jsx("ul",{className:"divide-y divide-slate-100 dark:divide-slate-700 text-sm max-h-64 overflow-y-auto",children:v.map(t=>e.jsxs("li",{className:"py-2 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k(parseFloat(t.amount||0)+parseFloat(t.penaltyAmount||0))}),e.jsxs("p",{className:"text-xs text-slate-500",children:[W(t.date)," · Cuota #",t.installmentNumber||"?"]})]}),t.penaltyAmount>0?e.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(ce,{size:12})," Mora ",k(t.penaltyAmount)]}):e.jsxs("span",{className:"text-xs text-emerald-600 flex items-center gap-1",children:[e.jsx(q,{size:12})," A tiempo"]})]},t.id))})})]})]})]}),Y&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Asignar Cobrador"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>G(null),className:`w-full p-3 text-left rounded-lg border ${s.collectorId?"border-slate-200 dark:border-slate-600":"border-blue-500 bg-blue-50 dark:bg-blue-900/20"} hover:bg-slate-50 dark:hover:bg-slate-700`,children:"Sin asignar"}),b.map(t=>e.jsx("button",{onClick:()=>G(t.id),className:`w-full p-3 text-left rounded-lg border ${s.collectorId===t.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-600"} hover:bg-slate-50 dark:hover:bg-slate-700`,children:t.name},t.id))]}),e.jsx("button",{onClick:()=>C(!1),className:"mt-4 w-full text-sm text-slate-500 hover:text-slate-700",children:"Cancelar"})]})}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 mb-4",children:"Importar Clientes"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Sube un archivo CSV con las columnas: Nombre, Teléfono, Cédula, Dirección, Email, Notas"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-8 text-center",children:[e.jsx("input",{type:"file",accept:".csv",onChange:t=>{t.target.files[0]&&alert("Función de importación próximamente disponible")},className:"hidden",id:"csv-import"}),e.jsxs("label",{htmlFor:"csv-import",className:"cursor-pointer",children:[e.jsx(_,{size:32,className:"mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click para seleccionar archivo CSV"})]})]}),e.jsx("button",{onClick:()=>O(!1),className:"mt-4 w-full py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600",children:"Cerrar"})]})})]})}function Ae(a){const o=[];return(!a.name||a.name.trim().length<2)&&o.push("El nombre es requerido (mínimo 2 caracteres)"),a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&o.push("El correo electrónico no es válido"),a.phone&&!/^[\d\s\-\+\(\)]+$/.test(a.phone)&&o.push("El teléfono contiene caracteres inválidos"),a.idNumber&&a.idNumber.length<5&&o.push("El número de identificación debe tener al menos 5 caracteres"),{valid:o.length===0,errors:o}}function Ee(a){var o,h,b,u,n;return{name:((o=a.name)==null?void 0:o.trim())||"",phone:((h=a.phone)==null?void 0:h.trim())||null,email:((b=a.email)==null?void 0:b.trim().toLowerCase())||null,address:((u=a.address)==null?void 0:u.trim())||null,idNumber:((n=a.idNumber)==null?void 0:n.trim())||null,photoUrl:a.photoUrl||null,collectorId:a.collectorId||null,status:a.status||"ACTIVE"}}function Se(a){return(a==null?void 0:a.name)||"Cliente sin nombre"}export{De as ClientModal,ye as ClientsView,Ie as clientApi,Ee as createClient,Se as formatClientName,Ae as validateClient};
