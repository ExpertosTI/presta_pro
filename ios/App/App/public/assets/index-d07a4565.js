import{r as P,a as Wr,R as te}from"./vendor-8a332d8f.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var vi={exports:{}},Kt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr=P,Kr=Symbol.for("react.element"),Xr=Symbol.for("react.fragment"),Qr=Object.prototype.hasOwnProperty,Zr=Yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jr={key:!0,ref:!0,__self:!0,__source:!0};function _i(t,e,n){var o,s={},r=null,l=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(l=e.ref);for(o in e)Qr.call(e,o)&&!jr.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:Kr,type:t,key:r,ref:l,props:s,_owner:Zr.current}}Kt.Fragment=Xr;Kt.jsx=_i;Kt.jsxs=_i;vi.exports=Kt;var h=vi.exports,Sn={},uo=Wr;Sn.createRoot=uo.createRoot,Sn.hydrateRoot=uo.hydrateRoot;function el(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:o}=t,[s,r]=P.useState(!1),l=P.useRef(n);l.current=n;const u=P.useRef(o);return u.current=o,P.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",d.async=!0,d.defer=!0,d.nonce=e,d.onload=()=>{var c;r(!0),(c=l.current)===null||c===void 0||c.call(l)},d.onerror=()=>{var c;r(!1),(c=u.current)===null||c===void 0||c.call(u)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[e]),s}const Si=P.createContext(null);function tl({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:o,children:s}){const r=el({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:o}),l=P.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:r}),[t,r]);return te.createElement(Si.Provider,{value:l},s)}function nl(){const t=P.useContext(Si);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function ol(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const sl={large:40,medium:32,small:20};function co({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:o,type:s="standard",theme:r="outline",size:l="large",text:u,shape:d,logo_alignment:c,width:f,locale:p,click_listener:m,containerProps:g,...y}){const T=P.useRef(null),{clientId:E,scriptLoadedSuccessfully:_}=nl(),x=P.useRef(t);x.current=t;const S=P.useRef(e);S.current=e;const A=P.useRef(o);return A.current=o,P.useEffect(()=>{var b,V,M,O,D,$,N,B,U;if(_)return(M=(V=(b=window==null?void 0:window.google)===null||b===void 0?void 0:b.accounts)===null||V===void 0?void 0:V.id)===null||M===void 0||M.initialize({client_id:E,callback:X=>{var se;if(!(X!=null&&X.credential))return(se=S.current)===null||se===void 0?void 0:se.call(S);const{credential:R,select_by:J}=X;x.current({credential:R,clientId:ol(X),select_by:J})},...y}),($=(D=(O=window==null?void 0:window.google)===null||O===void 0?void 0:O.accounts)===null||D===void 0?void 0:D.id)===null||$===void 0||$.renderButton(T.current,{type:s,theme:r,size:l,text:u,shape:d,logo_alignment:c,width:f,locale:p,click_listener:m}),n&&((U=(B=(N=window==null?void 0:window.google)===null||N===void 0?void 0:N.accounts)===null||B===void 0?void 0:B.id)===null||U===void 0||U.prompt(A.current)),()=>{var X,se,R;n&&((R=(se=(X=window==null?void 0:window.google)===null||X===void 0?void 0:X.accounts)===null||se===void 0?void 0:se.id)===null||R===void 0||R.cancel())}},[E,_,n,s,r,l,u,d,c,f,p]),te.createElement("div",{...g,ref:T,style:{height:sl[l],...g==null?void 0:g.style}})}const il="modulepreload",rl=function(t,e){return new URL(t,e).href},fo={},oe=function(e,n,o){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=rl(r,o),r in fo)return;fo[r]=!0;const l=r.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!o)for(let f=s.length-1;f>=0;f--){const p=s[f];if(p.href===r&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${u}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":il,l||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),l)return new Promise((f,p)=>{c.addEventListener("load",f),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r})};var ll={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const al=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ul=(t,e)=>{const n=P.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:l,children:u,...d},c)=>P.createElement("svg",{ref:c,...ll,width:s,height:s,stroke:o,strokeWidth:l?Number(r)*24/Number(s):r,className:`lucide lucide-${al(t)}`,...d},[...e.map(([f,p])=>P.createElement(f,p)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${t}`,n};var ne=ul;const po=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),mo=ne("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),cl=ne("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),dl=ne("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),fl=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),pl=ne("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ml=ne("FileDigit",[["rect",{width:"4",height:"6",x:"2",y:"12",rx:"2",key:"jm304g"}],["path",{d:"M14 2v6h6",key:"1kof46"}],["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4",key:"702lig"}],["path",{d:"M10 12h2v6",key:"12zw74"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ho=ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),go=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),yo=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Eo=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),To=ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),hl=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),gl=ne("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Co=ne("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),yl=ne("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),El=ne("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Tl=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cl=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),vl=ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),vo=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fn=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),_o=ne("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),xi=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_l=ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ai(t,e){return function(){return t.apply(e,arguments)}}const{toString:Sl}=Object.prototype,{getPrototypeOf:Bn}=Object,{iterator:Xt,toStringTag:wi}=Symbol,Qt=(t=>e=>{const n=Sl.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),we=t=>(t=t.toLowerCase(),e=>Qt(e)===t),Zt=t=>e=>typeof e===t,{isArray:st}=Array,ot=Zt("undefined");function Tt(t){return t!==null&&!ot(t)&&t.constructor!==null&&!ot(t.constructor)&&Ee(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ii=we("ArrayBuffer");function xl(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ii(t.buffer),e}const Al=Zt("string"),Ee=Zt("function"),Ri=Zt("number"),Ct=t=>t!==null&&typeof t=="object",wl=t=>t===!0||t===!1,Lt=t=>{if(Qt(t)!=="object")return!1;const e=Bn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(wi in t)&&!(Xt in t)},Il=t=>{if(!Ct(t)||Tt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Rl=we("Date"),Nl=we("File"),bl=we("Blob"),Pl=we("FileList"),Ml=t=>Ct(t)&&Ee(t.pipe),kl=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ee(t.append)&&((e=Qt(t))==="formdata"||e==="object"&&Ee(t.toString)&&t.toString()==="[object FormData]"))},Dl=we("URLSearchParams"),[Ll,Ul,Fl,Vl]=["ReadableStream","Request","Response","Headers"].map(we),ql=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vt(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,s;if(typeof t!="object"&&(t=[t]),st(t))for(o=0,s=t.length;o<s;o++)e.call(null,t[o],o,t);else{if(Tt(t))return;const r=n?Object.getOwnPropertyNames(t):Object.keys(t),l=r.length;let u;for(o=0;o<l;o++)u=r[o],e.call(null,t[u],u,t)}}function Ni(t,e){if(Tt(t))return null;e=e.toLowerCase();const n=Object.keys(t);let o=n.length,s;for(;o-- >0;)if(s=n[o],e===s.toLowerCase())return s;return null}const Ye=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),bi=t=>!ot(t)&&t!==Ye;function xn(){const{caseless:t,skipUndefined:e}=bi(this)&&this||{},n={},o=(s,r)=>{const l=t&&Ni(n,r)||r;Lt(n[l])&&Lt(s)?n[l]=xn(n[l],s):Lt(s)?n[l]=xn({},s):st(s)?n[l]=s.slice():(!e||!ot(s))&&(n[l]=s)};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&vt(arguments[s],o);return n}const Gl=(t,e,n,{allOwnKeys:o}={})=>(vt(e,(s,r)=>{n&&Ee(s)?t[r]=Ai(s,n):t[r]=s},{allOwnKeys:o}),t),Hl=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Bl=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$l=(t,e,n,o)=>{let s,r,l;const u={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)l=s[r],(!o||o(l,t,e))&&!u[l]&&(e[l]=t[l],u[l]=!0);t=n!==!1&&Bn(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ol=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},Jl=t=>{if(!t)return null;if(st(t))return t;let e=t.length;if(!Ri(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},zl=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Bn(Uint8Array)),Wl=(t,e)=>{const o=(t&&t[Xt]).call(t);let s;for(;(s=o.next())&&!s.done;){const r=s.value;e.call(t,r[0],r[1])}},Yl=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},Kl=we("HTMLFormElement"),Xl=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),So=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Ql=we("RegExp"),Pi=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};vt(n,(s,r)=>{let l;(l=e(s,r,t))!==!1&&(o[r]=l||s)}),Object.defineProperties(t,o)},Zl=t=>{Pi(t,(e,n)=>{if(Ee(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(Ee(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jl=(t,e)=>{const n={},o=s=>{s.forEach(r=>{n[r]=!0})};return st(t)?o(t):o(String(t).split(e)),n},ea=()=>{},ta=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function na(t){return!!(t&&Ee(t.append)&&t[wi]==="FormData"&&t[Xt])}const oa=t=>{const e=new Array(10),n=(o,s)=>{if(Ct(o)){if(e.indexOf(o)>=0)return;if(Tt(o))return o;if(!("toJSON"in o)){e[s]=o;const r=st(o)?[]:{};return vt(o,(l,u)=>{const d=n(l,s+1);!ot(d)&&(r[u]=d)}),e[s]=void 0,r}}return o};return n(t,0)},sa=we("AsyncFunction"),ia=t=>t&&(Ct(t)||Ee(t))&&Ee(t.then)&&Ee(t.catch),Mi=((t,e)=>t?setImmediate:e?((n,o)=>(Ye.addEventListener("message",({source:s,data:r})=>{s===Ye&&r===n&&o.length&&o.shift()()},!1),s=>{o.push(s),Ye.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ee(Ye.postMessage)),ra=typeof queueMicrotask<"u"?queueMicrotask.bind(Ye):typeof process<"u"&&process.nextTick||Mi,la=t=>t!=null&&Ee(t[Xt]),v={isArray:st,isArrayBuffer:Ii,isBuffer:Tt,isFormData:kl,isArrayBufferView:xl,isString:Al,isNumber:Ri,isBoolean:wl,isObject:Ct,isPlainObject:Lt,isEmptyObject:Il,isReadableStream:Ll,isRequest:Ul,isResponse:Fl,isHeaders:Vl,isUndefined:ot,isDate:Rl,isFile:Nl,isBlob:bl,isRegExp:Ql,isFunction:Ee,isStream:Ml,isURLSearchParams:Dl,isTypedArray:zl,isFileList:Pl,forEach:vt,merge:xn,extend:Gl,trim:ql,stripBOM:Hl,inherits:Bl,toFlatObject:$l,kindOf:Qt,kindOfTest:we,endsWith:Ol,toArray:Jl,forEachEntry:Wl,matchAll:Yl,isHTMLForm:Kl,hasOwnProperty:So,hasOwnProp:So,reduceDescriptors:Pi,freezeMethods:Zl,toObjectSet:jl,toCamelCase:Xl,noop:ea,toFiniteNumber:ta,findKey:Ni,global:Ye,isContextDefined:bi,isSpecCompliantForm:na,toJSONObject:oa,isAsyncFn:sa,isThenable:ia,setImmediate:Mi,asap:ra,isIterable:la};function Y(t,e,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s,this.status=s.status?s.status:null)}v.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.status}}});const ki=Y.prototype,Di={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Di[t]={value:t}});Object.defineProperties(Y,Di);Object.defineProperty(ki,"isAxiosError",{value:!0});Y.from=(t,e,n,o,s,r)=>{const l=Object.create(ki);v.toFlatObject(t,l,function(f){return f!==Error.prototype},c=>c!=="isAxiosError");const u=t&&t.message?t.message:"Error",d=e==null&&t?t.code:e;return Y.call(l,u,d,n,o,s),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",r&&Object.assign(l,r),l};const aa=null;function An(t){return v.isPlainObject(t)||v.isArray(t)}function Li(t){return v.endsWith(t,"[]")?t.slice(0,-2):t}function xo(t,e,n){return t?t.concat(e).map(function(s,r){return s=Li(s),!n&&r?"["+s+"]":s}).join(n?".":""):e}function ua(t){return v.isArray(t)&&!t.some(An)}const ca=v.toFlatObject(v,{},null,function(e){return/^is[A-Z]/.test(e)});function jt(t,e,n){if(!v.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,E){return!v.isUndefined(E[T])});const o=n.metaTokens,s=n.visitor||f,r=n.dots,l=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(e);if(!v.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(v.isDate(y))return y.toISOString();if(v.isBoolean(y))return y.toString();if(!d&&v.isBlob(y))throw new Y("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(y)||v.isTypedArray(y)?d&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function f(y,T,E){let _=y;if(y&&!E&&typeof y=="object"){if(v.endsWith(T,"{}"))T=o?T:T.slice(0,-2),y=JSON.stringify(y);else if(v.isArray(y)&&ua(y)||(v.isFileList(y)||v.endsWith(T,"[]"))&&(_=v.toArray(y)))return T=Li(T),_.forEach(function(S,A){!(v.isUndefined(S)||S===null)&&e.append(l===!0?xo([T],A,r):l===null?T:T+"[]",c(S))}),!1}return An(y)?!0:(e.append(xo(E,T,r),c(y)),!1)}const p=[],m=Object.assign(ca,{defaultVisitor:f,convertValue:c,isVisitable:An});function g(y,T){if(!v.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+T.join("."));p.push(y),v.forEach(y,function(_,x){(!(v.isUndefined(_)||_===null)&&s.call(e,_,v.isString(x)?x.trim():x,T,m))===!0&&g(_,T?T.concat(x):[x])}),p.pop()}}if(!v.isObject(t))throw new TypeError("data must be an object");return g(t),e}function Ao(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function $n(t,e){this._pairs=[],t&&jt(t,this,e)}const Ui=$n.prototype;Ui.append=function(e,n){this._pairs.push([e,n])};Ui.toString=function(e){const n=e?function(o){return e.call(this,o,Ao)}:Ao;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function da(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fi(t,e,n){if(!e)return t;const o=n&&n.encode||da;v.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let r;if(s?r=s(e,n):r=v.isURLSearchParams(e)?e.toString():new $n(e,n).toString(o),r){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class fa{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){v.forEach(this.handlers,function(o){o!==null&&e(o)})}}const wo=fa,Vi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pa=typeof URLSearchParams<"u"?URLSearchParams:$n,ma=typeof FormData<"u"?FormData:null,ha=typeof Blob<"u"?Blob:null,ga={isBrowser:!0,classes:{URLSearchParams:pa,FormData:ma,Blob:ha},protocols:["http","https","file","blob","url","data"]},On=typeof window<"u"&&typeof document<"u",wn=typeof navigator=="object"&&navigator||void 0,ya=On&&(!wn||["ReactNative","NativeScript","NS"].indexOf(wn.product)<0),Ea=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ta=On&&window.location.href||"http://localhost",Ca=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:On,hasStandardBrowserEnv:ya,hasStandardBrowserWebWorkerEnv:Ea,navigator:wn,origin:Ta},Symbol.toStringTag,{value:"Module"})),fe={...Ca,...ga};function va(t,e){return jt(t,new fe.classes.URLSearchParams,{visitor:function(n,o,s,r){return fe.isNode&&v.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function _a(t){return v.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Sa(t){const e={},n=Object.keys(t);let o;const s=n.length;let r;for(o=0;o<s;o++)r=n[o],e[r]=t[r];return e}function qi(t){function e(n,o,s,r){let l=n[r++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=r>=n.length;return l=!l&&v.isArray(s)?s.length:l,d?(v.hasOwnProp(s,l)?s[l]=[s[l],o]:s[l]=o,!u):((!s[l]||!v.isObject(s[l]))&&(s[l]=[]),e(n,o,s[l],r)&&v.isArray(s[l])&&(s[l]=Sa(s[l])),!u)}if(v.isFormData(t)&&v.isFunction(t.entries)){const n={};return v.forEachEntry(t,(o,s)=>{e(_a(o),s,n,0)}),n}return null}function xa(t,e,n){if(v.isString(t))try{return(e||JSON.parse)(t),v.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const Jn={transitional:Vi,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,r=v.isObject(e);if(r&&v.isHTMLForm(e)&&(e=new FormData(e)),v.isFormData(e))return s?JSON.stringify(qi(e)):e;if(v.isArrayBuffer(e)||v.isBuffer(e)||v.isStream(e)||v.isFile(e)||v.isBlob(e)||v.isReadableStream(e))return e;if(v.isArrayBufferView(e))return e.buffer;if(v.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return va(e,this.formSerializer).toString();if((u=v.isFileList(e))||o.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return jt(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return r||s?(n.setContentType("application/json",!1),xa(e)):e}],transformResponse:[function(e){const n=this.transitional||Jn.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(v.isResponse(e)||v.isReadableStream(e))return e;if(e&&v.isString(e)&&(o&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(u){if(l)throw u.name==="SyntaxError"?Y.from(u,Y.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],t=>{Jn.headers[t]={}});const zn=Jn,Aa=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wa=t=>{const e={};let n,o,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),o=l.substring(s+1).trim(),!(!n||e[n]&&Aa[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},Io=Symbol("internals");function mt(t){return t&&String(t).trim().toLowerCase()}function Ut(t){return t===!1||t==null?t:v.isArray(t)?t.map(Ut):String(t)}function Ia(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const Ra=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function pn(t,e,n,o,s){if(v.isFunction(o))return o.call(this,e,n);if(s&&(e=n),!!v.isString(e)){if(v.isString(o))return e.indexOf(o)!==-1;if(v.isRegExp(o))return o.test(e)}}function Na(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function ba(t,e){const n=v.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(s,r,l){return this[o].call(this,e,s,r,l)},configurable:!0})})}class en{constructor(e){e&&this.set(e)}set(e,n,o){const s=this;function r(u,d,c){const f=mt(d);if(!f)throw new Error("header name must be a non-empty string");const p=v.findKey(s,f);(!p||s[p]===void 0||c===!0||c===void 0&&s[p]!==!1)&&(s[p||d]=Ut(u))}const l=(u,d)=>v.forEach(u,(c,f)=>r(c,f,d));if(v.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(v.isString(e)&&(e=e.trim())&&!Ra(e))l(wa(e),n);else if(v.isObject(e)&&v.isIterable(e)){let u={},d,c;for(const f of e){if(!v.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[c=f[0]]=(d=u[c])?v.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(u,n)}else e!=null&&r(n,e,o);return this}get(e,n){if(e=mt(e),e){const o=v.findKey(this,e);if(o){const s=this[o];if(!n)return s;if(n===!0)return Ia(s);if(v.isFunction(n))return n.call(this,s,o);if(v.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=mt(e),e){const o=v.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||pn(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let s=!1;function r(l){if(l=mt(l),l){const u=v.findKey(o,l);u&&(!n||pn(o,o[u],u,n))&&(delete o[u],s=!0)}}return v.isArray(e)?e.forEach(r):r(e),s}clear(e){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const r=n[o];(!e||pn(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const n=this,o={};return v.forEach(this,(s,r)=>{const l=v.findKey(o,r);if(l){n[l]=Ut(s),delete n[r];return}const u=e?Na(r):String(r).trim();u!==r&&delete n[r],n[u]=Ut(s),o[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return v.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=e&&v.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(s=>o.set(s)),o}static accessor(e){const o=(this[Io]=this[Io]={accessors:{}}).accessors,s=this.prototype;function r(l){const u=mt(l);o[u]||(ba(s,l),o[u]=!0)}return v.isArray(e)?e.forEach(r):r(e),this}}en.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(en.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});v.freezeMethods(en);const Se=en;function mn(t,e){const n=this||zn,o=e||n,s=Se.from(o.headers);let r=o.data;return v.forEach(t,function(u){r=u.call(n,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function Gi(t){return!!(t&&t.__CANCEL__)}function it(t,e,n){Y.call(this,t??"canceled",Y.ERR_CANCELED,e,n),this.name="CanceledError"}v.inherits(it,Y,{__CANCEL__:!0});function Hi(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new Y("Request failed with status code "+n.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Pa(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Ma(t,e){t=t||10;const n=new Array(t),o=new Array(t);let s=0,r=0,l;return e=e!==void 0?e:1e3,function(d){const c=Date.now(),f=o[r];l||(l=c),n[s]=d,o[s]=c;let p=r,m=0;for(;p!==s;)m+=n[p++],p=p%t;if(s=(s+1)%t,s===r&&(r=(r+1)%t),c-l<e)return;const g=f&&c-f;return g?Math.round(m*1e3/g):void 0}}function ka(t,e){let n=0,o=1e3/e,s,r;const l=(c,f=Date.now())=>{n=f,s=null,r&&(clearTimeout(r),r=null),t(...c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=o?l(c,f):(s=c,r||(r=setTimeout(()=>{r=null,l(s)},o-p)))},()=>s&&l(s)]}const Ht=(t,e,n=3)=>{let o=0;const s=Ma(50,250);return ka(r=>{const l=r.loaded,u=r.lengthComputable?r.total:void 0,d=l-o,c=s(d),f=l<=u;o=l;const p={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:c||void 0,estimated:c&&u&&f?(u-l)/c:void 0,event:r,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(p)},n)},Ro=(t,e)=>{const n=t!=null;return[o=>e[0]({lengthComputable:n,total:t,loaded:o}),e[1]]},No=t=>(...e)=>v.asap(()=>t(...e)),Da=fe.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,fe.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,La=fe.hasStandardBrowserEnv?{write(t,e,n,o,s,r,l){if(typeof document>"u")return;const u=[`${t}=${encodeURIComponent(e)}`];v.isNumber(n)&&u.push(`expires=${new Date(n).toUTCString()}`),v.isString(o)&&u.push(`path=${o}`),v.isString(s)&&u.push(`domain=${s}`),r===!0&&u.push("secure"),v.isString(l)&&u.push(`SameSite=${l}`),document.cookie=u.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ua(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Fa(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Bi(t,e,n){let o=!Ua(e);return t&&(o||n==!1)?Fa(t,e):e}const bo=t=>t instanceof Se?{...t}:t;function Ke(t,e){e=e||{};const n={};function o(c,f,p,m){return v.isPlainObject(c)&&v.isPlainObject(f)?v.merge.call({caseless:m},c,f):v.isPlainObject(f)?v.merge({},f):v.isArray(f)?f.slice():f}function s(c,f,p,m){if(v.isUndefined(f)){if(!v.isUndefined(c))return o(void 0,c,p,m)}else return o(c,f,p,m)}function r(c,f){if(!v.isUndefined(f))return o(void 0,f)}function l(c,f){if(v.isUndefined(f)){if(!v.isUndefined(c))return o(void 0,c)}else return o(void 0,f)}function u(c,f,p){if(p in e)return o(c,f);if(p in t)return o(void 0,c)}const d={url:r,method:r,data:r,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(c,f,p)=>s(bo(c),bo(f),p,!0)};return v.forEach(Object.keys({...t,...e}),function(f){const p=d[f]||s,m=p(t[f],e[f],f);v.isUndefined(m)&&p!==u||(n[f]=m)}),n}const $i=t=>{const e=Ke({},t);let{data:n,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:r,headers:l,auth:u}=e;if(e.headers=l=Se.from(l),e.url=Fi(Bi(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),v.isFormData(n)){if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(v.isFunction(n.getHeaders)){const d=n.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([f,p])=>{c.includes(f.toLowerCase())&&l.set(f,p)})}}if(fe.hasStandardBrowserEnv&&(o&&v.isFunction(o)&&(o=o(e)),o||o!==!1&&Da(e.url))){const d=s&&r&&La.read(r);d&&l.set(s,d)}return e},Va=typeof XMLHttpRequest<"u",qa=Va&&function(t){return new Promise(function(n,o){const s=$i(t);let r=s.data;const l=Se.from(s.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:c}=s,f,p,m,g,y;function T(){g&&g(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(s.method.toUpperCase(),s.url,!0),E.timeout=s.timeout;function _(){if(!E)return;const S=Se.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),b={data:!u||u==="text"||u==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:S,config:t,request:E};Hi(function(M){n(M),T()},function(M){o(M),T()},b),E=null}"onloadend"in E?E.onloadend=_:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(_)},E.onabort=function(){E&&(o(new Y("Request aborted",Y.ECONNABORTED,t,E)),E=null)},E.onerror=function(A){const b=A&&A.message?A.message:"Network Error",V=new Y(b,Y.ERR_NETWORK,t,E);V.event=A||null,o(V),E=null},E.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||Vi;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),o(new Y(A,b.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,E)),E=null},r===void 0&&l.setContentType(null),"setRequestHeader"in E&&v.forEach(l.toJSON(),function(A,b){E.setRequestHeader(b,A)}),v.isUndefined(s.withCredentials)||(E.withCredentials=!!s.withCredentials),u&&u!=="json"&&(E.responseType=s.responseType),c&&([m,y]=Ht(c,!0),E.addEventListener("progress",m)),d&&E.upload&&([p,g]=Ht(d),E.upload.addEventListener("progress",p),E.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(f=S=>{E&&(o(!S||S.type?new it(null,t,E):S),E.abort(),E=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const x=Pa(s.url);if(x&&fe.protocols.indexOf(x)===-1){o(new Y("Unsupported protocol "+x+":",Y.ERR_BAD_REQUEST,t));return}E.send(r||null)})},Ga=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let o=new AbortController,s;const r=function(c){if(!s){s=!0,u();const f=c instanceof Error?c:this.reason;o.abort(f instanceof Y?f:new it(f instanceof Error?f.message:f))}};let l=e&&setTimeout(()=>{l=null,r(new Y(`timeout ${e} of ms exceeded`,Y.ETIMEDOUT))},e);const u=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),t=null)};t.forEach(c=>c.addEventListener("abort",r));const{signal:d}=o;return d.unsubscribe=()=>v.asap(u),d}},Ha=Ga,Ba=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let o=0,s;for(;o<n;)s=o+e,yield t.slice(o,s),o=s},$a=async function*(t,e){for await(const n of Oa(t))yield*Ba(n,e)},Oa=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:o}=await e.read();if(n)break;yield o}}finally{await e.cancel()}},Po=(t,e,n,o)=>{const s=$a(t,e);let r=0,l,u=d=>{l||(l=!0,o&&o(d))};return new ReadableStream({async pull(d){try{const{done:c,value:f}=await s.next();if(c){u(),d.close();return}let p=f.byteLength;if(n){let m=r+=p;n(m)}d.enqueue(new Uint8Array(f))}catch(c){throw u(c),c}},cancel(d){return u(d),s.return()}},{highWaterMark:2})},Mo=64*1024,{isFunction:It}=v,Ja=(({Request:t,Response:e})=>({Request:t,Response:e}))(v.global),{ReadableStream:ko,TextEncoder:Do}=v.global,Lo=(t,...e)=>{try{return!!t(...e)}catch{return!1}},za=t=>{t=v.merge.call({skipUndefined:!0},Ja,t);const{fetch:e,Request:n,Response:o}=t,s=e?It(e):typeof fetch=="function",r=It(n),l=It(o);if(!s)return!1;const u=s&&It(ko),d=s&&(typeof Do=="function"?(y=>T=>y.encode(T))(new Do):async y=>new Uint8Array(await new n(y).arrayBuffer())),c=r&&u&&Lo(()=>{let y=!1;const T=new n(fe.origin,{body:new ko,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!T}),f=l&&u&&Lo(()=>v.isReadableStream(new o("").body)),p={stream:f&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(T,E)=>{let _=T&&T[y];if(_)return _.call(T);throw new Y(`Response type '${y}' is not supported`,Y.ERR_NOT_SUPPORT,E)})});const m=async y=>{if(y==null)return 0;if(v.isBlob(y))return y.size;if(v.isSpecCompliantForm(y))return(await new n(fe.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(v.isArrayBufferView(y)||v.isArrayBuffer(y))return y.byteLength;if(v.isURLSearchParams(y)&&(y=y+""),v.isString(y))return(await d(y)).byteLength},g=async(y,T)=>{const E=v.toFiniteNumber(y.getContentLength());return E??m(T)};return async y=>{let{url:T,method:E,data:_,signal:x,cancelToken:S,timeout:A,onDownloadProgress:b,onUploadProgress:V,responseType:M,headers:O,withCredentials:D="same-origin",fetchOptions:$}=$i(y),N=e||fetch;M=M?(M+"").toLowerCase():"text";let B=Ha([x,S&&S.toAbortSignal()],A),U=null;const X=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let se;try{if(V&&c&&E!=="get"&&E!=="head"&&(se=await g(O,_))!==0){let Te=new n(T,{method:"POST",body:_,duplex:"half"}),G;if(v.isFormData(_)&&(G=Te.headers.get("content-type"))&&O.setContentType(G),Te.body){const[He,Pe]=Ro(se,Ht(No(V)));_=Po(Te.body,Mo,He,Pe)}}v.isString(D)||(D=D?"include":"omit");const R=r&&"credentials"in n.prototype,J={...$,signal:B,method:E.toUpperCase(),headers:O.normalize().toJSON(),body:_,duplex:"half",credentials:R?D:void 0};U=r&&new n(T,J);let ue=await(r?N(U,$):N(T,J));const Re=f&&(M==="stream"||M==="response");if(f&&(b||Re&&X)){const Te={};["status","statusText","headers"].forEach(Be=>{Te[Be]=ue[Be]});const G=v.toFiniteNumber(ue.headers.get("content-length")),[He,Pe]=b&&Ro(G,Ht(No(b),!0))||[];ue=new o(Po(ue.body,Mo,He,()=>{Pe&&Pe(),X&&X()}),Te)}M=M||"text";let Ge=await p[v.findKey(p,M)||"text"](ue,y);return!Re&&X&&X(),await new Promise((Te,G)=>{Hi(Te,G,{data:Ge,headers:Se.from(ue.headers),status:ue.status,statusText:ue.statusText,config:y,request:U})})}catch(R){throw X&&X(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,y,U),{cause:R.cause||R}):Y.from(R,R&&R.code,y,U)}}},Wa=new Map,Oi=t=>{let e=t&&t.env||{};const{fetch:n,Request:o,Response:s}=e,r=[o,s,n];let l=r.length,u=l,d,c,f=Wa;for(;u--;)d=r[u],c=f.get(d),c===void 0&&f.set(d,c=u?new Map:za(e)),f=c;return c};Oi();const Wn={http:aa,xhr:qa,fetch:{get:Oi}};v.forEach(Wn,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Uo=t=>`- ${t}`,Ya=t=>v.isFunction(t)||t===null||t===!1;function Ka(t,e){t=v.isArray(t)?t:[t];const{length:n}=t;let o,s;const r={};for(let l=0;l<n;l++){o=t[l];let u;if(s=o,!Ya(o)&&(s=Wn[(u=String(o)).toLowerCase()],s===void 0))throw new Y(`Unknown adapter '${u}'`);if(s&&(v.isFunction(s)||(s=s.get(e))))break;r[u||"#"+l]=s}if(!s){const l=Object.entries(r).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let u=n?l.length>1?`since :
`+l.map(Uo).join(`
`):" "+Uo(l[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return s}const Ji={getAdapter:Ka,adapters:Wn};function hn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new it(null,t)}function Fo(t){return hn(t),t.headers=Se.from(t.headers),t.data=mn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ji.getAdapter(t.adapter||zn.adapter,t)(t).then(function(o){return hn(t),o.data=mn.call(t,t.transformResponse,o),o.headers=Se.from(o.headers),o},function(o){return Gi(o)||(hn(t),o&&o.response&&(o.response.data=mn.call(t,t.transformResponse,o.response),o.response.headers=Se.from(o.response.headers))),Promise.reject(o)})}const zi="1.13.2",tn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tn[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const Vo={};tn.transitional=function(e,n,o){function s(r,l){return"[Axios v"+zi+"] Transitional option '"+r+"'"+l+(o?". "+o:"")}return(r,l,u)=>{if(e===!1)throw new Y(s(l," has been removed"+(n?" in "+n:"")),Y.ERR_DEPRECATED);return n&&!Vo[l]&&(Vo[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,l,u):!0}};tn.spelling=function(e){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${e}`),!0)};function Xa(t,e,n){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let s=o.length;for(;s-- >0;){const r=o[s],l=e[r];if(l){const u=t[r],d=u===void 0||l(u,r,t);if(d!==!0)throw new Y("option "+r+" must be "+d,Y.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Y("Unknown option "+r,Y.ERR_BAD_OPTION)}}const Ft={assertOptions:Xa,validators:tn},be=Ft.validators;class Bt{constructor(e){this.defaults=e||{},this.interceptors={request:new wo,response:new wo}}async request(e,n){try{return await this._request(e,n)}catch(o){if(o instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ke(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:r}=n;o!==void 0&&Ft.assertOptions(o,{silentJSONParsing:be.transitional(be.boolean),forcedJSONParsing:be.transitional(be.boolean),clarifyTimeoutError:be.transitional(be.boolean)},!1),s!=null&&(v.isFunction(s)?n.paramsSerializer={serialize:s}:Ft.assertOptions(s,{encode:be.function,serialize:be.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ft.assertOptions(n,{baseUrl:be.spelling("baseURL"),withXsrfToken:be.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=r&&v.merge(r.common,r[n.method]);r&&v.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),n.headers=Se.concat(l,r);const u=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(d=d&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const c=[];this.interceptors.response.forEach(function(T){c.push(T.fulfilled,T.rejected)});let f,p=0,m;if(!d){const y=[Fo.bind(this),void 0];for(y.unshift(...u),y.push(...c),m=y.length,f=Promise.resolve(n);p<m;)f=f.then(y[p++],y[p++]);return f}m=u.length;let g=n;for(;p<m;){const y=u[p++],T=u[p++];try{g=y(g)}catch(E){T.call(this,E);break}}try{f=Fo.call(this,g)}catch(y){return Promise.reject(y)}for(p=0,m=c.length;p<m;)f=f.then(c[p++],c[p++]);return f}getUri(e){e=Ke(this.defaults,e);const n=Bi(e.baseURL,e.url,e.allowAbsoluteUrls);return Fi(n,e.params,e.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(e){Bt.prototype[e]=function(n,o){return this.request(Ke(o||{},{method:e,url:n,data:(o||{}).data}))}});v.forEach(["post","put","patch"],function(e){function n(o){return function(r,l,u){return this.request(Ke(u||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:l}))}}Bt.prototype[e]=n(),Bt.prototype[e+"Form"]=n(!0)});const Vt=Bt;class Yn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(s=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](s);o._listeners=null}),this.promise.then=s=>{let r;const l=new Promise(u=>{o.subscribe(u),r=u}).then(s);return l.cancel=function(){o.unsubscribe(r)},l},e(function(r,l,u){o.reason||(o.reason=new it(r,l,u),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=o=>{e.abort(o)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Yn(function(s){e=s}),cancel:e}}}const Qa=Yn;function Za(t){return function(n){return t.apply(null,n)}}function ja(t){return v.isObject(t)&&t.isAxiosError===!0}const In={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(In).forEach(([t,e])=>{In[e]=t});const eu=In;function Wi(t){const e=new Vt(t),n=Ai(Vt.prototype.request,e);return v.extend(n,Vt.prototype,e,{allOwnKeys:!0}),v.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Wi(Ke(t,s))},n}const re=Wi(zn);re.Axios=Vt;re.CanceledError=it;re.CancelToken=Qa;re.isCancel=Gi;re.VERSION=zi;re.toFormData=jt;re.AxiosError=Y;re.Cancel=re.CanceledError;re.all=function(e){return Promise.all(e)};re.spread=Za;re.isAxiosError=ja;re.mergeConfig=Ke;re.AxiosHeaders=Se;re.formToJSON=t=>qi(v.isHTMLForm(t)?new FormData(t):t);re.getAdapter=Ji.getAdapter;re.HttpStatusCode=eu;re.default=re;const tu=re,nu="https://prestanace.renace.tech/api",K=tu.create({baseURL:nu,headers:{"Content-Type":"application/json"}});K.interceptors.request.use(t=>{const e=localStorage.getItem("authToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));K.interceptors.response.use(t=>t.data,t=>Promise.reject(t));const ou={getAll:async()=>{try{return await K.get("/clients")}catch(t){return console.error("clientService.getAll error:",t),[]}},create:t=>K.post("/clients",t),update:(t,e)=>K.put(`/clients/${t}`,e),delete:t=>K.delete(`/clients/${t}`),uploadDocument:(t,e)=>K.post(`/clients/${t}/documents`,e)},su={getAll:async()=>{try{return await K.get("/loans")}catch(t){return console.error("loanService.getAll error:",t),[]}},create:async t=>{var e,n,o,s,r;try{return await K.post("/loans",t)}catch(l){throw console.error("loanService.create error:",((e=l==null?void 0:l.response)==null?void 0:e.data)||l.message),new Error(((o=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:o.details)||((r=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:r.error)||"Error al crear préstamo")}},update:(t,e)=>K.put(`/loans/${t}`,e),delete:t=>K.delete(`/loans/${t}`),cancel:async(t,e)=>{var n,o;try{return await K.post(`/loans/${t}/cancel`,{reason:e})}catch(s){throw new Error(((o=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:o.error)||"Error al cancelar préstamo")}},archive:async t=>{var e,n;try{return await K.post(`/loans/${t}/archive`)}catch(o){throw new Error(((n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.error)||"Error al archivar préstamo")}},unarchive:async t=>{var e,n;try{return await K.post(`/loans/${t}/unarchive`)}catch(o){throw new Error(((n=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:n.error)||"Error al desarchivar préstamo")}}},Je=ou,gn=su,qo={getAll:async()=>{try{return await K.get("/payments")}catch(t){return console.error("paymentService.getAll error:",t),[]}},create:t=>K.post("/payments",t)},iu={get:async()=>{try{return await K.get("/settings")}catch(t){return console.error("settingsService.get error:",t),null}},update:t=>K.put("/settings",t)},yn={getAll:async()=>{try{return await K.get("/expenses")}catch(t){return console.error("expenseService.getAll error:",t),[]}},create:t=>K.post("/expenses",t),delete:t=>K.delete(`/expenses/${t}`)},ze={getAll:async()=>{try{return await K.get("/collectors")}catch(t){return console.error("collectorService.getAll error:",t),[]}},create:t=>K.post("/collectors",t),update:(t,e)=>K.put(`/collectors/${t}`,e),delete:t=>K.delete(`/collectors/${t}`)},Rt={getAll:async()=>{try{return await K.get("/employees")}catch(t){return console.error("employeeService.getAll error:",t),[]}},create:t=>K.post("/employees",t),update:(t,e)=>K.put(`/employees/${t}`,e),delete:t=>K.delete(`/employees/${t}`)},ht=()=>Math.random().toString(36).substr(2,9),Ce=t=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(t),En=t=>t?new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"",ru=t=>t?new Date(t).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",lu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABcNJREFUeNrs3eFR21gUhmGFoQBKUAfrEkwDLFSwpoJNKgAqIB3grQDiBiAVrDuISqCESL7W+g6zk5CEIVjf886I5F/C5by6Or7nQ00DAAAAAAAAAAAAAAAAAACA/eXdq/wr7Unbf11Y7snw2F/r//7erdYE+LYA8/7rvbqZNN32+ryV46EX4/Gt/6cP/dzwUre57TWvbnyDCJ/66+6t7hJ2ALzmDvFPfy17Gbq38p868HPBK+4QF/31pb8h3m5vigRAJKebJ4L25P53i0AA/E7mlQgtAZAswvBodNlfRwRAKkOP8O9rPhYRAG+xWb7f7AYEQPRuUHqDIwIguTcYHolmBED6I9GMAEjlaCvBggBIluDmpSUgAPaN65d8HCIA9vVxaEYAJEtw+xIfkRIA+0q7kYAACGb+qyfGBMC+c/Er/QABMAV+uh8gAKbSD7wnANIfhVoCIJlrAiCZ0x8N0xAA03sUIgCCmf/Ix6IEwBT5mwBIZvHccwECYLoSEADB/EUAJDN7zsEYATBlTgmAZP4kAJKZEwDZfGc0ggCI3gUIgKnzBwEQ/RBEACQzIwDSG+GWAPAYRACAAAABEMWcAMD/cPgq/0q3eui/vrPcz2nXTu6bZ8ywwCPQFIv/WvETILX4F81P/no/EGDfi384rby2EARILP7ytpPy1hMQII6h6W0tAwES7/43zXeGtUCAKTe9CwtBgNSm98ZCECC16b23EARILn6f+BAgkmtNLwFS7/7vNb0ESC3+eeOklwChxd825aQXBIhseo05ECAWJ70EiL37XzbP+PXcIMAUi38o/AsLQYDE4jfmQIDopvdG00uAVG41vQRIvfsLtBMgtvgXjUA7AYKbXmMOBIhtep30EiAWgXYCxN79jTkQILrpXVgIAqQ2vU56CRBZ/G0j0E6A0OL3iQ8BohFoJ0Ds3V+gnQCxxT9vnPQSILT4Z41AOwGCm16z/QSIxUkvAWLv/peNQDsBQotfoJ0A0U2vMQcCxDa9TnoLawLkMRR/axk2xX9FgKy7v0B74bG/zrZ/EiCk+BeNQPvIcdOtOj1AVtNrzKFw3hf/Ou2bPggufu/r2rHsi3+Z+I0n7wCKf2x6u9V56jefKYBA+0i3ee4P5iCw+Iemd6H2t5/4dKtHAmQ1vU56Cx8Sm95cAQTaaz6mNr2ZAhhzqHnoi/+DZcjaAQTaC+umnPQiRgCB9rrpPU9verMEEGivOdf0Jgkg0F5z1Rf/nWVIEUCgvWYYc7i0DFk7gJPeXdPrE58oAQTa66b3TNObJIBAe81Z2mx/tgDGHGqGMYcHy5AigJPep03vR8uQtQMItI9Nb/Bsf6YAAu1103tsGZIEEGivOfaJT5IAAu01xhyiBBBorzHbH7gDKP6C2f44AQTaR7rGbH+YAALtI8Yc4gRw0qvpjRVAoL3GbH+UAMYcau7M9uftAALthfXm0QdBAgi0102vQHuUAALtNWea3iQBBNprzPZHCSDQXmO2P3AHcNK7a3qNOUQJINBeN73Gm6MEEGivUfxRAhhzqDHmECWAk96nTe/SMmTtAALtY9Mr0B4mgED7SNcItIcJINA+YrY/TgCB9hovq4sSQKC9RqA9cAdQ/IU7gfY0AQTaR8z2xwkg0F43vWb7owQos/1OegtOeqMEKIF2s/0FgfYoAYw51HhZXeAOINC+a3p94hMlgEB73fQ66Y0SoMz2O+kteFldlABm+2vOBdqTBBBof9r0Li1D1g7gpHdses32hwkg0F43vWb7owQoYw4C7X6bQ6AAZvtrzPZHCeCkt8Zsf+AOINBe8LK6OAEE2ke6xsvqwgQQaK+bXmMOUQI46a0x2x8lwC7QDrP9kTuAQHvBy+riBBBoHxFojxNAoF3TGyuAQHuN2f4oAQTaa7ysLkoAYw41XlY3UQ6/df/vr0/bK5204h8e864m9P3YuQEAAAAAAAAAAAAAAAAAACbJVwEGANx1lRB7J4SlAAAAAElFTkSuQmCC";function au({activeTab:t,setActiveTab:e,children:n,companyName:o}){return h.jsxs("aside",{className:"flex flex-col w-64 bg-slate-950 text-slate-300 border-r border-slate-800 h-screen shadow-2xl z-50",children:[h.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-800/50",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20",children:h.jsx("img",{src:lu,alt:"Logo",className:"w-6 h-6 object-contain"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"font-bold text-lg text-white tracking-tight leading-none",children:"Presta Pro"}),h.jsx("p",{className:"text-[10px] text-slate-500 font-medium tracking-wider mt-0.5",children:"PANEL DE CONTROL"})]})]}),h.jsx("nav",{className:"flex-1 overflow-y-auto py-6 px-3 space-y-6 scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-transparent",children:n}),h.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-800 text-center pb-4",children:[h.jsx("p",{className:"text-[10px] text-slate-500",children:"Powered by"}),h.jsx("p",{className:"font-bold text-slate-400 text-sm tracking-widest",children:o||"RENACE.TECH"})]})]})}const Yi=""+new URL("logo-small-299a57c9.svg",import.meta.url).href,uu=({children:t,className:e=""})=>h.jsx("div",{className:`bg-white dark:bg-slate-800 dark:border-slate-700 rounded-xl shadow-sm border border-slate-200 p-6 transition-colors duration-200 ${e} print:border-none print:shadow-none`,children:t}),cu=async()=>await K.get("/notifications"),du=async t=>await K.post(`/notifications/${t}/read`),fu=async()=>await K.post("/notifications/read-all"),pu=async t=>await K.delete(`/notifications/${t}`),mu=async()=>await K.get("/notifications/preferences"),hu=async t=>await K.put("/notifications/preferences",t),gu=async t=>await K.post("/notifications/test-email",{email:t}),Go={getNotifications:cu,markAsRead:du,markAllAsRead:fu,deleteNotification:pu,getEmailPreferences:mu,updateEmailPreferences:hu,sendTestEmail:gu},yu={PAYMENT_DUE:"💰",PAYMENT_RECEIVED:"✅",REPORT:"📊",SYSTEM:"⚙️",SUBSCRIPTION:"💳",OVERDUE:"⚠️"};function Eu({onNavigateToNotifications:t}){const[e,n]=P.useState([]),[o,s]=P.useState(0),[r,l]=P.useState(!1),u=P.useRef(null),d=P.useRef(0),c=()=>{try{const g=new(window.AudioContext||window.webkitAudioContext),y=g.createOscillator(),T=g.createGain();y.connect(T),T.connect(g.destination),y.frequency.value=800,y.type="sine",T.gain.setValueAtTime(.3,g.currentTime),T.gain.exponentialRampToValueAtTime(.01,g.currentTime+.3),y.start(g.currentTime),y.stop(g.currentTime+.3)}catch{console.log("Sound not supported")}};P.useEffect(()=>{f();const g=setInterval(f,6e4);return()=>clearInterval(g)},[]),P.useEffect(()=>{const g=y=>{u.current&&!u.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const f=async()=>{try{const g=await Go.getNotifications(),y=g.unreadCount||0;y>d.current&&d.current!==0&&c(),d.current=y,n((g.notifications||[]).slice(0,5)),s(y)}catch(g){console.error("Error loading notifications:",g)}},p=async(g,y)=>{y.stopPropagation();try{await Go.markAsRead(g),n(T=>T.map(E=>E.id===g?{...E,read:!0}:E)),s(T=>Math.max(0,T-1))}catch(T){console.error("Error marking as read:",T)}},m=()=>{l(!1),t==null||t()};return h.jsxs("div",{className:"relative",ref:u,children:[h.jsxs("button",{onClick:()=>l(!r),className:"relative p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Notificaciones",children:[h.jsx(po,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"}),o>0&&h.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:o>9?"9+":o})]}),r&&h.jsxs("div",{className:"fixed inset-x-4 top-16 sm:absolute sm:inset-auto sm:right-0 sm:top-full sm:mt-2 w-auto sm:w-80 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100",children:"Notificaciones"}),h.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:h.jsx(xi,{size:16,className:"text-slate-400"})})]}),h.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.length===0?h.jsxs("div",{className:"p-8 text-center",children:[h.jsx(po,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Sin notificaciones"})]}):e.map(g=>h.jsx("div",{className:`p-3 border-b border-slate-100 dark:border-slate-700 last:border-b-0 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${g.read?"":"bg-blue-50/50 dark:bg-blue-900/10"}`,children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx("span",{className:"text-lg",children:yu[g.type]||"📌"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:`text-sm font-medium truncate ${g.read?"text-slate-600 dark:text-slate-400":"text-slate-900 dark:text-slate-100"}`,children:g.title}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 truncate",children:g.message}),h.jsx("p",{className:"text-xs text-slate-400 mt-1",children:ru(g.createdAt)})]}),!g.read&&h.jsx("button",{onClick:y=>p(g.id,y),className:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded",title:"Marcar como leída",children:h.jsx(pl,{size:14})})]})},g.id))}),h.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:h.jsx("button",{onClick:m,className:"w-full py-2 text-sm text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"Ver todas las notificaciones →"})})]})]})}function Tu({activeTitle:t,setMobileMenuOpen:e,theme:n,toggleTheme:o,companyName:s,userName:r,onLogout:l,companyLogo:u,onNavigate:d}){const[c,f]=P.useState(!1);return h.jsxs("header",{className:"h-16 glass z-20 sticky top-0 flex items-center justify-between px-6 transition-all print:hidden",children:[h.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[h.jsx("img",{src:u||Yi,alt:s||"Presta Pro",className:"w-7 h-7 rounded-lg object-contain"}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100 text-sm truncate max-w-[140px]",children:s||"Presta Pro"})]}),h.jsx("h1",{className:"hidden md:block text-xl font-bold text-slate-800 dark:text-slate-100",children:t}),h.jsxs("div",{className:"flex items-center gap-4 relative",children:[h.jsxs("button",{onClick:o,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-700 dark:text-slate-200",children:[h.jsx("span",{className:"block dark:hidden",children:"🌙"}),h.jsx("span",{className:"hidden dark:block",children:"☀️"})]}),h.jsx("div",{className:"relative",children:h.jsx(Eu,{onNavigateToNotifications:()=>d&&d("notifications")})}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{type:"button",onClick:()=>f(p=>!p),className:"flex items-center gap-2 focus:outline-none",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-lg shadow-indigo-500/30",children:(r||"Admin").charAt(0).toUpperCase()}),h.jsx("span",{className:"text-sm font-bold hidden md:block text-slate-700 dark:text-slate-200 truncate max-w-[140px]",children:r||"Admin"})]}),c&&l&&h.jsxs("div",{className:"absolute right-0 mt-2 w-48 glass rounded-xl py-1 text-sm animate-fade-in z-50",children:[h.jsxs("div",{className:"px-4 py-2 border-b border-slate-200 dark:border-slate-700 mb-1",children:[h.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:r||"Admin"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Sesión activa"})]}),h.jsx("button",{type:"button",onClick:l,className:"w-full text-left px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 font-medium transition-colors",children:"Cerrar sesión"})]})]})]})]})}const Cu=t=>{const e=t.replace(/\D/g,"");return e.length<=3?e:e.length<=10?`${e.slice(0,3)}-${e.slice(3)}`:`${e.slice(0,3)}-${e.slice(3,10)}-${e.slice(10,11)}`},vu=t=>t?t.replace(/\D/g,"").length===11:!0;function _u({open:t,onClose:e,onSave:n,initialClient:o,collectors:s=[]}){const r={name:"",phone:"",address:"",idNumber:"",notes:"",email:"",birthDate:"",collectorId:""},[l,u]=P.useState(r),[d,c]=P.useState({});if(P.useEffect(()=>{t&&(u(o?{name:o.name||"",phone:o.phone||"",address:o.address||"",idNumber:o.idNumber||"",notes:o.notes||"",photoUrl:o.photoUrl||"",email:o.email||"",birthDate:o.birthDate?new Date(o.birthDate).toISOString().split("T")[0]:"",collectorId:o.collectorId||""}:{...r,photoUrl:""}),c({}))},[t,o]),!t)return null;const f=y=>{const{name:T,value:E}=y.target;u(T==="idNumber"?_=>({..._,[T]:Cu(E)}):_=>({..._,[T]:E})),d[T]&&c(_=>({..._,[T]:null}))},p=()=>{const y={};return l.name.trim()||(y.name="El nombre es requerido"),l.phone.trim()||(y.phone="El teléfono es requerido"),l.idNumber&&!vu(l.idNumber)&&(y.idNumber="Formato: 000-0000000-0"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(y.email="Email inválido"),c(y),Object.keys(y).length===0},m=y=>{if(y.preventDefault(),!p())return;const T=o&&o.id?{...o,...l}:l;n(T),u(r)},g=async y=>{const T=y.target.files[0];if(T)try{const{fileToBase64:E,resizeImage:_}=await oe(()=>import("./imageUtils-542d258e.js"),[],import.meta.url),x=await E(T),S=await _(x,300,300);u(A=>({...A,photoUrl:S}))}catch(E){console.error("Error processing image",E)}};return h.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm animate-fade-in",children:h.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl shadow-2xl p-6 w-full max-w-lg border border-white/20 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[h.jsx("h2",{className:"text-xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:o?"Editar Cliente":"Nuevo Cliente"}),h.jsxs("form",{onSubmit:m,className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center mb-4",children:h.jsxs("div",{className:"relative group",children:[h.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-indigo-100 dark:border-indigo-500/30 shadow-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:l.photoUrl?h.jsx("img",{src:l.photoUrl,alt:"Client",className:"w-full h-full object-cover"}):h.jsx("span",{className:"text-3xl text-slate-300",children:"📷"})}),h.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full cursor-pointer shadow-lg hover:bg-blue-700 transition-colors",title:"Cambiar foto",children:[h.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g}),h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"17 8 12 3 7 8"}),h.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})]})]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Nombre completo *"}),h.jsx("input",{name:"name",value:l.name,onChange:f,className:`w-full p-2.5 border ${d.name?"border-red-500":"border-slate-200 dark:border-slate-600"} rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all`,placeholder:"Ej: Juan Pérez"}),d.name&&h.jsx("p",{className:"text-xs text-red-500 mt-1",children:d.name})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Teléfono *"}),h.jsx("input",{name:"phone",value:l.phone,onChange:f,className:`w-full p-2.5 border ${d.phone?"border-red-500":"border-slate-200 dark:border-slate-600"} rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all`,placeholder:"809-000-0000"}),d.phone&&h.jsx("p",{className:"text-xs text-red-500 mt-1",children:d.phone})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Cédula / ID"}),h.jsx("input",{name:"idNumber",value:l.idNumber,onChange:f,maxLength:13,className:`w-full p-2.5 border ${d.idNumber?"border-red-500":"border-slate-200 dark:border-slate-600"} rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all`,placeholder:"000-0000000-0"}),d.idNumber&&h.jsx("p",{className:"text-xs text-red-500 mt-1",children:d.idNumber})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),h.jsx("input",{name:"email",type:"email",value:l.email,onChange:f,className:`w-full p-2.5 border ${d.email?"border-red-500":"border-slate-200 dark:border-slate-600"} rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all`,placeholder:"cliente@email.com"}),d.email&&h.jsx("p",{className:"text-xs text-red-500 mt-1",children:d.email})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de nacimiento"}),h.jsx("input",{name:"birthDate",type:"date",value:l.birthDate,onChange:f,className:"w-full p-2.5 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Dirección"}),h.jsx("input",{name:"address",value:l.address,onChange:f,className:"w-full p-2.5 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"Sector, calle, referencia"})]}),s.length>0&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Cobrador asignado"}),h.jsxs("select",{name:"collectorId",value:l.collectorId,onChange:f,className:"w-full p-2.5 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",children:[h.jsx("option",{value:"",children:"Sin asignar"}),s.map(y=>h.jsx("option",{value:y.id,children:y.name},y.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Notas"}),h.jsx("textarea",{name:"notes",value:l.notes,onChange:f,className:"w-full p-2.5 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 min-h-[60px] text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"Información adicional del cliente"})]}),h.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[h.jsx("button",{type:"button",className:"px-4 py-2.5 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition-colors font-medium",onClick:e,children:"Cancelar"}),h.jsx("button",{type:"submit",className:"px-4 py-2.5 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold shadow-md transition-all",children:"Guardar"})]})]})]})})}function Su({open:t,onClose:e,onSave:n,initialEmployee:o}){const s={name:"",phone:"",address:"",idNumber:"",role:"Empleado",notes:"",photoUrl:"",email:""},[r,l]=P.useState(s),u=[{value:"Empleado",label:"Empleado General"},{value:"Cobrador",label:"Cobrador"},{value:"Secretaria",label:"Secretaria"},{value:"Supervisor",label:"Supervisor"},{value:"Admin",label:"Administrador"}];if(P.useEffect(()=>{t&&l(o?{name:o.name||"",phone:o.phone||"",address:o.address||"",idNumber:o.idNumber||"",role:o.role||"Empleado",notes:o.notes||"",photoUrl:o.photoUrl||"",email:o.email||""}:{...s})},[t,o]),!t)return null;const d=p=>{const{name:m,value:g}=p.target;l(y=>({...y,[m]:g}))},c=p=>{if(p.preventDefault(),!r.name)return;const m=o&&o.id?{...o,...r}:r;n(m),l(s)},f=async p=>{const m=p.target.files[0];if(m)try{const{fileToBase64:g,resizeImage:y}=await oe(()=>import("./imageUtils-542d258e.js"),[],import.meta.url),T=await g(m),E=await y(T,300,300);l(_=>({..._,photoUrl:E}))}catch(g){console.error("Error processing image",g)}};return h.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm animate-fade-in",children:h.jsxs("div",{className:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl shadow-2xl p-6 w-full max-w-md border border-white/20 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[h.jsx("h2",{className:"text-xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:o?"Editar Empleado":"Nuevo Empleado"}),h.jsxs("form",{onSubmit:c,className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center mb-4",children:h.jsxs("div",{className:"relative group",children:[h.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-indigo-100 dark:border-indigo-500/30 shadow-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:r.photoUrl?h.jsx("img",{src:r.photoUrl,alt:"Employee",className:"w-full h-full object-cover"}):h.jsx("span",{className:"text-3xl text-slate-300",children:"👤"})}),h.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full cursor-pointer shadow-lg hover:bg-blue-700 transition-colors",title:"Cambiar foto",children:[h.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:f}),h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"17 8 12 3 7 8"}),h.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})]})]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Nombre completo"}),h.jsx("input",{name:"name",value:r.name,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Ej: María Rodríguez",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Cargo / Rol"}),h.jsx("select",{name:"role",value:r.role,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",children:u.map(p=>h.jsx("option",{value:p.value,children:p.label},p.value))}),r.role==="Cobrador"&&h.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"ℹ️ Este empleado se agregará automáticamente a la lista de cobradores."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Teléfono"}),h.jsx("input",{name:"phone",value:r.phone,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Ej: 809-555-5555"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Cédula / ID"}),h.jsx("input",{name:"idNumber",value:r.idNumber,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Documento de identidad"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Email (Opcional)"}),h.jsx("input",{type:"email",name:"email",value:r.email,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"correo@ejemplo.com"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Dirección"}),h.jsx("input",{name:"address",value:r.address,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Sector, calle, # casa"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Notas"}),h.jsx("textarea",{name:"notes",value:r.notes,onChange:d,className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-900 dark:text-slate-100 min-h-[60px] text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Detalles adicionales..."})]}),h.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[h.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition-colors font-medium",onClick:e,children:"Cancelar"}),h.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold shadow-md transition-all",children:"Guardar Empleado"})]})]})]})})}function xu({activeTab:t,setActiveTab:e,setMobileMenuOpen:n,items:o}){return h.jsx("nav",{className:"fixed inset-x-0 bottom-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex justify-around py-2 px-1 md:hidden print:hidden z-40",children:o.map(s=>{const r=s.icon,l=s.id!=="more"&&t===s.id;return h.jsxs("button",{onClick:()=>{s.id==="more"?n(!0):(e(s.id),n(!1))},className:`flex flex-col items-center text-[10px] font-medium ${l?"text-blue-600 dark:text-blue-400":"text-slate-400 dark:text-slate-500"}`,children:[h.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center mb-1 ${l?"bg-blue-50 dark:bg-blue-900/30":"bg-slate-100 dark:bg-slate-800"}`,children:h.jsx(r,{size:18})}),h.jsx("span",{children:s.label})]},s.id)})})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Au,wu;function Iu(){return{geminiUrl:Au,vertexUrl:wu}}function Ru(t,e,n,o){var s,r;if(!(t!=null&&t.baseUrl)){const l=Iu();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(r=l.geminiUrl)!==null&&r!==void 0?r:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class De{}function L(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function a(t,e,n){for(let r=0;r<e.length-1;r++){const l=e[r];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];a(f,e.slice(r+1),n[c])}else for(const c of d)a(c,e.slice(r+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];a(d[0],e.slice(r+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function i(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(u=>i(u,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Nu(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),r=o.split("."),l=new Set;let u=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){u=d;break}if(u!==-1&&r.length>u)for(let d=u;d<r.length;d++){const c=r[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&l.add(c)}Rn(t,s,r,0,l)}}function Rn(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2),u=t;if(l in u&&Array.isArray(u[l]))for(const d of u[l])Rn(d,e,n,o+1,s)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,u=Object.keys(l).filter(c=>!c.startsWith("_")&&!s.has(c)),d={};for(const c of u)d[c]=l[c];for(const[c,f]of Object.entries(d)){const p=[];for(const m of n.slice(o))m==="*"?p.push(c):p.push(m);a(l,p,f)}for(const c of u)delete l[c]}}else{const l=t;r in l&&Rn(l[r],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kn(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bu(t){const e={},n=i(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=i(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function Pu(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],ku(l)),e}function Mu(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response"]);return l!=null&&a(e,["response"],Du(l)),e}function ku(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Lu(l))),a(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&a(e,["raiMediaFilteredReasons"],s),e}function Du(t){const e={},n=i(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Uu(l))),a(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&a(e,["raiMediaFilteredReasons"],s),e}function Lu(t){const e={},n=i(t,["video"]);return n!=null&&a(e,["video"],Bu(n)),e}function Uu(t){const e={},n=i(t,["_self"]);return n!=null&&a(e,["video"],$u(n)),e}function Fu(t){const e={},n=i(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function Vu(t){const e={},n=i(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function qu(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response"]);return l!=null&&a(e,["response"],Gu(l)),e}function Gu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&a(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&a(e,["documentName"],s),e}function Ki(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response"]);return l!=null&&a(e,["response"],Hu(l)),e}function Hu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&a(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&a(e,["documentName"],s),e}function Bu(t){const e={},n=i(t,["uri"]);n!=null&&a(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],Kn(o));const s=i(t,["encoding"]);return s!=null&&a(e,["mimeType"],s),e}function $u(t){const e={},n=i(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],Kn(o));const s=i(t,["mimeType"]);return s!=null&&a(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ho;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ho||(Ho={}));var Bo;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Bo||(Bo={}));var $o;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($o||($o={}));var Ve;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ve||(Ve={}));var Oo;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Oo||(Oo={}));var Jo;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jo||(Jo={}));var zo;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(zo||(zo={}));var Wo;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Wo||(Wo={}));var Yo;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Yo||(Yo={}));var Ko;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Ko||(Ko={}));var Xo;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xo||(Xo={}));var Qo;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qo||(Qo={}));var Zo;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zo||(Zo={}));var jo;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(jo||(jo={}));var es;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(es||(es={}));var ts;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ts||(ts={}));var ns;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ns||(ns={}));var os;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(os||(os={}));var ss;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ss||(ss={}));var $t;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})($t||($t={}));var is;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(is||(is={}));var rs;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rs||(rs={}));var ls;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ls||(ls={}));var Nn;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Nn||(Nn={}));var as;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(as||(as={}));var us;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(us||(us={}));var cs;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(cs||(cs={}));var ds;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ds||(ds={}));var fs;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fs||(fs={}));var ps;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ps||(ps={}));var ms;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ms||(ms={}));var hs;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hs||(hs={}));var gs;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(gs||(gs={}));var ys;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ys||(ys={}));var Es;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Es||(Es={}));var Ts;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ts||(Ts={}));var Cs;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Cs||(Cs={}));var vs;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vs||(vs={}));var _s;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(_s||(_s={}));var Ss;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ss||(Ss={}));var xs;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(xs||(xs={}));var As;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(As||(As={}));var ws;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ws||(ws={}));var Is;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Is||(Is={}));var Rs;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Rs||(Rs={}));var Ns;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ns||(Ns={}));var bs;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bs||(bs={}));var Ps;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ps||(Ps={}));var Ms;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ms||(Ms={}));var ks;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ks||(ks={}));var Ds;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ds||(Ds={}));var Ls;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ls||(Ls={}));var Us;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Us||(Us={}));var Fs;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Fs||(Fs={}));var Vs;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Vs||(Vs={}));var je;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(je||(je={}));class bn{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class gt{get text(){var e,n,o,s,r,l,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,y]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,r,l,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,r,l,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,r,l,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,r,l,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class qs{}class Gs{}class Ou{}class Ju{}class zu{}class Wu{}class Hs{}class Bs{}class $s{}class Yu{}class Ot{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ot;let s;const r=e;return n?s=Mu(r):s=Pu(r),Object.assign(o,s),o}}class Os{}class Js{}class zs{}class Ws{}class Ku{}class Xu{}class Qu{}class Xn{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xn,r=qu(e);return Object.assign(o,r),o}}class Zu{}class ju{}class ec{}class Ys{}class tc{get text(){var e,n,o;let s="",r=!1;const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,s+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,o;let s="";const r=[];for(const l of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&r.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class nc{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Qn{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Qn,r=Ki(e);return Object.assign(o,r),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Xi(t,e){const n=Q(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Qi(t){return Array.isArray(t)?t.map(e=>Jt(e)):[Jt(t)]}function Jt(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Zi(t){const e=Jt(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ji(t){const e=Jt(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ks(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function er(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ks(e)):[Ks(t)]}function Pn(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Xs(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Qs(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pe(t){if(t==null)throw new Error("ContentUnion is required");return Pn(t)?t:{role:"user",parts:er(t)}}function Zn(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=pe(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=pe(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>pe(n)):[pe(e)]}function ve(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Xs(t)||Qs(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pe(t)]}const e=[],n=[],o=Pn(t[0]);for(const s of t){const r=Pn(s);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(Xs(s)||Qs(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:er(n)}),e}function oc(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ve).includes(n[0].toUpperCase())?n[0].toUpperCase():Ve.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Ve).includes(o.toUpperCase())?o.toUpperCase():Ve.TYPE_UNSPECIFIED})}}function tt(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&oc(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ve).includes(u.toUpperCase())?u.toUpperCase():Ve.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=tt(u);else if(o.includes(l)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(tt(c))}e[l]=d}else if(s.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=tt(f);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function jn(t){return tt(t)}function eo(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function to(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function rt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=tt(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=tt(e.response));return t}function lt(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function sc(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Le(t,e){if(typeof e!="string")throw new Error("name must be a string");return sc(t,e,"cachedContents")}function tr(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function qe(t){return Kn(t)}function ic(t){return t!=null&&typeof t=="object"&&"name"in t}function rc(t){return t!=null&&typeof t=="object"&&"video"in t}function lc(t){return t!=null&&typeof t=="object"&&"uri"in t}function nr(t){var e;let n;if(ic(t)&&(n=t.name),!(lc(t)&&(n=t.uri,n===void 0))&&!(rc(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function or(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function sr(t){for(const e of["models","tunedModels","publisherModels"])if(ac(t,e))return t[e];return[]}function ac(t,e){return t!==null&&typeof t=="object"&&e in t}function uc(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function cc(t,e={}){const n=[],o=new Set;for(const s of t){const r=s.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const l=uc(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function ir(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function dc(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rr(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let r=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function at(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function lr(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fc(t){const e={},n=i(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>zc(l))),a(e,["inlinedResponses"],r)}const s=i(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["inlinedEmbedContentResponses"],r)}return e}function pc(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&a(e,["bigqueryUri"],s),e}function mc(t){const e={},n=i(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&a(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function qt(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&a(e,["state"],lr(s));const r=i(t,["metadata","createTime"]);r!=null&&a(e,["createTime"],r);const l=i(t,["metadata","endTime"]);l!=null&&a(e,["endTime"],l);const u=i(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&a(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&a(e,["dest"],fc(rr(c))),e}function Mn(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["displayName"]);o!=null&&a(e,["displayName"],o);const s=i(t,["state"]);s!=null&&a(e,["state"],lr(s));const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["createTime"]);l!=null&&a(e,["createTime"],l);const u=i(t,["startTime"]);u!=null&&a(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&a(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&a(e,["model"],f);const p=i(t,["inputConfig"]);p!=null&&a(e,["src"],hc(p));const m=i(t,["outputConfig"]);m!=null&&a(e,["dest"],pc(rr(m)));const g=i(t,["completionStats"]);return g!=null&&a(e,["completionStats"],g),e}function hc(t){const e={},n=i(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&a(e,["bigqueryUri"],s),e}function gc(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&a(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Jc(t,l))),a(n,["requests","requests"],r)}return n}function yc(t){const e={},n=i(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&a(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ec(t){const e={},n=i(t,["data"]);if(n!=null&&a(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Tc(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],at(t,o)),n}function Cc(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],at(t,o)),n}function vc(t){const e={},n=i(t,["content"]);n!=null&&a(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],_c(o));const s=i(t,["tokenCount"]);s!=null&&a(e,["tokenCount"],s);const r=i(t,["finishReason"]);r!=null&&a(e,["finishReason"],r);const l=i(t,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=i(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const d=i(t,["index"]);d!=null&&a(e,["index"],d);const c=i(t,["logprobsResult"]);c!=null&&a(e,["logprobsResult"],c);const f=i(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["safetyRatings"],m)}const p=i(t,["urlContextMetadata"]);return p!=null&&a(e,["urlContextMetadata"],p),e}function _c(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["citations"],o)}return e}function ar(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>jc(r))),a(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&a(e,["role"],o),e}function Sc(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function xc(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&a(e,["outputConfig"],mc(dc(s))),n}function Zs(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["src"]);s!=null&&a(n,["batch","inputConfig"],gc(t,ir(t,s)));const r=i(e,["config"]);return r!=null&&Sc(r,n),n}function Ac(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["model"],Q(t,o));const s=i(e,["src"]);s!=null&&a(n,["inputConfig"],yc(ir(t,s)));const r=i(e,["config"]);return r!=null&&xc(r,n),n}function wc(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function Ic(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["src"]);s!=null&&a(n,["batch","inputConfig"],Dc(t,s));const r=i(e,["config"]);return r!=null&&wc(r,n),n}function Rc(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],at(t,o)),n}function Nc(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],at(t,o)),n}function bc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&a(e,["name"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);return r!=null&&a(e,["error"],r),e}function Pc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&a(e,["name"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);return r!=null&&a(e,["error"],r),e}function Mc(t,e){const n={},o=i(e,["contents"]);if(o!=null){let r=Zn(t,o);Array.isArray(r)&&(r=r.map(l=>l)),a(n,["requests[]","request","content"],r)}const s=i(e,["config"]);return s!=null&&(a(n,["_self"],kc(s,n)),Nu(n,{"requests[].*":"requests[].request.*"})),n}function kc(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&a(e,["requests[]","title"],s);const r=i(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&a(e,["requests[]","outputDimensionality"],r),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Dc(t,e){const n={},o=i(e,["fileName"]);o!=null&&a(n,["file_name"],o);const s=i(e,["inlinedRequests"]);return s!=null&&a(n,["requests"],Mc(t,s)),n}function Lc(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Uc(t){const e={},n=i(t,["id"]);n!=null&&a(e,["id"],n);const o=i(t,["args"]);o!=null&&a(e,["args"],o);const s=i(t,["name"]);if(s!=null&&a(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Fc(t){const e={},n=i(t,["mode"]);n!=null&&a(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Vc(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&a(n,["systemInstruction"],ar(pe(s)));const r=i(e,["temperature"]);r!=null&&a(o,["temperature"],r);const l=i(e,["topP"]);l!=null&&a(o,["topP"],l);const u=i(e,["topK"]);u!=null&&a(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&a(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&a(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&a(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const y=i(e,["frequencyPenalty"]);y!=null&&a(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&a(o,["seed"],T);const E=i(e,["responseMimeType"]);E!=null&&a(o,["responseMimeType"],E);const _=i(e,["responseSchema"]);_!=null&&a(o,["responseSchema"],jn(_));const x=i(e,["responseJsonSchema"]);if(x!=null&&a(o,["responseJsonSchema"],x),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let U=S;Array.isArray(U)&&(U=U.map(X=>ed(X))),a(n,["safetySettings"],U)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let U=lt(A);Array.isArray(U)&&(U=U.map(X=>nd(rt(X)))),a(n,["tools"],U)}const b=i(e,["toolConfig"]);if(n!==void 0&&b!=null&&a(n,["toolConfig"],td(b)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=i(e,["cachedContent"]);n!==void 0&&V!=null&&a(n,["cachedContent"],Le(t,V));const M=i(e,["responseModalities"]);M!=null&&a(o,["responseModalities"],M);const O=i(e,["mediaResolution"]);O!=null&&a(o,["mediaResolution"],O);const D=i(e,["speechConfig"]);if(D!=null&&a(o,["speechConfig"],eo(D)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=i(e,["thinkingConfig"]);$!=null&&a(o,["thinkingConfig"],$);const N=i(e,["imageConfig"]);N!=null&&a(o,["imageConfig"],Oc(N));const B=i(e,["enableEnhancedCivicAnswers"]);return B!=null&&a(o,["enableEnhancedCivicAnswers"],B),o}function qc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>vc(c))),a(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&a(e,["modelVersion"],s);const r=i(t,["promptFeedback"]);r!=null&&a(e,["promptFeedback"],r);const l=i(t,["responseId"]);l!=null&&a(e,["responseId"],l);const u=i(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Gc(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],at(t,o)),n}function Hc(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],at(t,o)),n}function Bc(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function $c(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Oc(t){const e={},n=i(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Jc(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["request","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let u=ve(s);Array.isArray(u)&&(u=u.map(d=>ar(d))),a(n,["request","contents"],u)}const r=i(e,["metadata"]);r!=null&&a(n,["metadata"],r);const l=i(e,["config"]);return l!=null&&a(n,["request","generationConfig"],Vc(t,l,i(n,["request"],{}))),n}function zc(t){const e={},n=i(t,["response"]);n!=null&&a(e,["response"],qc(n));const o=i(t,["error"]);return o!=null&&a(e,["error"],o),e}function Wc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&a(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Yc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&a(e,["_query","pageToken"],s);const r=i(t,["filter"]);return e!==void 0&&r!=null&&a(e,["_query","filter"],r),n}function Kc(t){const e={},n=i(t,["config"]);return n!=null&&Wc(n,e),e}function Xc(t){const e={},n=i(t,["config"]);return n!=null&&Yc(n,e),e}function Qc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>qt(l))),a(e,["batchJobs"],r)}return e}function Zc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Mn(l))),a(e,["batchJobs"],r)}return e}function jc(t){const e={},n=i(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&a(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&a(e,["fileData"],Lc(r));const l=i(t,["functionCall"]);l!=null&&a(e,["functionCall"],Uc(l));const u=i(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&a(e,["inlineData"],Ec(d));const c=i(t,["text"]);c!=null&&a(e,["text"],c);const f=i(t,["thought"]);f!=null&&a(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function ed(t){const e={},n=i(t,["category"]);if(n!=null&&a(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function td(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Fc(n));const o=i(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function nd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&a(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=i(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Bc(u));const d=i(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],$c(d));const c=i(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ke;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ke||(ke={}));class Xe{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!o||Object.keys(o).length===0?l={config:{}}:typeof o=="object"?l=Object.assign({},o):l=o,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(r=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class od extends De{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xe(ke.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Zs(this.apiClient,e),o=n._url,s=L("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}c.push(p)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const r=this.getGcsUri(e),l=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${s}`;else if(l)o.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ac(this.apiClient,e);return u=L("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Mn(f))}else{const c=Zs(this.apiClient,e);return u=L("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>qt(f))}}async createEmbeddingsInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ic(this.apiClient,e);return r=L("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>qt(d))}}async get(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Hc(this.apiClient,e);return u=L("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Mn(f))}else{const c=Gc(this.apiClient,e);return u=L("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>qt(f))}}async cancel(e){var n,o,s,r;let l="",u={};if(this.apiClient.isVertexAI()){const d=Cc(this.apiClient,e);l=L("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Tc(this.apiClient,e);l=L("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Xc(e);return u=L("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Zc(f),m=new Ys;return Object.assign(m,p),m})}else{const c=Kc(e);return u=L("batches",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Qc(f),m=new Ys;return Object.assign(m,p),m})}}async delete(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Nc(this.apiClient,e);return u=L("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>Pc(f))}else{const c=Rc(this.apiClient,e);return u=L("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>bc(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sd(t){const e={},n=i(t,["data"]);if(n!=null&&a(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function js(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Id(r))),a(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&a(e,["role"],o),e}function id(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&a(e,["expireTime"],s);const r=i(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const l=i(t,["contents"]);if(e!==void 0&&l!=null){let f=ve(l);Array.isArray(f)&&(f=f.map(p=>js(p))),a(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],js(pe(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Nd(p))),a(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&a(e,["toolConfig"],Rd(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rd(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&a(e,["expireTime"],s);const r=i(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const l=i(t,["contents"]);if(e!==void 0&&l!=null){let p=ve(l);Array.isArray(p)&&(p=p.map(m=>m)),a(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],pe(u));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>bd(m))),a(e,["tools"],p)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&a(e,["toolConfig"],c);const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function ld(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["model"],Xi(t,o));const s=i(e,["config"]);return s!=null&&id(s,n),n}function ad(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["model"],Xi(t,o));const s=i(e,["config"]);return s!=null&&rd(s,n),n}function ud(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],Le(t,o)),n}function cd(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],Le(t,o)),n}function dd(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function fd(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function pd(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function md(t){const e={},n=i(t,["id"]);n!=null&&a(e,["id"],n);const o=i(t,["args"]);o!=null&&a(e,["args"],o);const s=i(t,["name"]);if(s!=null&&a(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hd(t){const e={},n=i(t,["mode"]);n!=null&&a(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gd(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&a(e,["description"],n);const o=i(t,["name"]);o!=null&&a(e,["name"],o);const s=i(t,["parameters"]);s!=null&&a(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&a(e,["parametersJsonSchema"],r);const l=i(t,["response"]);l!=null&&a(e,["response"],l);const u=i(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function yd(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],Le(t,o)),n}function Ed(t,e){const n={},o=i(e,["name"]);return o!=null&&a(n,["_url","name"],Le(t,o)),n}function Td(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Cd(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function vd(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&a(e,["_query","pageToken"],s),n}function _d(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&a(e,["_query","pageToken"],s),n}function Sd(t){const e={},n=i(t,["config"]);return n!=null&&vd(n,e),e}function xd(t){const e={},n=i(t,["config"]);return n!=null&&_d(n,e),e}function Ad(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["cachedContents"],r)}return e}function wd(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["cachedContents"],r)}return e}function Id(t){const e={},n=i(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&a(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&a(e,["fileData"],pd(r));const l=i(t,["functionCall"]);l!=null&&a(e,["functionCall"],md(l));const u=i(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&a(e,["inlineData"],sd(d));const c=i(t,["text"]);c!=null&&a(e,["text"],c);const f=i(t,["thought"]);f!=null&&a(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function Rd(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],hd(n));const o=i(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function Nd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&a(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=i(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Td(u));const d=i(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],Cd(d));const c=i(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function bd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>gd(m))),a(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&a(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&a(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=i(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=i(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&a(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Pd(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&a(e,["expireTime"],s),n}function Md(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&a(e,["expireTime"],s),n}function kd(t,e){const n={},o=i(e,["name"]);o!=null&&a(n,["_url","name"],Le(t,o));const s=i(e,["config"]);return s!=null&&Pd(s,n),n}function Dd(t,e){const n={},o=i(e,["name"]);o!=null&&a(n,["_url","name"],Le(t,o));const s=i(e,["config"]);return s!=null&&Md(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ld extends De{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xe(ke.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ad(this.apiClient,e);return u=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const c=ld(this.apiClient,e);return u=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async get(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ed(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const c=yd(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async delete(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=cd(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=fd(f),m=new zs;return Object.assign(m,p),m})}else{const c=ud(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=dd(f),m=new zs;return Object.assign(m,p),m})}}async update(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Dd(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const c=kd(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async listInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=xd(e);return u=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=wd(f),m=new Ws;return Object.assign(m,p),m})}else{const c=Sd(e);return u=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Ad(f),m=new Ws;return Object.assign(m,p),m})}}}function zt(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function ei(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function z(t){return this instanceof z?(this.v=t,this):new z(t)}function xe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(g){return function(y){return Promise.resolve(y).then(g,p)}}function u(g,y){o[g]&&(s[g]=function(T){return new Promise(function(E,_){r.push([g,T,E,_])>1||d(g,T)})},y&&(s[g]=y(s[g])))}function d(g,y){try{c(o[g](y))}catch(T){m(r[0][3],T)}}function c(g){g.value instanceof z?Promise.resolve(g.value.v).then(f,p):m(r[0][2],g)}function f(g){d("next",g)}function p(g){d("throw",g)}function m(g,y){g(y),r.shift(),r.length&&d(r[0][0],r[0][1])}}function Ae(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ei=="function"?ei(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=t[r]&&function(l){return new Promise(function(u,d){l=t[r](l),s(u,d,l.done,l.value)})}}function s(r,l,u,d){Promise.resolve(d).then(function(c){r({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ud(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ur(n)}function ur(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Fd(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ti(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let r=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),r&&!ur(t[o])&&(r=!1),o++;r?e.push(...s):e.pop()}return e}class Vd{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new qd(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qd{constructor(e,n,o,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),Fd(r)}async sendMessage(e){var n;await this.sendPromise;const o=pe(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,l,u;const d=await s,c=(l=(r=d.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=pe(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,o)}getHistory(e=!1){const n=e?ti(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return xe(this,arguments,function*(){var s,r,l,u,d,c;const f=[];try{for(var p=!0,m=Ae(e),g;g=yield z(m.next()),s=g.done,!s;p=!0){u=g.value,p=!1;const y=u;if(Ud(y)){const T=(c=(d=y.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;T!==void 0&&f.push(T)}yield yield z(y)}}catch(y){r={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield z(l.call(m)))}finally{if(r)throw r.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ti(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nn.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gd(t){const e={},n=i(t,["file"]);return n!=null&&a(e,["file"],n),e}function Hd(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Bd(t){const e={},n=i(t,["name"]);return n!=null&&a(e,["_url","file"],nr(n)),e}function $d(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Od(t){const e={},n=i(t,["name"]);return n!=null&&a(e,["_url","file"],nr(n)),e}function Jd(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&a(e,["_query","pageToken"],s),n}function zd(t){const e={},n=i(t,["config"]);return n!=null&&Jd(n,e),e}function Wd(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yd extends De{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xe(ke.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zd(e);return r=L("files",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Wd(d),f=new Zu;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gd(e);return r=L("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Hd(d),f=new ju;return Object.assign(f,c),f})}}async get(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Od(e);return r=L("files/{file}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Bd(e);return r=L("files/{file}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=$d(d),f=new ec;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gt(t){const e={},n=i(t,["data"]);if(n!=null&&a(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Kd(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ff(r))),a(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&a(e,["role"],o),e}function Xd(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Qd(t){const e={},n=i(t,["id"]);n!=null&&a(e,["id"],n);const o=i(t,["args"]);o!=null&&a(e,["args"],o);const s=i(t,["name"]);if(s!=null&&a(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zd(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&a(e,["description"],n);const o=i(t,["name"]);o!=null&&a(e,["name"],o);const s=i(t,["parameters"]);s!=null&&a(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&a(e,["parametersJsonSchema"],r);const l=i(t,["response"]);l!=null&&a(e,["response"],l);const u=i(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function jd(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&a(e,["audioTimestamp"],s);const r=i(t,["candidateCount"]);r!=null&&a(e,["candidateCount"],r);const l=i(t,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=i(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const d=i(t,["logprobs"]);d!=null&&a(e,["logprobs"],d);const c=i(t,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const f=i(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const p=i(t,["presencePenalty"]);p!=null&&a(e,["presencePenalty"],p);const m=i(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const g=i(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const y=i(t,["responseModalities"]);y!=null&&a(e,["responseModalities"],y);const T=i(t,["responseSchema"]);T!=null&&a(e,["responseSchema"],T);const E=i(t,["routingConfig"]);E!=null&&a(e,["routingConfig"],E);const _=i(t,["seed"]);_!=null&&a(e,["seed"],_);const x=i(t,["speechConfig"]);x!=null&&a(e,["speechConfig"],cr(x));const S=i(t,["stopSequences"]);S!=null&&a(e,["stopSequences"],S);const A=i(t,["temperature"]);A!=null&&a(e,["temperature"],A);const b=i(t,["thinkingConfig"]);b!=null&&a(e,["thinkingConfig"],b);const V=i(t,["topK"]);V!=null&&a(e,["topK"],V);const M=i(t,["topP"]);if(M!=null&&a(e,["topP"],M),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ef(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function tf(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function nf(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","temperature"],r);const l=i(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=i(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],to(p));const m=i(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=i(t,["systemInstruction"]);e!==void 0&&y!=null&&a(e,["setup","systemInstruction"],Kd(pe(y)));const T=i(t,["tools"]);if(e!==void 0&&T!=null){let V=lt(T);Array.isArray(V)&&(V=V.map(M=>mf(rt(M)))),a(e,["setup","tools"],V)}const E=i(t,["sessionResumption"]);e!==void 0&&E!=null&&a(e,["setup","sessionResumption"],pf(E));const _=i(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&a(e,["setup","inputAudioTranscription"],_);const x=i(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&a(e,["setup","outputAudioTranscription"],x);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&a(e,["setup","contextWindowCompression"],A);const b=i(t,["proactivity"]);if(e!==void 0&&b!=null&&a(e,["setup","proactivity"],b),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function of(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],jd(o));const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","temperature"],r);const l=i(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=i(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],cr(to(p)));const m=i(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=i(t,["systemInstruction"]);e!==void 0&&y!=null&&a(e,["setup","systemInstruction"],pe(y));const T=i(t,["tools"]);if(e!==void 0&&T!=null){let M=lt(T);Array.isArray(M)&&(M=M.map(O=>hf(rt(O)))),a(e,["setup","tools"],M)}const E=i(t,["sessionResumption"]);e!==void 0&&E!=null&&a(e,["setup","sessionResumption"],E);const _=i(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&a(e,["setup","inputAudioTranscription"],_);const x=i(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&a(e,["setup","outputAudioTranscription"],x);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&a(e,["setup","contextWindowCompression"],A);const b=i(t,["proactivity"]);e!==void 0&&b!=null&&a(e,["setup","proactivity"],b);const V=i(t,["explicitVadSignal"]);return e!==void 0&&V!=null&&a(e,["setup","explicitVadSignal"],V),n}function sf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["setup","model"],Q(t,o));const s=i(e,["config"]);return s!=null&&a(n,["config"],nf(s,n)),n}function rf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["setup","model"],Q(t,o));const s=i(e,["config"]);return s!=null&&a(n,["config"],of(s,n)),n}function lf(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function af(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["weightedPrompts"],o)}return e}function uf(t){const e={},n=i(t,["media"]);if(n!=null){let c=Qi(n);Array.isArray(c)&&(c=c.map(f=>Gt(f))),a(e,["mediaChunks"],c)}const o=i(t,["audio"]);o!=null&&a(e,["audio"],Gt(ji(o)));const s=i(t,["audioStreamEnd"]);s!=null&&a(e,["audioStreamEnd"],s);const r=i(t,["video"]);r!=null&&a(e,["video"],Gt(Zi(r)));const l=i(t,["text"]);l!=null&&a(e,["text"],l);const u=i(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const d=i(t,["activityEnd"]);return d!=null&&a(e,["activityEnd"],d),e}function cf(t){const e={},n=i(t,["media"]);if(n!=null){let c=Qi(n);Array.isArray(c)&&(c=c.map(f=>f)),a(e,["mediaChunks"],c)}const o=i(t,["audio"]);o!=null&&a(e,["audio"],ji(o));const s=i(t,["audioStreamEnd"]);s!=null&&a(e,["audioStreamEnd"],s);const r=i(t,["video"]);r!=null&&a(e,["video"],Zi(r));const l=i(t,["text"]);l!=null&&a(e,["text"],l);const u=i(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const d=i(t,["activityEnd"]);return d!=null&&a(e,["activityEnd"],d),e}function df(t){const e={},n=i(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=i(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const s=i(t,["toolCall"]);s!=null&&a(e,["toolCall"],s);const r=i(t,["toolCallCancellation"]);r!=null&&a(e,["toolCallCancellation"],r);const l=i(t,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],gf(l));const u=i(t,["goAway"]);u!=null&&a(e,["goAway"],u);const d=i(t,["sessionResumptionUpdate"]);d!=null&&a(e,["sessionResumptionUpdate"],d);const c=i(t,["voiceActivityDetectionSignal"]);return c!=null&&a(e,["voiceActivityDetectionSignal"],c),e}function ff(t){const e={},n=i(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&a(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&a(e,["fileData"],Xd(r));const l=i(t,["functionCall"]);l!=null&&a(e,["functionCall"],Qd(l));const u=i(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&a(e,["inlineData"],Gt(d));const c=i(t,["text"]);c!=null&&a(e,["text"],c);const f=i(t,["thought"]);f!=null&&a(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function pf(t){const e={},n=i(t,["handle"]);if(n!=null&&a(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cr(t){const e={},n=i(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const o=i(t,["languageCode"]);if(o!=null&&a(e,["languageCode"],o),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function mf(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&a(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=i(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],ef(u));const d=i(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],tf(d));const c=i(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function hf(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Zd(m))),a(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&a(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&a(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=i(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=i(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&a(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function gf(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&a(e,["responseTokenCount"],s);const r=i(t,["toolUsePromptTokenCount"]);r!=null&&a(e,["toolUsePromptTokenCount"],r);const l=i(t,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);const u=i(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),a(e,["promptTokensDetails"],g)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),a(e,["cacheTokensDetails"],g)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),a(e,["responseTokensDetails"],g)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>y)),a(e,["toolUsePromptTokensDetails"],g)}const m=i(t,["trafficType"]);return m!=null&&a(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yf(t){const e={},n=i(t,["data"]);if(n!=null&&a(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Ef(t){const e={},n=i(t,["content"]);n!=null&&a(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],Tf(o));const s=i(t,["tokenCount"]);s!=null&&a(e,["tokenCount"],s);const r=i(t,["finishReason"]);r!=null&&a(e,["finishReason"],r);const l=i(t,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=i(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const d=i(t,["index"]);d!=null&&a(e,["index"],d);const c=i(t,["logprobsResult"]);c!=null&&a(e,["logprobsResult"],c);const f=i(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["safetyRatings"],m)}const p=i(t,["urlContextMetadata"]);return p!=null&&a(e,["urlContextMetadata"],p),e}function Tf(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["citations"],o)}return e}function Cf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let r=ve(s);Array.isArray(r)&&(r=r.map(l=>l)),a(n,["contents"],r)}return n}function vf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),a(e,["tokensInfo"],s)}return e}function _f(t){const e={},n=i(t,["values"]);n!=null&&a(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&a(e,["statistics"],Sf(o)),e}function Sf(t){const e={},n=i(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function on(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Mp(r))),a(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&a(e,["role"],o),e}function xf(t){const e={},n=i(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function Af(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function wf(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],pe(o));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>hr(u))),a(e,["tools"],l)}const r=i(t,["generationConfig"]);return e!==void 0&&r!=null&&a(e,["generationConfig"],yp(r)),n}function If(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let l=ve(s);Array.isArray(l)&&(l=l.map(u=>on(u))),a(n,["contents"],l)}const r=i(e,["config"]);return r!=null&&Af(r),n}function Rf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let l=ve(s);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["contents"],l)}const r=i(e,["config"]);return r!=null&&wf(r,n),n}function Nf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&a(e,["cachedContentTokenCount"],s),e}function bf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function Pf(t,e){const n={},o=i(e,["model"]);return o!=null&&a(n,["_url","name"],Q(t,o)),n}function Mf(t,e){const n={},o=i(e,["model"]);return o!=null&&a(n,["_url","name"],Q(t,o)),n}function kf(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Df(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Lf(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&a(e,["parameters","negativePrompt"],s);const r=i(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&a(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const g=i(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const y=i(t,["outputMimeType"]);e!==void 0&&y!=null&&a(e,["parameters","outputOptions","mimeType"],y);const T=i(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T);const E=i(t,["addWatermark"]);e!==void 0&&E!=null&&a(e,["parameters","addWatermark"],E);const _=i(t,["labels"]);e!==void 0&&_!=null&&a(e,["labels"],_);const x=i(t,["editMode"]);e!==void 0&&x!=null&&a(e,["parameters","editMode"],x);const S=i(t,["baseSteps"]);return e!==void 0&&S!=null&&a(e,["parameters","editConfig","baseSteps"],S),n}function Uf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["prompt"]);s!=null&&a(n,["instances[0]","prompt"],s);const r=i(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Vp(d))),a(n,["instances[0]","referenceImages"],u)}const l=i(e,["config"]);return l!=null&&Lf(l,n),n}function Ff(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>sn(r))),a(e,["generatedImages"],s)}return e}function Vf(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&a(e,["requests[]","title"],s);const r=i(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&a(e,["requests[]","outputDimensionality"],r),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qf(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&a(e,["instances[]","title"],s);const r=i(t,["outputDimensionality"]);e!==void 0&&r!=null&&a(e,["parameters","outputDimensionality"],r);const l=i(t,["mimeType"]);e!==void 0&&l!=null&&a(e,["instances[]","mimeType"],l);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function Gf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let u=Zn(t,s);Array.isArray(u)&&(u=u.map(d=>d)),a(n,["requests[]","content"],u)}const r=i(e,["config"]);r!=null&&Vf(r,n);const l=i(e,["model"]);return l!==void 0&&a(n,["requests[]","model"],Q(t,l)),n}function Hf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let l=Zn(t,s);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["instances[]","content"],l)}const r=i(e,["config"]);return r!=null&&qf(r,n),n}function Bf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["embeddings"],r)}const s=i(t,["metadata"]);return s!=null&&a(e,["metadata"],s),e}function $f(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>_f(l))),a(e,["embeddings"],r)}const s=i(t,["metadata"]);return s!=null&&a(e,["metadata"],s),e}function Of(t){const e={},n=i(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function Jf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function zf(t){const e={},n=i(t,["id"]);n!=null&&a(e,["id"],n);const o=i(t,["args"]);o!=null&&a(e,["args"],o);const s=i(t,["name"]);if(s!=null&&a(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Wf(t){const e={},n=i(t,["mode"]);n!=null&&a(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&a(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Yf(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&a(e,["description"],n);const o=i(t,["name"]);o!=null&&a(e,["name"],o);const s=i(t,["parameters"]);s!=null&&a(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&a(e,["parametersJsonSchema"],r);const l=i(t,["response"]);l!=null&&a(e,["response"],l);const u=i(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Kf(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&a(n,["systemInstruction"],on(pe(s)));const r=i(e,["temperature"]);r!=null&&a(o,["temperature"],r);const l=i(e,["topP"]);l!=null&&a(o,["topP"],l);const u=i(e,["topK"]);u!=null&&a(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&a(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&a(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&a(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const y=i(e,["frequencyPenalty"]);y!=null&&a(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&a(o,["seed"],T);const E=i(e,["responseMimeType"]);E!=null&&a(o,["responseMimeType"],E);const _=i(e,["responseSchema"]);_!=null&&a(o,["responseSchema"],jn(_));const x=i(e,["responseJsonSchema"]);if(x!=null&&a(o,["responseJsonSchema"],x),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let U=S;Array.isArray(U)&&(U=U.map(X=>qp(X))),a(n,["safetySettings"],U)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let U=lt(A);Array.isArray(U)&&(U=U.map(X=>zp(rt(X)))),a(n,["tools"],U)}const b=i(e,["toolConfig"]);if(n!==void 0&&b!=null&&a(n,["toolConfig"],Jp(b)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=i(e,["cachedContent"]);n!==void 0&&V!=null&&a(n,["cachedContent"],Le(t,V));const M=i(e,["responseModalities"]);M!=null&&a(o,["responseModalities"],M);const O=i(e,["mediaResolution"]);O!=null&&a(o,["mediaResolution"],O);const D=i(e,["speechConfig"]);if(D!=null&&a(o,["speechConfig"],eo(D)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=i(e,["thinkingConfig"]);$!=null&&a(o,["thinkingConfig"],$);const N=i(e,["imageConfig"]);N!=null&&a(o,["imageConfig"],_p(N));const B=i(e,["enableEnhancedCivicAnswers"]);return B!=null&&a(o,["enableEnhancedCivicAnswers"],B),o}function Xf(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&a(n,["systemInstruction"],pe(s));const r=i(e,["temperature"]);r!=null&&a(o,["temperature"],r);const l=i(e,["topP"]);l!=null&&a(o,["topP"],l);const u=i(e,["topK"]);u!=null&&a(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&a(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&a(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&a(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const y=i(e,["frequencyPenalty"]);y!=null&&a(o,["frequencyPenalty"],y);const T=i(e,["seed"]);T!=null&&a(o,["seed"],T);const E=i(e,["responseMimeType"]);E!=null&&a(o,["responseMimeType"],E);const _=i(e,["responseSchema"]);_!=null&&a(o,["responseSchema"],jn(_));const x=i(e,["responseJsonSchema"]);x!=null&&a(o,["responseJsonSchema"],x);const S=i(e,["routingConfig"]);S!=null&&a(o,["routingConfig"],S);const A=i(e,["modelSelectionConfig"]);A!=null&&a(o,["modelConfig"],A);const b=i(e,["safetySettings"]);if(n!==void 0&&b!=null){let R=b;Array.isArray(R)&&(R=R.map(J=>J)),a(n,["safetySettings"],R)}const V=i(e,["tools"]);if(n!==void 0&&V!=null){let R=lt(V);Array.isArray(R)&&(R=R.map(J=>hr(rt(J)))),a(n,["tools"],R)}const M=i(e,["toolConfig"]);n!==void 0&&M!=null&&a(n,["toolConfig"],M);const O=i(e,["labels"]);n!==void 0&&O!=null&&a(n,["labels"],O);const D=i(e,["cachedContent"]);n!==void 0&&D!=null&&a(n,["cachedContent"],Le(t,D));const $=i(e,["responseModalities"]);$!=null&&a(o,["responseModalities"],$);const N=i(e,["mediaResolution"]);N!=null&&a(o,["mediaResolution"],N);const B=i(e,["speechConfig"]);B!=null&&a(o,["speechConfig"],mr(eo(B)));const U=i(e,["audioTimestamp"]);U!=null&&a(o,["audioTimestamp"],U);const X=i(e,["thinkingConfig"]);X!=null&&a(o,["thinkingConfig"],X);const se=i(e,["imageConfig"]);if(se!=null&&a(o,["imageConfig"],Sp(se)),i(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function ni(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let l=ve(s);Array.isArray(l)&&(l=l.map(u=>on(u))),a(n,["contents"],l)}const r=i(e,["config"]);return r!=null&&a(n,["generationConfig"],Kf(t,r,n)),n}function oi(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["contents"]);if(s!=null){let l=ve(s);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["contents"],l)}const r=i(e,["config"]);return r!=null&&a(n,["generationConfig"],Xf(t,r,n)),n}function si(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Ef(c))),a(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&a(e,["modelVersion"],s);const r=i(t,["promptFeedback"]);r!=null&&a(e,["promptFeedback"],r);const l=i(t,["responseId"]);l!=null&&a(e,["responseId"],l);const u=i(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function ii(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),a(e,["candidates"],c)}const s=i(t,["createTime"]);s!=null&&a(e,["createTime"],s);const r=i(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const l=i(t,["promptFeedback"]);l!=null&&a(e,["promptFeedback"],l);const u=i(t,["responseId"]);u!=null&&a(e,["responseId"],u);const d=i(t,["usageMetadata"]);return d!=null&&a(e,["usageMetadata"],d),e}function Qf(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const r=i(t,["guidanceScale"]);if(e!==void 0&&r!=null&&a(e,["parameters","guidanceScale"],r),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&a(e,["parameters","safetySetting"],l);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&a(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&a(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=i(t,["imageSize"]);if(e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Zf(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&a(e,["parameters","negativePrompt"],s);const r=i(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&a(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const g=i(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const y=i(t,["outputMimeType"]);e!==void 0&&y!=null&&a(e,["parameters","outputOptions","mimeType"],y);const T=i(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","compressionQuality"],T);const E=i(t,["addWatermark"]);e!==void 0&&E!=null&&a(e,["parameters","addWatermark"],E);const _=i(t,["labels"]);e!==void 0&&_!=null&&a(e,["labels"],_);const x=i(t,["imageSize"]);e!==void 0&&x!=null&&a(e,["parameters","sampleImageSize"],x);const S=i(t,["enhancePrompt"]);return e!==void 0&&S!=null&&a(e,["parameters","enhancePrompt"],S),n}function jf(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["prompt"]);s!=null&&a(n,["instances[0]","prompt"],s);const r=i(e,["config"]);return r!=null&&Qf(r,n),n}function ep(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["prompt"]);s!=null&&a(n,["instances[0]","prompt"],s);const r=i(e,["config"]);return r!=null&&Zf(r,n),n}function tp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>pp(l))),a(e,["generatedImages"],r)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&a(e,["positivePromptSafetyAttributes"],fr(s)),e}function np(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>sn(l))),a(e,["generatedImages"],r)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&a(e,["positivePromptSafetyAttributes"],pr(s)),e}function op(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=i(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const l=i(t,["resolution"]);e!==void 0&&l!=null&&a(e,["parameters","resolution"],l);const u=i(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=i(t,["negativePrompt"]);e!==void 0&&d!=null&&a(e,["parameters","negativePrompt"],d);const c=i(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&a(e,["parameters","enhancePrompt"],c),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],rn(f));const p=i(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>im(g))),a(e,["instances[0]","referenceImages"],m)}if(i(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function sp(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&a(e,["parameters","storageUri"],s);const r=i(t,["fps"]);e!==void 0&&r!=null&&a(e,["parameters","fps"],r);const l=i(t,["durationSeconds"]);e!==void 0&&l!=null&&a(e,["parameters","durationSeconds"],l);const u=i(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&a(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&a(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&a(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","negativePrompt"],m);const g=i(t,["enhancePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g);const y=i(t,["generateAudio"]);e!==void 0&&y!=null&&a(e,["parameters","generateAudio"],y);const T=i(t,["lastFrame"]);e!==void 0&&T!=null&&a(e,["instances[0]","lastFrame"],Ie(T));const E=i(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(A=>rm(A))),a(e,["instances[0]","referenceImages"],S)}const _=i(t,["mask"]);e!==void 0&&_!=null&&a(e,["instances[0]","mask"],sm(_));const x=i(t,["compressionQuality"]);return e!==void 0&&x!=null&&a(e,["parameters","compressionQuality"],x),n}function ip(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],up(l)),e}function rp(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response"]);return l!=null&&a(e,["response"],cp(l)),e}function lp(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["prompt"]);s!=null&&a(n,["instances[0]","prompt"],s);const r=i(e,["image"]);r!=null&&a(n,["instances[0]","image"],rn(r));const l=i(e,["video"]);l!=null&&a(n,["instances[0]","video"],gr(l));const u=i(e,["source"]);u!=null&&dp(u,n);const d=i(e,["config"]);return d!=null&&op(d,n),n}function ap(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["prompt"]);s!=null&&a(n,["instances[0]","prompt"],s);const r=i(e,["image"]);r!=null&&a(n,["instances[0]","image"],Ie(r));const l=i(e,["video"]);l!=null&&a(n,["instances[0]","video"],yr(l));const u=i(e,["source"]);u!=null&&fp(u,n);const d=i(e,["config"]);return d!=null&&sp(d,n),n}function up(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>hp(l))),a(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&a(e,["raiMediaFilteredReasons"],s),e}function cp(t){const e={},n=i(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>gp(l))),a(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&a(e,["raiMediaFilteredReasons"],s),e}function dp(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&a(e,["instances[0]","image"],rn(s));const r=i(t,["video"]);return e!==void 0&&r!=null&&a(e,["instances[0]","video"],gr(r)),n}function fp(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&a(e,["instances[0]","image"],Ie(s));const r=i(t,["video"]);return e!==void 0&&r!=null&&a(e,["instances[0]","video"],yr(r)),n}function pp(t){const e={},n=i(t,["_self"]);n!=null&&a(e,["image"],xp(n));const o=i(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&a(e,["safetyAttributes"],fr(s)),e}function sn(t){const e={},n=i(t,["_self"]);n!=null&&a(e,["image"],dr(n));const o=i(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&a(e,["safetyAttributes"],pr(s));const r=i(t,["prompt"]);return r!=null&&a(e,["enhancedPrompt"],r),e}function mp(t){const e={},n=i(t,["_self"]);n!=null&&a(e,["mask"],dr(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),a(e,["labels"],s)}return e}function hp(t){const e={},n=i(t,["video"]);return n!=null&&a(e,["video"],nm(n)),e}function gp(t){const e={},n=i(t,["_self"]);return n!=null&&a(e,["video"],om(n)),e}function yp(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&a(e,["audioTimestamp"],s);const r=i(t,["candidateCount"]);r!=null&&a(e,["candidateCount"],r);const l=i(t,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=i(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const d=i(t,["logprobs"]);d!=null&&a(e,["logprobs"],d);const c=i(t,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const f=i(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const p=i(t,["presencePenalty"]);p!=null&&a(e,["presencePenalty"],p);const m=i(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const g=i(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const y=i(t,["responseModalities"]);y!=null&&a(e,["responseModalities"],y);const T=i(t,["responseSchema"]);T!=null&&a(e,["responseSchema"],T);const E=i(t,["routingConfig"]);E!=null&&a(e,["routingConfig"],E);const _=i(t,["seed"]);_!=null&&a(e,["seed"],_);const x=i(t,["speechConfig"]);x!=null&&a(e,["speechConfig"],mr(x));const S=i(t,["stopSequences"]);S!=null&&a(e,["stopSequences"],S);const A=i(t,["temperature"]);A!=null&&a(e,["temperature"],A);const b=i(t,["thinkingConfig"]);b!=null&&a(e,["thinkingConfig"],b);const V=i(t,["topK"]);V!=null&&a(e,["topK"],V);const M=i(t,["topP"]);if(M!=null&&a(e,["topP"],M),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ep(t,e){const n={},o=i(e,["model"]);return o!=null&&a(n,["_url","name"],Q(t,o)),n}function Tp(t,e){const n={},o=i(e,["model"]);return o!=null&&a(n,["_url","name"],Q(t,o)),n}function Cp(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function vp(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function _p(t){const e={},n=i(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Sp(t){const e={},n=i(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=i(t,["imageSize"]);o!=null&&a(e,["imageSize"],o);const s=i(t,["outputMimeType"]);s!=null&&a(e,["imageOutputOptions","mimeType"],s);const r=i(t,["outputCompressionQuality"]);return r!=null&&a(e,["imageOutputOptions","compressionQuality"],r),e}function xp(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],qe(n));const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function dr(t){const e={},n=i(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],qe(o));const s=i(t,["mimeType"]);return s!=null&&a(e,["mimeType"],s),e}function rn(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],qe(n));const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Ie(t){const e={},n=i(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],qe(o));const s=i(t,["mimeType"]);return s!=null&&a(e,["mimeType"],s),e}function Ap(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&a(n,["_query","pageSize"],s);const r=i(e,["pageToken"]);n!==void 0&&r!=null&&a(n,["_query","pageToken"],r);const l=i(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],or(t,u)),o}function wp(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&a(n,["_query","pageSize"],s);const r=i(e,["pageToken"]);n!==void 0&&r!=null&&a(n,["_query","pageToken"],r);const l=i(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],or(t,u)),o}function Ip(t,e){const n={},o=i(e,["config"]);return o!=null&&Ap(t,o,n),n}function Rp(t,e){const n={},o=i(e,["config"]);return o!=null&&wp(t,o,n),n}function Np(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let r=sr(s);Array.isArray(r)&&(r=r.map(l=>kn(l))),a(e,["models"],r)}return e}function bp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let r=sr(s);Array.isArray(r)&&(r=r.map(l=>Dn(l))),a(e,["models"],r)}return e}function Pp(t){const e={},n=i(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&a(e,["dilation"],s),e}function kn(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["displayName"]);o!=null&&a(e,["displayName"],o);const s=i(t,["description"]);s!=null&&a(e,["description"],s);const r=i(t,["version"]);r!=null&&a(e,["version"],r);const l=i(t,["_self"]);l!=null&&a(e,["tunedModelInfo"],Wp(l));const u=i(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&a(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);c!=null&&a(e,["supportedActions"],c);const f=i(t,["temperature"]);f!=null&&a(e,["temperature"],f);const p=i(t,["maxTemperature"]);p!=null&&a(e,["maxTemperature"],p);const m=i(t,["topP"]);m!=null&&a(e,["topP"],m);const g=i(t,["topK"]);g!=null&&a(e,["topK"],g);const y=i(t,["thinking"]);return y!=null&&a(e,["thinking"],y),e}function Dn(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["displayName"]);o!=null&&a(e,["displayName"],o);const s=i(t,["description"]);s!=null&&a(e,["description"],s);const r=i(t,["versionId"]);r!=null&&a(e,["version"],r);const l=i(t,["deployedModels"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>Of(m))),a(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&a(e,["labels"],u);const d=i(t,["_self"]);d!=null&&a(e,["tunedModelInfo"],Yp(d));const c=i(t,["defaultCheckpointId"]);c!=null&&a(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["checkpoints"],p)}return e}function Mp(t){const e={},n=i(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&a(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&a(e,["fileData"],Jf(r));const l=i(t,["functionCall"]);l!=null&&a(e,["functionCall"],zf(l));const u=i(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&a(e,["inlineData"],yf(d));const c=i(t,["text"]);c!=null&&a(e,["text"],c);const f=i(t,["thought"]);f!=null&&a(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function kp(t){const e={},n=i(t,["productImage"]);return n!=null&&a(e,["image"],Ie(n)),e}function Dp(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&a(e,["parameters","baseSteps"],s);const r=i(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const l=i(t,["seed"]);e!==void 0&&l!=null&&a(e,["parameters","seed"],l);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&a(e,["parameters","personGeneration"],d);const c=i(t,["addWatermark"]);e!==void 0&&c!=null&&a(e,["parameters","addWatermark"],c);const f=i(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const p=i(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p);const m=i(t,["enhancePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","enhancePrompt"],m);const g=i(t,["labels"]);return e!==void 0&&g!=null&&a(e,["labels"],g),n}function Lp(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["source"]);s!=null&&Fp(s,n);const r=i(e,["config"]);return r!=null&&Dp(r,n),n}function Up(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>sn(s))),a(e,["generatedImages"],o)}return e}function Fp(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&a(e,["instances[0]","personImage","image"],Ie(s));const r=i(t,["productImages"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>kp(u))),a(e,["instances[0]","productImages"],l)}return n}function Vp(t){const e={},n=i(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],Ie(n));const o=i(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&a(e,["referenceType"],s);const r=i(t,["maskImageConfig"]);r!=null&&a(e,["maskImageConfig"],Pp(r));const l=i(t,["controlImageConfig"]);l!=null&&a(e,["controlImageConfig"],xf(l));const u=i(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const d=i(t,["subjectImageConfig"]);return d!=null&&a(e,["subjectImageConfig"],d),e}function fr(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&a(e,["contentType"],s),e}function pr(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&a(e,["contentType"],s),e}function qp(t){const e={},n=i(t,["category"]);if(n!=null&&a(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function Gp(t){const e={},n=i(t,["image"]);return n!=null&&a(e,["image"],Ie(n)),e}function Hp(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&a(e,["parameters","maxPredictions"],s);const r=i(t,["confidenceThreshold"]);e!==void 0&&r!=null&&a(e,["parameters","confidenceThreshold"],r);const l=i(t,["maskDilation"]);e!==void 0&&l!=null&&a(e,["parameters","maskDilation"],l);const u=i(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const d=i(t,["labels"]);return e!==void 0&&d!=null&&a(e,["labels"],d),n}function Bp(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["source"]);s!=null&&Op(s,n);const r=i(e,["config"]);return r!=null&&Hp(r,n),n}function $p(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>mp(s))),a(e,["generatedMasks"],o)}return e}function Op(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&a(e,["instances[0]","image"],Ie(s));const r=i(t,["scribbleImage"]);return e!==void 0&&r!=null&&a(e,["instances[0]","scribble"],Gp(r)),n}function mr(t){const e={},n=i(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const o=i(t,["languageCode"]);if(o!=null&&a(e,["languageCode"],o),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Jp(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Wf(n));const o=i(t,["retrievalConfig"]);return o!=null&&a(e,["retrievalConfig"],o),e}function zp(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&a(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=i(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Cp(u));const d=i(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],vp(d));const c=i(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function hr(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Yf(m))),a(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&a(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&a(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=i(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=i(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&a(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Wp(t){const e={},n=i(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&a(e,["updateTime"],s),e}function Yp(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&a(e,["updateTime"],s),e}function Kp(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);const r=i(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&a(e,["defaultCheckpointId"],r),n}function Xp(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);const r=i(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&a(e,["defaultCheckpointId"],r),n}function Qp(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","name"],Q(t,o));const s=i(e,["config"]);return s!=null&&Kp(s,n),n}function Zp(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["config"]);return s!=null&&Xp(s,n),n}function jp(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=i(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const r=i(t,["personGeneration"]);e!==void 0&&r!=null&&a(e,["parameters","personGeneration"],r);const l=i(t,["includeRaiReason"]);e!==void 0&&l!=null&&a(e,["parameters","includeRaiReason"],l);const u=i(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const d=i(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&a(e,["parameters","outputOptions","compressionQuality"],d);const c=i(t,["enhanceInputImage"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=i(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=i(t,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const m=i(t,["numberOfImages"]);e!==void 0&&m!=null&&a(e,["parameters","sampleCount"],m);const g=i(t,["mode"]);return e!==void 0&&g!=null&&a(e,["parameters","mode"],g),n}function em(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["_url","model"],Q(t,o));const s=i(e,["image"]);s!=null&&a(n,["instances[0]","image"],Ie(s));const r=i(e,["upscaleFactor"]);r!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],r);const l=i(e,["config"]);return l!=null&&jp(l,n),n}function tm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>sn(r))),a(e,["generatedImages"],s)}return e}function nm(t){const e={},n=i(t,["uri"]);n!=null&&a(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],qe(o));const s=i(t,["encoding"]);return s!=null&&a(e,["mimeType"],s),e}function om(t){const e={},n=i(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],qe(o));const s=i(t,["mimeType"]);return s!=null&&a(e,["mimeType"],s),e}function sm(t){const e={},n=i(t,["image"]);n!=null&&a(e,["_self"],Ie(n));const o=i(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function im(t){const e={},n=i(t,["image"]);n!=null&&a(e,["image"],rn(n));const o=i(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function rm(t){const e={},n=i(t,["image"]);n!=null&&a(e,["image"],Ie(n));const o=i(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function gr(t){const e={},n=i(t,["uri"]);n!=null&&a(e,["uri"],n);const o=i(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],qe(o));const s=i(t,["mimeType"]);return s!=null&&a(e,["encoding"],s),e}function yr(t){const e={},n=i(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],qe(o));const s=i(t,["mimeType"]);return s!=null&&a(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lm(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["displayName"],o),n}function am(t){const e={},n=i(t,["config"]);return n!=null&&lm(n,e),e}function um(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function cm(t){const e={},n=i(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&um(o,e),e}function dm(t){const e={},n=i(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function fm(t,e){const n={},o=i(t,["customMetadata"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["customMetadata"],r)}const s=i(t,["chunkingConfig"]);return e!==void 0&&s!=null&&a(e,["chunkingConfig"],s),n}function pm(t){const e={},n=i(t,["name"]);n!=null&&a(e,["name"],n);const o=i(t,["metadata"]);o!=null&&a(e,["metadata"],o);const s=i(t,["done"]);s!=null&&a(e,["done"],s);const r=i(t,["error"]);r!=null&&a(e,["error"],r);const l=i(t,["response"]);return l!=null&&a(e,["response"],hm(l)),e}function mm(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=i(t,["fileName"]);o!=null&&a(e,["fileName"],o);const s=i(t,["config"]);return s!=null&&fm(s,e),e}function hm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&a(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&a(e,["documentName"],s),e}function gm(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&a(e,["_query","pageToken"],s),n}function ym(t){const e={},n=i(t,["config"]);return n!=null&&gm(n,e),e}function Em(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["fileSearchStores"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["fileSearchStores"],r)}return e}function Er(t,e){const n={},o=i(t,["mimeType"]);e!==void 0&&o!=null&&a(e,["mimeType"],o);const s=i(t,["displayName"]);e!==void 0&&s!=null&&a(e,["displayName"],s);const r=i(t,["customMetadata"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),a(e,["customMetadata"],u)}const l=i(t,["chunkingConfig"]);return e!==void 0&&l!=null&&a(e,["chunkingConfig"],l),n}function Tm(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=i(t,["config"]);return o!=null&&Er(o,e),e}function Cm(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vm="Content-Type",_m="X-Server-Timeout",Sm="User-Agent",Ln="x-goog-api-client",xm="1.33.0",Am=`google-genai-sdk/${xm}`,wm="v1beta1",Im="v1beta";class Rm{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:wm,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Im,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))s.searchParams.append(l,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,s.toString(),e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?o[s]=Object.assign(Object.assign({},o[s]),r):r!==void 0&&(o[s]=r);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,s.toString(),e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const r=new AbortController,l=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>r.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=l}return n&&n.extraBody!==null&&Nm(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await ri(s),new bn(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await ri(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return xe(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield z(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=r.decode(f,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const T=JSON.parse(JSON.stringify(y.error)),E=T.status,_=T.code,x=`got status: ${E}. ${JSON.stringify(y)}`;if(_>=400&&_<600)throw new nn({message:x,status:_})}}catch(y){if(y.name==="ApiError")throw y}l+=p;let m=-1,g=0;for(;;){m=-1,g=0;for(const E of d){const _=l.indexOf(E);_!==-1&&(m===-1||_<m)&&(m=_,g=E.length)}if(m===-1)break;const y=l.substring(0,m);l=l.substring(m+g);const T=y.trim();if(T.startsWith(u)){const E=T.substring(u.length).trim();try{const _=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield z(new bn(_))}catch(_){throw new Error(`exception parsing stream chunk ${E}. ${_}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Am+" "+this.clientOptions.userAgentExtra;return e[Sm]=n,e[Ln]=n,e[vm]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))o.append(s,r);e.timeout&&e.timeout>0&&o.append(_m,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,l=await r.stat(e);s.sizeBytes=String(l.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d={file:s},c=this.getFileName(e),f=L("upload/v1beta/files",d._url),p=await this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,c,d,n==null?void 0:n.httpOptions);return r.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,o){var s;const r=this.clientOptions.uploader,l=await r.stat(n),u=String(l.size),d=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&Er(o,p);const m=await this.fetchUploadUrl(c,u,d,f,p,o==null?void 0:o.httpOptions);return r.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,r,l){var u;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function ri(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new nn({message:s,status:n}):new Error(s)}}function Nm(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,l){const u=Object.assign({},r);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const c=l[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bm="mcp_used/unknown";let Pm=!1;function Tr(t){for(const e of t)if(Mm(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Pm}function Cr(t){var e;const n=(e=t[Ln])!==null&&e!==void 0?e:"";t[Ln]=(n+` ${bm}`).trimStart()}function Mm(t){return t!==null&&typeof t=="object"&&t instanceof no}function km(t){return xe(this,arguments,function*(n,o=100){let s,r=0;for(;r<o;){const l=yield z(n.listTools({cursor:s}));for(const u of l.tools)yield yield z(u),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class no{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new no(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const r={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,Ae(km(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const p=s;l.push(p);const m=p.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),cc(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const l=await s.callTool({name:o.name,arguments:o.args},void 0,r);n.push({functionResponse:{name:o.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Dm(t,e,n){const o=new nc;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class Lm{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),l=Vm(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(S=>{c=S}),p=e.callbacks,m=function(){c({})},g=this.apiClient,y={onopen:m,onmessage:S=>{Dm(g,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(S){}},T=this.webSocketFactory.create(d,Fm(l),y);T.connect(),await f;const x={setup:{model:Q(this.apiClient,e.model)}};return T.send(JSON.stringify(x)),new Um(T,this.apiClient)}}class Um{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=af(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=lf(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(je.PLAY)}pause(){this.sendPlaybackControl(je.PAUSE)}stop(){this.sendPlaybackControl(je.STOP)}resetContext(){this.sendPlaybackControl(je.RESET_CONTEXT)}close(){this.conn.close()}}function Fm(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Vm(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qm="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Gm(t,e,n){const o=new tc;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const l=df(r);Object.assign(o,l)}else Object.assign(o,r);e(o)}class Hm{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Lm(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,r,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Tr(e.config.tools)&&Cr(p);const m=Jm(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const D=this.apiClient.getApiKey();let $="BidiGenerateContent",N="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",N="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${N}=${D}`}let g=()=>{};const y=new Promise(D=>{g=D}),T=e.callbacks,E=function(){var D;(D=T==null?void 0:T.onopen)===null||D===void 0||D.call(T),g({})},_=this.apiClient,x={onopen:E,onmessage:D=>{Gm(_,T.onmessage,D)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(D){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(D){}},S=this.webSocketFactory.create(f,Om(m),x);S.connect(),await y;let A=Q(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const D=this.apiClient.getProject(),$=this.apiClient.getLocation();A=`projects/${D}/locations/${$}/`+A}let b={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$t.AUDIO]}:e.config.responseModalities=[$t.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],M=[];for(const D of V)if(this.isCallableTool(D)){const $=D;M.push(await $.tool())}else M.push(D);M.length>0&&(e.config.tools=M);const O={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?b=rf(this.apiClient,O):b=sf(this.apiClient,O),delete b.config,S.send(JSON.stringify(b)),new $m(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Bm={turnComplete:!0};class $m{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ve(n.turns),e.isVertexAI()||(o=o.map(s=>on(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(qm)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Bm),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:cf(e)}:n={realtimeInput:uf(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Om(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Jm(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const li=10;function ai(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(nt(l)){s=!0;break}if(!s)return!0;const r=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function nt(t){return"callTool"in t&&typeof t.callTool=="function"}function zm(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>nt(s)))!==null&&o!==void 0?o:!1}function ui(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(nt(o))return;const r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(s)}),n}function ci(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wm extends De{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,r,l,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!zm(n)||ai(n.config))return await this.generateContentInternal(d);const c=ui(n);if(c.length>0){const T=c.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,p;const m=ve(d.contents),g=(r=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:li;let y=0;for(;y<g&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,E=[];for(const _ of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(nt(_)){const S=await _.callTool(f.functionCalls);E.push(...S)}y++,p={role:"user",parts:E},d.contents=ve(d.contents),d.contents.push(T),d.contents.push(p),ci(d.config)&&(m.push(T),m.push(p))}return ci(d.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{var o,s,r,l,u;if(this.maybeMoveToResponseJsonSchem(n),ai(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const d=ui(n);if(d.length>0){const p=d.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(r=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,f=(u=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let r;const l=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=d==null?void 0:d.safetyAttributes:l.push(d);let u;return r?u={generatedImages:l,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((o=l.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Xe(ke.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,r,l,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(r=n.source)===null||r===void 0?void 0:r.video)===null||l===void 0)&&l.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const l=await Promise.all(r.map(async d=>nt(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Tr(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Cr(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const r=new Map;for(const l of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(nt(l)){const u=l,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,u)}}return r}async processAfcStream(e){var n,o,s;const r=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:li;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,p){return xe(this,arguments,function*(){for(var m,g,y,T,E,_;u<r;){l&&(u++,l=!1);const b=yield z(c.processParamsMaybeAddMcpUsage(p)),V=yield z(c.generateContentStreamInternal(b)),M=[],O=[];try{for(var x=!0,S=(g=void 0,Ae(V)),A;A=yield z(S.next()),m=A.done,!m;x=!0){T=A.value,x=!1;const D=T;if(yield yield z(D),D.candidates&&(!((E=D.candidates[0])===null||E===void 0)&&E.content)){O.push(D.candidates[0].content);for(const $ of(_=D.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(u<r&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has($.functionCall.name)){const N=yield z(f.get($.functionCall.name).callTool([$.functionCall]));M.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(D){g={error:D}}finally{try{!x&&!m&&(y=S.return)&&(yield z(y.call(S)))}finally{if(g)throw g.error}}if(M.length>0){l=!0;const D=new gt;D.candidates=[{content:{role:"user",parts:M}}],yield yield z(D);const $=[];$.push(...O),$.push({role:"user",parts:M});const N=ve(p.contents).concat($);p.contents=N}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=oi(this.apiClient,e);return u=L("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=ii(f),m=new gt;return Object.assign(m,p),m})}else{const c=ni(this.apiClient,e);return u=L("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=si(f),m=new gt;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=oi(this.apiClient,e);return u=L("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(p){return xe(this,arguments,function*(){var m,g,y,T;try{for(var E=!0,_=Ae(p),x;x=yield z(_.next()),m=x.done,!m;E=!0){T=x.value,E=!1;const S=T,A=ii(yield z(S.json()));A.sdkHttpResponse={headers:S.headers};const b=new gt;Object.assign(b,A),yield yield z(b)}}catch(S){g={error:S}}finally{try{!E&&!m&&(y=_.return)&&(yield z(y.call(_)))}finally{if(g)throw g.error}}})})}else{const c=ni(this.apiClient,e);return u=L("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(p){return xe(this,arguments,function*(){var m,g,y,T;try{for(var E=!0,_=Ae(p),x;x=yield z(_.next()),m=x.done,!m;E=!0){T=x.value,E=!1;const S=T,A=si(yield z(S.json()));A.sdkHttpResponse={headers:S.headers};const b=new gt;Object.assign(b,A),yield yield z(b)}}catch(S){g={error:S}}finally{try{!E&&!m&&(y=_.return)&&(yield z(y.call(_)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Hf(this.apiClient,e);return u=L("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=$f(f),m=new qs;return Object.assign(m,p),m})}else{const c=Gf(this.apiClient,e);return u=L("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Bf(f),m=new qs;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ep(this.apiClient,e);return u=L("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=np(f),m=new Gs;return Object.assign(m,p),m})}else{const c=jf(this.apiClient,e);return u=L("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=tp(f),m=new Gs;return Object.assign(m,p),m})}}async editImageInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=Uf(this.apiClient,e);return r=L("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ff(d),f=new Ou;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=em(this.apiClient,e);return r=L("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=tm(d),f=new Ju;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=Lp(this.apiClient,e);return r=L("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Up(d),f=new zu;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=Bp(this.apiClient,e);return r=L("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=$p(d),f=new Wu;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Tp(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Dn(f))}else{const c=Ep(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>kn(f))}}async listInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Rp(this.apiClient,e);return u=L("{models_url}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=bp(f),m=new Hs;return Object.assign(m,p),m})}else{const c=Ip(this.apiClient,e);return u=L("{models_url}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Np(f),m=new Hs;return Object.assign(m,p),m})}}async update(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Zp(this.apiClient,e);return u=L("{model}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Dn(f))}else{const c=Qp(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>kn(f))}}async delete(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Mf(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Df(f),m=new Bs;return Object.assign(m,p),m})}else{const c=Pf(this.apiClient,e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=kf(f),m=new Bs;return Object.assign(m,p),m})}}async countTokens(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Rf(this.apiClient,e);return u=L("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=bf(f),m=new $s;return Object.assign(m,p),m})}else{const c=If(this.apiClient,e);return u=L("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=Nf(f),m=new $s;return Object.assign(m,p),m})}}async computeTokens(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=Cf(this.apiClient,e);return r=L("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=vf(d),f=new Yu;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ap(this.apiClient,e);return u=L("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{const p=rp(f),m=new Ot;return Object.assign(m,p),m})}else{const c=lp(this.apiClient,e);return u=L("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=ip(f),m=new Ot;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ym extends De{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Vu(e);return u=L("{operationName}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l}else{const c=Fu(e);return u=L("{operationName}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l}}async fetchPredictVideosOperationInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=bu(e);return r=L("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Km(t){const e={},n=i(t,["data"]);if(n!=null&&a(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Xm(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ih(r))),a(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&a(e,["role"],o),e}function Qm(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&a(n,["expireTime"],s);const r=i(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&a(n,["newSessionExpireTime"],r);const l=i(e,["uses"]);n!==void 0&&l!=null&&a(n,["uses"],l);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],sh(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&a(n,["fieldMask"],d),o}function Zm(t,e){const n={},o=i(e,["config"]);return o!=null&&a(n,["config"],Qm(t,o,n)),n}function jm(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function eh(t){const e={},n=i(t,["id"]);n!=null&&a(e,["id"],n);const o=i(t,["args"]);o!=null&&a(e,["args"],o);const s=i(t,["name"]);if(s!=null&&a(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function th(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function nh(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function oh(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","temperature"],r);const l=i(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=i(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],to(p));const m=i(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=i(t,["systemInstruction"]);e!==void 0&&y!=null&&a(e,["setup","systemInstruction"],Xm(pe(y)));const T=i(t,["tools"]);if(e!==void 0&&T!=null){let V=lt(T);Array.isArray(V)&&(V=V.map(M=>lh(rt(M)))),a(e,["setup","tools"],V)}const E=i(t,["sessionResumption"]);e!==void 0&&E!=null&&a(e,["setup","sessionResumption"],rh(E));const _=i(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&a(e,["setup","inputAudioTranscription"],_);const x=i(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&a(e,["setup","outputAudioTranscription"],x);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&a(e,["setup","realtimeInputConfig"],S);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&a(e,["setup","contextWindowCompression"],A);const b=i(t,["proactivity"]);if(e!==void 0&&b!=null&&a(e,["setup","proactivity"],b),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function sh(t,e){const n={},o=i(e,["model"]);o!=null&&a(n,["setup","model"],Q(t,o));const s=i(e,["config"]);return s!=null&&a(n,["config"],oh(s,n)),n}function ih(t){const e={},n=i(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&a(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&a(e,["fileData"],jm(r));const l=i(t,["functionCall"]);l!=null&&a(e,["functionCall"],eh(l));const u=i(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&a(e,["inlineData"],Km(d));const c=i(t,["text"]);c!=null&&a(e,["text"],c);const f=i(t,["thought"]);f!=null&&a(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const m=i(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function rh(t){const e={},n=i(t,["handle"]);if(n!=null&&a(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lh(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&a(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&a(e,["fileSearch"],r);const l=i(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],th(u));const d=i(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],nh(d));const c=i(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ah(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function uh(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=ah(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];r&&d.push(r),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class ch extends De{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Zm(this.apiClient,e);r=L("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=uh(u,e.config);return s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dh(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function fh(t){const e={},n=i(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&dh(o,e),e}function ph(t){const e={},n=i(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function mh(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&a(e,["_query","pageToken"],s),n}function hh(t){const e={},n=i(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const o=i(t,["config"]);return o!=null&&mh(o,e),e}function gh(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const s=i(t,["documents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),a(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yh extends De{constructor(e){super(),this.apiClient=e,this.list=async n=>new Xe(ke.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ph(e);return r=L("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=fh(e);s=L("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hh(e);return r=L("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=gh(d),f=new Ku;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eh extends De{constructor(e,n=new yh(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Xe(ke.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=am(e);return r=L("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dm(e);return r=L("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cm(e);s=L("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ym(e);return r=L("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Em(d),f=new Xu;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tm(e);return r=L("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Cm(d),f=new Qu;return Object.assign(f,c),f})}}async importFile(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mm(e);return r=L("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=pm(d),f=new Xn;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vr=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return vr=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const Th=()=>vr();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Un(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Fn=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _e extends Error{}class ge extends _e{constructor(e,n,o,s){super(`${ge.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new ln({message:o,cause:Fn(n)});const r=n;return e===400?new Sr(e,r,o,s):e===401?new xr(e,r,o,s):e===403?new Ar(e,r,o,s):e===404?new wr(e,r,o,s):e===409?new Ir(e,r,o,s):e===422?new Rr(e,r,o,s):e===429?new Nr(e,r,o,s):e>=500?new br(e,r,o,s):new ge(e,r,o,s)}}class Vn extends ge{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ln extends ge{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class _r extends ln{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Sr extends ge{}class xr extends ge{}class Ar extends ge{}class wr extends ge{}class Ir extends ge{}class Rr extends ge{}class Nr extends ge{}class br extends ge{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ch=/^[a-z][a-z0-9+.-]*:/i,vh=t=>Ch.test(t);let qn=t=>(qn=Array.isArray,qn(t));const _h=qn;let Sh=_h;const di=Sh;function xh(t){if(!t)return!0;for(const e in t)return!1;return!0}function Ah(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const wh=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _e(`${t} must be an integer`);if(e<0)throw new _e(`${t} must be a positive integer`);return e},Ih=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rh=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ze="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nh(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const bh=()=>{var t,e,n,o,s;const r=Nh();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ze,"X-Stainless-OS":pi(Deno.build.os),"X-Stainless-Arch":fi(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ze,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ze,"X-Stainless-OS":pi((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":fi((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=Ph();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ze,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ze,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ph(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,r=o[2]||0,l=o[3]||0;return{browser:e,version:`${s}.${r}.${l}`}}}return null}const fi=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",pi=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Nt;const Mh=()=>Nt??(Nt=bh());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kh(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Pr(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Dh(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Pr({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Mr(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Lh(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uh=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kr=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tn(t,e,n){return kr(),new File(t,e??"unknown_file",n)}function Fh(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Vh=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dr=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",qh=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Dr(t),Gh=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Hh(t,e,n){if(kr(),t=await t,qh(t))return t instanceof File?t:Tn([await t.arrayBuffer()],t.name);if(Gh(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Tn(await Gn(s),e,n)}const o=await Gn(t);if(e||(e=Fh(t)),!(n!=null&&n.type)){const s=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Tn(o,e,n)}async function Gn(t){var e,n,o,s,r;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(Dr(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(Vh(t))try{for(var u=!0,d=Ae(t),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const f=s;l.push(...await Gn(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Bh(t)}`)}return l}function Bh(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lr{constructor(e){this._client=e}}Lr._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ur(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const mi=Object.freeze(Object.create(null)),$h=(t=Ur)=>function(n,...o){if(n.length===1)return n[0];let s=!1;const r=[],l=n.reduce((f,p,m)=>{var g,y,T;/[?#]/.test(p)&&(s=!0);const E=o[m];let _=(s?encodeURIComponent:t)(""+E);return m!==o.length&&(E==null||typeof E=="object"&&E.toString===((T=Object.getPrototypeOf((y=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:mi))!==null&&y!==void 0?y:mi))===null||T===void 0?void 0:T.toString))&&(_=E+"",r.push({start:f.length+p.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+p+(m===o.length?"":_)},""),u=l.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(u))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((f,p)=>f.start-p.start),r.length>0){let f=0;const p=r.reduce((m,g)=>{const y=" ".repeat(g.start-f),T="^".repeat(g.length);return f=g.start+g.length,m+y+T},"");throw new _e(`Path parameters result in path with invalid segments:
${r.map(m=>m.error).join(`
`)}
${l}
${p}`)}return l},bt=$h(Ur);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fr extends Lr{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,r=zt(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new _e("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new _e("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(bt`/${s}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(bt`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(bt`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const r=n??{},{api_version:l=this._client.apiVersion}=r,u=zt(r,["api_version"]);return this._client.get(bt`/${l}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Fr._key=Object.freeze(["interactions"]);class Vr extends Fr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oh(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let Pt;function oo(t){let e;return(Pt??(e=new globalThis.TextEncoder,Pt=e.encode.bind(e)))(t)}let Mt;function hi(t){let e;return(Mt??(e=new globalThis.TextDecoder,Mt=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class an{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oo(e):e;this.buffer=Oh([this.buffer,n]);const o=[];let s;for(;(s=Jh(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(hi(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=hi(this.buffer.subarray(0,r));o.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}an.NEWLINE_CHARS=new Set([`
`,"\r"]);an.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Jh(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function zh(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wt={off:0,error:200,warn:300,info:400,debug:500},gi=(t,e,n)=>{if(t){if(Ah(Wt,t))return t;he(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wt))}`)}};function yt(){}function kt(t,e,n){return!e||Wt[t]>Wt[n]?yt:e[t].bind(e)}const Wh={error:yt,warn:yt,info:yt,debug:yt};let yi=new WeakMap;function he(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Wh;const s=yi.get(n);if(s&&s[0]===o)return s[1];const r={error:kt("error",n,o),warn:kt("warn",n,o),info:kt("info",n,o),debug:kt("debug",n,o)};return yi.set(n,[o,r]),r}const We=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class et{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const r=o?he(o):console;function l(){return xe(this,arguments,function*(){var d,c,f,p;if(s)throw new _e("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let m=!1;try{try{for(var g=!0,y=Ae(Yh(e,n)),T;T=yield z(y.next()),d=T.done,!d;g=!0){p=T.value,g=!1;const E=p;if(!m)if(E.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield z(JSON.parse(E.data))}catch(_){throw r.error("Could not parse message into JSON:",E.data),r.error("From chunk:",E.raw),_}}}catch(E){c={error:E}}finally{try{!g&&!d&&(f=y.return)&&(yield z(f.call(y)))}finally{if(c)throw c.error}}m=!0}catch(E){if(Un(E))return yield z(void 0);throw E}finally{m||n.abort()}})}return new et(l,n,o)}static fromReadableStream(e,n,o){let s=!1;function r(){return xe(this,arguments,function*(){var d,c,f,p;const m=new an,g=Mr(e);try{for(var y=!0,T=Ae(g),E;E=yield z(T.next()),d=E.done,!d;y=!0){p=E.value,y=!1;const _=p;for(const x of m.decode(_))yield yield z(x)}}catch(_){c={error:_}}finally{try{!y&&!d&&(f=T.return)&&(yield z(f.call(T)))}finally{if(c)throw c.error}}for(const _ of m.flush())yield yield z(_)})}function l(){return xe(this,arguments,function*(){var d,c,f,p;if(s)throw new _e("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let m=!1;try{try{for(var g=!0,y=Ae(r()),T;T=yield z(y.next()),d=T.done,!d;g=!0){p=T.value,g=!1;const E=p;m||E&&(yield yield z(JSON.parse(E)))}}catch(E){c={error:E}}finally{try{!g&&!d&&(f=y.return)&&(yield z(f.call(y)))}finally{if(c)throw c.error}}m=!0}catch(E){if(Un(E))return yield z(void 0);throw E}finally{m||n.abort()}})}return new et(l,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=r=>({next:()=>{if(r.length===0){const l=o.next();e.push(l),n.push(l)}return r.shift()}});return[new et(()=>s(e),this.controller,this.client),new et(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Pr({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:r}=await n.next();if(r)return o.close();const l=oo(JSON.stringify(s)+`
`);o.enqueue(l)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function Yh(t,e){return xe(this,arguments,function*(){var o,s,r,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _e("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _e("Attempted to iterate over a response with no body");const u=new Xh,d=new an,c=Mr(t.body);try{for(var f=!0,p=Ae(Kh(c)),m;m=yield z(p.next()),o=m.done,!o;f=!0){l=m.value,f=!1;const g=l;for(const y of d.decode(g)){const T=u.decode(y);T&&(yield yield z(T))}}}catch(g){s={error:g}}finally{try{!f&&!o&&(r=p.return)&&(yield z(r.call(p)))}finally{if(s)throw s.error}}for(const g of d.flush()){const y=u.decode(g);y&&(yield yield z(y))}})}function Kh(t){return xe(this,arguments,function*(){var n,o,s,r;let l=new Uint8Array;try{for(var u=!0,d=Ae(t),c;c=yield z(d.next()),n=c.done,!n;u=!0){r=c.value,u=!1;const f=r;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?oo(f):f;let m=new Uint8Array(l.length+p.length);m.set(l),m.set(p,l.length),l=m;let g;for(;(g=zh(l))!==-1;)yield yield z(l.slice(0,g)),l=l.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(s=d.return)&&(yield z(s.call(d)))}finally{if(o)throw o.error}}l.length>0&&(yield yield z(l))})}class Xh{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=Qh(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Qh(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Zh(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:r}=e,l=await(async()=>{var u;if(e.options.stream)return he(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):et.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return he(t).debug(`[${o}] response parsed`,We({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-r})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class so extends Promise{constructor(e,n,o=Zh){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new so(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qr=Symbol("brand.privateNullableHeaders");function*jh(t){if(!t)return;if(qr in t){const{values:o,nulls:s}=t;yield*o.entries();for(const r of s)yield[r,null];return}let e=!1,n;t instanceof Headers?n=t.entries():di(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=di(o[1])?o[1]:[o[1]];let l=!1;for(const u of r)u!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const Cn=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[r,l]of jh(o)){const u=r.toLowerCase();s.has(u)||(e.delete(r),s.add(u)),l===null?(e.delete(r),n.add(u)):(e.append(r,l),n.delete(u))}}return{[qr]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vn=t=>{var e,n,o,s,r,l;if(typeof globalThis.process<"u")return(o=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(l=(r=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||r===void 0?void 0:r.call(s,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gr;class un{constructor(e){var n,o,s,r,l,u,d,c=e===void 0?{}:e,{baseURL:f=vn("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=vn("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=c,g=zt(c,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:p,apiVersion:m},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(o=y.timeout)!==null&&o!==void 0?o:un.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const T="warn";this.logLevel=T,this.logLevel=(l=(r=gi(y.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:gi(vn("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:T,this.fetchOptions=y.fetchOptions,this.maxRetries=(u=y.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=y.fetch)!==null&&d!==void 0?d:kh(),this.encoder=Uh,this._options=y,this.apiKey=p,this.apiVersion=m}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return Cn([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new _e(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ze}`}defaultIdempotencyKey(){return`stainless-node-retry-${Th()}`}makeStatusError(e,n,o,s){return ge.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,r=vh(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return xh(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new so(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,r,l;const u=await e,d=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:c,url:f,timeout:p}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:u});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,y=Date.now();if(he(this).debug(`[${m}] sending request`,We({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:c.headers})),!((r=u.signal)===null||r===void 0)&&r.aborted)throw new Vn;const T=new AbortController,E=await this.fetchWithTimeout(f,c,p,T).catch(Fn),_=Date.now();if(E instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new Vn;const A=Un(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return he(this).info(`[${m}] connection ${A?"timed out":"failed"} - ${S}`),he(this).debug(`[${m}] connection ${A?"timed out":"failed"} (${S})`,We({retryOfRequestLogID:o,url:f,durationMs:_-y,message:E.message})),this.retryRequest(u,n,o??m);throw he(this).info(`[${m}] connection ${A?"timed out":"failed"} - error; no more retries left`),he(this).debug(`[${m}] connection ${A?"timed out":"failed"} (error; no more retries left)`,We({retryOfRequestLogID:o,url:f,durationMs:_-y,message:E.message})),A?new _r:new ln({cause:E})}const x=`[${m}${g}] ${c.method} ${f} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${_-y}ms`;if(!E.ok){const S=await this.shouldRetry(E);if(n&&S){const D=`retrying, ${n} attempts remaining`;return await Lh(E.body),he(this).info(`${x} - ${D}`),he(this).debug(`[${m}] response error (${D})`,We({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:_-y})),this.retryRequest(u,n,o??m,E.headers)}const A=S?"error; no more retries left":"error; not retryable";he(this).info(`${x} - ${A}`);const b=await E.text().catch(D=>Fn(D).message),V=Ih(b),M=V?void 0:b;throw he(this).debug(`[${m}] response error (${A})`,We({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,message:M,durationMs:Date.now()-y})),this.makeStatusError(E.status,V,M,E.headers)}return he(this).info(x),he(this).debug(`[${m}] response start`,We({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:_-y})),{response:E,options:u,controller:T,requestLogID:m,retryOfRequestLogID:o,startTime:y}}async fetchWithTimeout(e,n,o,s){const r=n||{},{signal:l,method:u}=r,d=zt(r,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),o),f=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,p=Object.assign(Object.assign(Object.assign({signal:s.signal},f?{duplex:"half"}:{}),{method:"GET"}),d);u&&(p.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var r;let l;const u=s==null?void 0:s.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(l=c)}const d=s==null?void 0:s.get("retry-after");if(d&&!l){const c=parseFloat(d);Number.isNaN(c)?l=Date.parse(d)-Date.now():l=c*1e3}if(!(l&&0<=l&&l<60*1e3)){const c=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Rh(l),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,l=Math.min(.5*Math.pow(2,r),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,r;const l=Object.assign({},e),{method:u,path:d,query:c,defaultBaseURL:f}=l,p=this.buildURL(d,c,f);"timeout"in l&&wh("timeout",l.timeout),l.timeout=(o=l.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:l}),y=await this.buildHeaders({options:e,method:u,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:y},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(r=l.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let r={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const l=Cn([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Mh()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Cn([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Dh(e)}:this.encoder({body:e,headers:o})}}un.DEFAULT_TIMEOUT=6e4;class ae extends un{constructor(){super(...arguments),this.interactions=new Vr(this)}}Gr=ae;ae.GeminiNextGenAPIClient=Gr;ae.GeminiNextGenAPIClientError=_e;ae.APIError=ge;ae.APIConnectionError=ln;ae.APIConnectionTimeoutError=_r;ae.APIUserAbortError=Vn;ae.NotFoundError=wr;ae.ConflictError=Ir;ae.RateLimitError=Nr;ae.BadRequestError=Sr;ae.AuthenticationError=xr;ae.InternalServerError=br;ae.PermissionDeniedError=Ar;ae.UnprocessableEntityError=Rr;ae.toFile=Hh;ae.Interactions=Vr;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eg(t,e){const n={},o=i(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function tg(t,e){const n={},o=i(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function ng(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function og(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function sg(t,e,n){const o={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&a(e,["displayName"],s),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(t,["epochCount"]);e!==void 0&&r!=null&&a(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(t,["learningRateMultiplier"]);if(l!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const d=i(t,["learningRate"]);if(e!==void 0&&d!=null&&a(e,["tuningTask","hyperparameters","learningRate"],d),i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function ig(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec"],Ei(g))}else if(s==="PREFERENCE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec"],Ei(g))}const r=i(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&a(e,["tunedModelDisplayName"],r);const l=i(t,["description"]);e!==void 0&&l!=null&&a(e,["description"],l);let u=i(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=i(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=i(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=i(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(t,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const m=i(t,["beta"]);return e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function rg(t,e){const n={},o=i(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&a(n,["preTunedModel"],s);const r=i(t,["trainingDataset"]);r!=null&&yg(r);const l=i(t,["config"]);return l!=null&&sg(l,n),n}function lg(t,e){const n={},o=i(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&a(n,["preTunedModel"],s);const r=i(t,["trainingDataset"]);r!=null&&Eg(r,n,e);const l=i(t,["config"]);return l!=null&&ig(l,n,e),n}function ag(t,e){const n={},o=i(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function ug(t,e){const n={},o=i(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function cg(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&a(e,["_query","pageSize"],s);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),o}function dg(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&a(e,["_query","pageSize"],s);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),o}function fg(t,e){const n={},o=i(t,["config"]);return o!=null&&cg(o,n),n}function pg(t,e){const n={},o=i(t,["config"]);return o!=null&&dg(o,n),n}function mg(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&a(n,["nextPageToken"],s);const r=i(t,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Hr(u))),a(n,["tuningJobs"],l)}return n}function hg(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&a(n,["nextPageToken"],s);const r=i(t,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Hn(u))),a(n,["tuningJobs"],l)}return n}function gg(t,e){const n={},o=i(t,["name"]);o!=null&&a(n,["model"],o);const s=i(t,["name"]);return s!=null&&a(n,["endpoint"],s),n}function yg(t,e){const n={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),a(n,["examples","examples"],s)}return n}function Eg(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=i(t,["gcsUri"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=i(t,["gcsUri"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let r=i(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=i(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=i(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Hr(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&a(n,["name"],s);const r=i(t,["state"]);r!=null&&a(n,["state"],tr(r));const l=i(t,["createTime"]);l!=null&&a(n,["createTime"],l);const u=i(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const d=i(t,["tuningTask","completeTime"]);d!=null&&a(n,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&a(n,["updateTime"],c);const f=i(t,["description"]);f!=null&&a(n,["description"],f);const p=i(t,["baseModel"]);p!=null&&a(n,["baseModel"],p);const m=i(t,["_self"]);return m!=null&&a(n,["tunedModel"],gg(m)),n}function Hn(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&a(n,["name"],s);const r=i(t,["state"]);r!=null&&a(n,["state"],tr(r));const l=i(t,["createTime"]);l!=null&&a(n,["createTime"],l);const u=i(t,["startTime"]);u!=null&&a(n,["startTime"],u);const d=i(t,["endTime"]);d!=null&&a(n,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&a(n,["updateTime"],c);const f=i(t,["error"]);f!=null&&a(n,["error"],f);const p=i(t,["description"]);p!=null&&a(n,["description"],p);const m=i(t,["baseModel"]);m!=null&&a(n,["baseModel"],m);const g=i(t,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const y=i(t,["preTunedModel"]);y!=null&&a(n,["preTunedModel"],y);const T=i(t,["supervisedTuningSpec"]);T!=null&&a(n,["supervisedTuningSpec"],T);const E=i(t,["preferenceOptimizationSpec"]);E!=null&&a(n,["preferenceOptimizationSpec"],E);const _=i(t,["tuningDataStats"]);_!=null&&a(n,["tuningDataStats"],_);const x=i(t,["encryptionSpec"]);x!=null&&a(n,["encryptionSpec"],x);const S=i(t,["partnerModelTuningSpec"]);S!=null&&a(n,["partnerModelTuningSpec"],S);const A=i(t,["customBaseModel"]);A!=null&&a(n,["customBaseModel"],A);const b=i(t,["experiment"]);b!=null&&a(n,["experiment"],b);const V=i(t,["labels"]);V!=null&&a(n,["labels"],V);const M=i(t,["outputUri"]);M!=null&&a(n,["outputUri"],M);const O=i(t,["pipelineJob"]);O!=null&&a(n,["pipelineJob"],O);const D=i(t,["serviceAccount"]);D!=null&&a(n,["serviceAccount"],D);const $=i(t,["tunedModelDisplayName"]);$!=null&&a(n,["tunedModelDisplayName"],$);const N=i(t,["veoTuningSpec"]);return N!=null&&a(n,["veoTuningSpec"],N),n}function Tg(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&a(n,["name"],s);const r=i(t,["metadata"]);r!=null&&a(n,["metadata"],r);const l=i(t,["done"]);l!=null&&a(n,["done"],l);const u=i(t,["error"]);return u!=null&&a(n,["error"],u),n}function Ei(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return s!=null&&a(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cg extends De{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xe(ke.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),r=await this.tuneMldevInternal(s);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:Nn.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ug(e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>Hn(f))}else{const c=ag(e);return u=L("{name}",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>Hr(f))}}async listInternal(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=pg(e);return u=L("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=hg(f),m=new Os;return Object.assign(m,p),m})}else{const c=fg(e);return u=L("tunedModels",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=mg(f),m=new Os;return Object.assign(m,p),m})}}async cancel(e){var n,o,s,r;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=tg(e);return u=L("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=og(f),m=new Js;return Object.assign(m,p),m})}else{const c=eg(e);return u=L("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),l.then(f=>{const p=ng(f),m=new Js;return Object.assign(m,p),m})}}async tuneInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI()){const u=lg(e,e);return r=L("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Hn(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rg(e);return r=L("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Tg(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vg{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _g=1024*1024*8,Sg=3,xg=1e3,Ag=2,Yt="x-goog-upload-status";async function wg(t,e,n){var o;const s=await Br(t,e,n),r=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Yt])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function Ig(t,e,n){var o;const s=await Br(t,e,n),r=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Yt])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Ki(r),u=new Qn;return Object.assign(u,l),u}async function Br(t,e,n){var o,s;let r=0,l=0,u=new bn(new Response),d="upload";for(r=t.size;l<r;){const c=Math.min(_g,r-l),f=t.slice(l,l+c);l+c>=r&&(d+=", finalize");let p=0,m=xg;for(;p<Sg&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(c)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[Yt]));)p++,await Ng(m),m=m*Ag;if(l+=c,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[Yt])!=="active")break;if(r<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Rg(t){return{size:t.size,type:t.type}}function Ng(t){return new Promise(e=>setTimeout(e,t))}class bg{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wg(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ig(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rg(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pg{create(e,n,o){return new Mg(e,n,o)}}class Mg{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ti="x-goog-api-key";class kg{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ti)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ti,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dg="gl-node/";class Lg{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ae({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Ru(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new kg(this.apiKey);this.apiClient=new Rm({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Dg+"web",uploader:new bg,downloader:new vg}),this.models=new Wm(this.apiClient),this.live=new Hm(this.apiClient,s,new Pg),this.batches=new od(this.apiClient),this.chats=new Vd(this.models,this.apiClient),this.caches=new Ld(this.apiClient),this.files=new Yd(this.apiClient),this.operations=new Ym(this.apiClient),this.authTokens=new ch(this.apiClient),this.tunings=new Cg(this.apiClient),this.fileSearchStores=new Eh(this.apiClient)}}let _n=null;const io="gemini-2.5-flash",ro=t=>{if(!t)throw new Error("API Key missing");return _n||(_n=new Lg({apiKey:t})),_n},$r=async(t,e,n,o)=>{var c,f,p;const s=ro(o),r=t.map(m=>({role:m.role==="user"?"user":"model",parts:[{text:m.text}]})),l=`${n}

Consulta del usuario: ${e}`;let u=0;const d=3;for(;u<d;)try{return(await s.models.generateContent({model:io,contents:[...r,{role:"user",parts:[{text:l}]}]})).text||"Lo siento, no pude obtener una respuesta del modelo."}catch(m){if(console.error("Gemini API Error:",m),(c=m.message)!=null&&c.includes("429")||(f=m.message)!=null&&f.includes("quota")||(p=m.message)!=null&&p.includes("RESOURCE_EXHAUSTED")){const g=Math.pow(2,u)*1e3;console.warn(`Rate limit hit. Retrying in ${g/1e3}s...`),await new Promise(y=>setTimeout(y,g)),u++;continue}throw m}throw new Error("QUOTA_EXCEEDED: El asistente IA está ocupado. Por favor espera 1-2 minutos y vuelve a intentar. 💡 Tip: escribe mensajes más cortos para ahorrar cuota.")},Ug=async(t,e,n,o)=>{var c,f,p;console.log("[generateContract] Starting with:",{loan:t==null?void 0:t.id,client:e==null?void 0:e.name,company:n});const s=ro(o),r=`
      Genera un contrato de préstamo legal y formal en formato texto plano (sin markdown, sin negritas) para la siguiente transacción:
      
      PRESTAMISTA: ${n}
      PRESTATARIO: ${e.name} (Cédula/ID: ${e.idNumber||"N/A"}, Dirección: ${e.address||"N/A"})
      
      DETALLES DEL PRÉSTAMO:
      - Monto Principal: ${t.amount}
      - Tasa de Interés: ${t.rate}%
      - Plazo: ${t.term} ${t.frequency}
      - Fecha de Inicio: ${t.startDate}
      
      El contrato debe incluir cláusulas estándar de:
      1. Reconocimiento de deuda.
      2. Compromiso de pago.
      3. Intereses y mora (si aplica).
      4. Garantías (si aplica, mencionar pagaré notarial).
      5. Jurisdicción legal.
      
      Redacta el contrato de manera profesional, listo para imprimir y firmar.
    `;let l=0;const u=3;for(;l<u;)try{console.log(`[generateContract] Attempt ${l+1}/${u}`);const g=(await s.models.generateContent({model:io,contents:r})).text;return console.log("[generateContract] Success, length:",(g==null?void 0:g.length)||0),g||"Error generando contrato."}catch(m){if(console.error("[generateContract] Error:",m.message||m),(c=m.message)!=null&&c.includes("429")||(f=m.message)!=null&&f.includes("quota")||(p=m.message)!=null&&p.includes("RESOURCE_EXHAUSTED")){const y=Math.pow(2,l)*1e3;console.warn(`[generateContract] Rate limit hit. Retrying in ${y/1e3}s...`),await new Promise(T=>setTimeout(T,y)),l++;continue}const g=new Error("CONTRACT_GENERATION_ERROR: "+(m.message||"Error desconocido"));throw g.status=m.status||500,g}const d=new Error("RATE_LIMIT: El servicio de IA está ocupado. Intenta de nuevo en 1-2 minutos.");throw d.status=429,d},Fg=async(t,e,n,o,s)=>{const r=ro(s),l=(e==null?void 0:e.name)||"CLIENTE",u=(e==null?void 0:e.idNumber)||"N/A",d=(e==null?void 0:e.address)||"N/A",c=!!n,f=c?n.amount:null,p=c?n.rate:null,m=c?n.term:null,g=c?n.frequency:null,y=c?n.startDate:null;let T="",E="";t==="PAGARE_SIMPLE"?(T="PAGARÉ SIMPLE",E=`Redacta un pagaré simple en español, en texto plano, donde ${l} reconoce una deuda con ${o}.
Incluye el monto adeudado (usa ${f??"_____"} si está disponible), plazo y forma de pago (usa ${m??"___"} ${g??"cuotas"} si está disponible), Cédula/ID del deudor (${u}), y espacio para lugar, fecha y firmas.
No uses formato markdown ni encabezados, solo texto continuo con saltos de línea.`):t==="CARTA_COBRO"?(T="CARTA DE COBRO",E=`Redacta una carta de cobro amable pero firme en español para el cliente ${l} (Cédula/ID: ${u}, Dirección: ${d}).
Menciona que tiene cuotas pendientes con la financiera ${o}. Si hay datos de préstamo, puedes mencionar un monto aproximado (usa ${f??"_____"}), sin inventar detalles que no estén en los datos.
Incluye saludo, cuerpo del mensaje y despedida con el nombre de la empresa. Usa solo texto plano.`):t==="OTRO"?(T="DOCUMENTO PERSONALIZADO",E=`Redacta un documento simple en español para uso interno de la financiera ${o} sobre el cliente ${l}.
Incluye un breve resumen del cliente (Cédula/ID: ${u}, Dirección: ${d}) y espacio para notas o condiciones especiales.
Usa texto plano, frases cortas y deja líneas en blanco donde se puedan escribir datos a mano.`):(T="CONTRATO DE PRÉSTAMO (SIMPLE)",E=`Redacta un contrato de préstamo SIMPLE en español, en texto plano, entre ${o} (prestamista) y ${l} (prestatario, Cédula/ID: ${u}, Dirección: ${d}).
Usa como referencia, si existe, estos datos del préstamo: monto ${f??"_____"}, tasa ${p??"___"}%, plazo ${m??"___"} ${g??"cuotas"} y fecha de inicio ${y??"____-__-__"}.
Incluye cláusulas básicas de reconocimiento de deuda, forma de pago, mora e intereses, y espacio para firmas de ambas partes. Solo texto plano con saltos de línea.`);const _=`Eres un asistente legal que redacta documentos simples para una financiera de préstamos.

Tipo de documento a generar: ${T}

Datos del cliente:
- Nombre: ${l}
- Cédula/ID: ${u}
- Dirección: ${d}`,x=c?`

Datos del préstamo relacionados (si aplican):
- Monto: ${f}
- Tasa: ${p}%
- Plazo: ${m} ${g}
- Fecha inicio: ${y}`:"",S=`${_}${x}

Instrucciones específicas:
${E}

Devuelve únicamente el texto del documento listo para imprimir.`;try{return(await r.models.generateContent({model:io,contents:S})).text||"Error generando documento."}catch(A){throw console.error(A),A}},fy=Object.freeze(Object.defineProperty({__proto__:null,generateClientDocument:Fg,generateLoanContract:Ug,sendMessageToAI:$r},Symbol.toStringTag,{value:"Module"})),Vg=t=>{if(!t)return null;const n=t.split(`
`).slice(0,12),o=s=>{const r=s.split("**");return r.length===1?s:r.map((l,u)=>u%2===1&&l?h.jsx("strong",{className:"font-semibold",children:l},`b-${u}`):l)};return n.map((s,r)=>{const l=s.replace(/^\s*[-*]\s+/,"");return h.jsx("p",{className:"text-sm leading-relaxed text-slate-800",children:o(l)},`p-${r}`)})};function qg({chatHistory:t,setChatHistory:e,dbData:n,showToast:o,ownerName:s,companyName:r,notifications:l=[],onCreateNotification:u}){var S;const[d,c]=P.useState(!1),[f,p]=P.useState(""),m=P.useRef(null),g=(S=n==null?void 0:n.systemSettings)==null?void 0:S.companyName,y=r||g||"Presta Pro",T=s||y||"due\0f1o/a";P.useEffect(()=>{var A;(A=m.current)==null||A.scrollIntoView({behavior:"smooth"})},[t]);const _=`Eres la secretaria contable personal del dueño de ${y}.
Tu objetivo es ser breve, directa y conversacional. NO des discursos largos.

Nombre del dueño: ${T}.
Datos actuales del sistema:
${(()=>{var ft,pt;const A=(n==null?void 0:n.clients)||[],b=(n==null?void 0:n.loans)||[],V=(n==null?void 0:n.expenses)||[],M=(n==null?void 0:n.receipts)||[],O=(n==null?void 0:n.employees)||[],D=(n==null?void 0:n.collectors)||[],$=(n==null?void 0:n.routeClosings)||[],N=(n==null?void 0:n.aiMetrics)||null,B=(N==null?void 0:N.clientsCount)??A.length;(N==null?void 0:N.loansCount)??b.length;const U=(N==null?void 0:N.activeLoans)??b.filter(C=>C.status==="ACTIVE").length,X=(N==null?void 0:N.totalLent)??b.reduce((C,I)=>C+parseFloat(I.amount||0),0),se=V.reduce((C,I)=>C+parseFloat(I.amount||0),0),R=(N==null?void 0:N.receiptsCount)??M.length,J=O.length,ue=new Date;ue.setHours(0,0,0,0);const Re=new Date(ue);Re.setDate(Re.getDate()+1);const Ge=M.filter(C=>{const I=new Date(C.date);return I>=ue&&I<Re}),Te=V.filter(C=>{if(!C.date)return!0;const I=new Date(C.date);return I>=ue&&I<Re}),G=Ge.reduce((C,I)=>{const F=parseFloat(I.amount||0)||0,H=parseFloat(I.penaltyAmount||0)||0;return C+F+H},0),He=Ge.reduce((C,I)=>{const F=parseFloat(I.penaltyAmount||0)||0;return C+F},0),Pe=((ft=N==null?void 0:N.today)==null?void 0:ft.totalCollected)??G,Be=((pt=N==null?void 0:N.today)==null?void 0:pt.totalPenalty)??He,_t=Te.reduce((C,I)=>C+(parseFloat(I.amount||0)||0),0),cn=Pe-_t,ut=b.flatMap(C=>(C.schedule||[]).filter(I=>I.status!=="PAID"&&new Date(I.date)<=ue).map(I=>({loanId:C.id,date:I.date,payment:I.payment}))).sort((C,I)=>new Date(C.date)-new Date(I.date)).slice(0,5).map(C=>({loanId:C.loanId.substr(0,6),date:En(C.date),amount:Ce(C.payment)})),dn=ut.length?ut.map(C=>`- ${C.date}: ${C.amount} (Préstamo ${C.loanId})`).join(`
`):"- Ninguno (no hay cobros vencidos o de hoy).",Ue=new Map;Ge.forEach(C=>{var le;const I=A.find(me=>me.id===C.clientId),F=(I==null?void 0:I.collectorId)||"UNASSIGNED",H=F==="UNASSIGNED"?"Sin asignar":((le=D.find(me=>me.id===F))==null?void 0:le.name)||"Sin nombre",Z=parseFloat(C.amount||0)||0,ee=parseFloat(C.penaltyAmount||0)||0,ce=Z+ee;Ue.has(F)||Ue.set(F,{id:F,name:H,totalAmount:0,penaltyAmount:0,receiptsCount:0});const W=Ue.get(F);W.totalAmount+=ce,W.penaltyAmount+=ee,W.receiptsCount+=1});const ct=Array.from(Ue.values()),xt=ct.length?ct.map(C=>`- ${C.name}: ${Ce(C.totalAmount)} (${C.receiptsCount} recibos, Mora: ${Ce(C.penaltyAmount)})`).join(`
`):"- No hay cobros registrados hoy.",dt=M.slice().sort((C,I)=>new Date(I.date)-new Date(C.date)).slice(0,10),At=dt.length?dt.map(C=>{const I=A.find(w=>w.id===C.clientId),F=I&&D.length?D.find(w=>w.id===I.collectorId):null,H=(I==null?void 0:I.name)||"Cliente sin nombre",Z=parseFloat(C.amount||0)||0,ee=parseFloat(C.penaltyAmount||0)||0,ce=Z+ee,W=En(C.date),le=F!=null&&F.name?` • Cobrador: ${F.name}`:"",me=ee>0?` • Mora: ${Ce(ee)}`:"";return`- ${W}: Total ${Ce(ce)} (Cuota: ${Ce(Z)}${me}) • ${H}${le}`}).join(`
`):"- No hay recibos registrados aún.";return`Indicadores financieros actuales (uso interno del asistente):

- Total de clientes: ${B}
- Préstamos activos: ${U}
- Monto total prestado (capital): ${Ce(X)}
- Gastos totales acumulados: ${Ce(se)}
- Recibos de pago registrados (histórico): ${R}
- Empleados registrados: ${J}

Resumen diario de caja (hoy):
- Total cobrado hoy (cuotas + mora): ${Ce(Pe)}
- Mora cobrada hoy: ${Ce(Be)}
- Gastos del día: ${Ce(_t)}
- Balance de caja del día (ingresos - gastos): ${Ce(cn)}

Cobros de hoy por cobrador:
${xt}

Próximos 5 cobros pendientes:
${dn}

Últimos recibos de pago registrados (máx. 10):
${At}

NOTIFICACIONES (${l.length} total, ${l.filter(C=>!C.read).length} sin leer):
`+(l.slice(0,5).length>0?l.slice(0,5).map(C=>{var I;return`- [${C.read?"Leída":"NUEVA"}] ${C.title}: ${(I=C.message)==null?void 0:I.substring(0,50)}...`}).join(`
`):"- No hay notificaciones recientes.")+`

CIERRES DE RUTA (${$.length} total):
`+($.slice(0,3).length>0?$.slice(0,3).map(C=>`- ${En(C.date)}: ${Ce(C.totalAmount)} (${C.receiptsCount} recibos)`).join(`
`):"- No hay cierres registrados.")})()}

REGLAS DE ORO:
1. RESPUESTAS CORTAS: Máximo 2-3 frases por turno. NO bloques de texto grandes.
2. CONVERSACIONAL: Si te piden algo complejo, da un resumen y PREGUNTA "¿Quieres ver el detalle?". Espera a que el usuario responda.
3. DATOS REALES: Usa los números de arriba. Si te preguntan "cuánto presté", responde con el dato exacto de "Monto total prestado".
4. DETALLES A DEMANDA: Solo da listas detalladas si el usuario dice "dame detalles" o "liste los pagos". Si no, da totales generales.
5. NO INVENTES: Si no está en los datos de arriba, di "No veo ese dato aquí".
6. TONO: Amigable, profesional, pero relajado.
7. ENVIAR CORREO: Si el usuario pide explícitamente "envía un correo" o "mándamelo", AÑADE al final de tu respuesta la etiqueta exacta: [[SEND_EMAIL]]. El sistema usará el texto de tu respuesta como cuerpo del correo.
8. AYUDA EXTRA: Si el usuario pregunta "cómo hago algo", "ayuda", "tutorial", "guía" o necesita instrucciones de uso, envíale el link: **renace.tech/PrestApp** - Es una guía interactiva paso a paso.
9. CREAR NOTIFICACIÓN: Si el usuario pide "notifica", "avisa", "envía alerta" o similar, AÑADE al final: [[SEND_NOTIFICATION:Título breve|Mensaje de la notificación]]. El sistema creará la notificación automáticamente.
10. LEER NOTIFICACIONES: Si preguntan por notificaciones, usa los datos de NOTIFICACIONES de arriba para responder.

Ejemplo de interacción ideal:
Usuario: "¿Cómo vamos hoy?"
Tú: "Hola. Hoy se han cobrado [usa el dato Total cobrado hoy de arriba] en total. ¿Te gustaría ver el desglose por cobrador?"
Usuario: "Sí, y envíamelo por correo"
Tú: "Claro, aquí tienes el desglose: Juan cobró $500 y María $200. [[SEND_EMAIL]]"`,x=async A=>{if(A.preventDefault(),!f.trim()||d)return;const b=f.trim();e(V=>[...V,{role:"user",text:b}]),p(""),c(!0);try{const V={}.VITE_GEMINI_API_KEY;if(!V){o("El Asistente AI no está configurado en esta instalación.","error"),c(!1);return}const M=await $r(t,b,_,V);let O=M,D=!1;M.includes("[[SEND_EMAIL]]")&&(O=M.replace("[[SEND_EMAIL]]","").trim(),D=!0),e(N=>[...N,{role:"model",text:O}]),D&&K.post("/notifications/send-report",{reportHtml:O.replace(/\n/g,"<br/>"),subject:`Resumen Asistente - ${new Date().toLocaleDateString()}`}).then(()=>o("📧 Correo enviado exitosamente.","success")).catch(N=>{console.error("Email error:",N),o("❌ Error al enviar el correo.","error")});const $=O.match(/\[\[SEND_NOTIFICATION:([^|]+)\|([^\]]+)\]\]/);if($&&u){const N=$[1].trim(),B=$[2].trim();O=O.replace(/\[\[SEND_NOTIFICATION:[^\]]+\]\]/,"").trim();try{await K.post("/notifications",{title:N,message:B,type:"SYSTEM"}),o("🔔 Notificación creada exitosamente.","success"),u&&u({title:N,message:B,type:"SYSTEM"})}catch(U){console.error("Notification error:",U),o("❌ Error al crear la notificación.","error")}}}catch(V){console.error("Error fetching AI response:",V),o("Error al conectar con el Asistente AI.","error")}finally{c(!1)}};return h.jsxs(uu,{className:"flex flex-col h-full",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[h.jsx(_l,{size:20,className:"text-blue-500"})," Asistente IA"]}),h.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 min-h-0",children:[t.length===0&&h.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl text-sm border border-blue-200 shadow-sm",children:[h.jsxs("p",{className:"font-semibold text-blue-900 mb-1",children:["Hola, soy el Asistente IA de ",y,"."]}),h.jsx("p",{className:"text-blue-800",children:"Puedes preguntarme cosas como:"}),h.jsxs("ul",{className:"mt-2 space-y-1 text-blue-900 list-disc list-inside",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Tus préstamos"})," y cuotas pendientes."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Pagos o cobranzas"})," del día."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Indicadores financieros"})," de la cartera."]})]})]}),t.map((A,b)=>h.jsx("div",{className:`flex ${A.role==="user"?"justify-end":"justify-start"}`,children:h.jsx("div",{className:`max-w-[80%] px-4 py-3 rounded-2xl shadow-sm border text-sm space-y-1 ${A.role==="user"?"bg-blue-600 text-white border-blue-500 rounded-br-none":"bg-slate-50 text-slate-900 border-slate-200 rounded-tl-none"}`,children:A.role==="model"?Vg(A.text):h.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:A.text})})},b)),d&&h.jsx("div",{className:"flex justify-start",children:h.jsx("div",{className:"px-4 py-3 bg-slate-100 text-slate-800 rounded-2xl rounded-tl-none shadow-sm border border-slate-200",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-bounce",style:{animationDelay:"0s"}}),h.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-400 animate-bounce",style:{animationDelay:"0.15s"}}),h.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-300 animate-bounce",style:{animationDelay:"0.3s"}})]})})}),h.jsx("div",{ref:m})]}),h.jsxs("form",{onSubmit:x,className:"mt-4 flex gap-2 pt-4 border-t border-slate-100 dark:border-slate-700",children:[h.jsx("input",{type:"text",value:f,onChange:A=>p(A.target.value),placeholder:"Escribe tu consulta...",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 rounded-xl bg-slate-50 dark:bg-slate-900/50 text-slate-800 dark:text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:d}),h.jsx("button",{type:"submit",className:`bg-blue-600 text-white p-3 rounded-xl transition-colors ${d?"opacity-60 cursor-not-allowed":"hover:bg-blue-700"}`,disabled:d,children:h.jsx(El,{size:20})})]})]})}function Gg({chatHistory:t,setChatHistory:e,dbData:n,showToast:o,ownerName:s,companyName:r}){const[l,u]=P.useState(!1),[d,c]=P.useState({x:16,y:96}),[f,p]=P.useState(!1),m=P.useRef(null),g=P.useRef(!1),y=(x,S)=>{p(!0),g.current=!1,m.current={startX:x,startY:S,startPos:d}},T=x=>{const S=x.touches?x.touches[0]:x;y(S.clientX,S.clientY)},E=x=>{const S=m.current;if(!S)return;const A=x.touches?x.touches[0]:x,b=A.clientX-S.startX,V=A.clientY-S.startY;(Math.abs(b)>3||Math.abs(V)>3)&&(g.current=!0);const M=12,O=64,D=Math.max(M,window.innerWidth-O-M),$=Math.max(M,window.innerHeight-O-M),N=Math.min(Math.max(S.startPos.x-b,M),D),B=Math.min(Math.max(S.startPos.y-V,M),$);c({x:N,y:B})};P.useEffect(()=>{if(!f)return;const x=A=>{A.preventDefault(),E(A)},S=()=>{p(!1),setTimeout(()=>{g.current=!1},0)};return window.addEventListener("mousemove",x,{passive:!1}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("mouseup",S),window.addEventListener("touchend",S),window.addEventListener("touchcancel",S),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",x),window.removeEventListener("mouseup",S),window.removeEventListener("touchend",S),window.removeEventListener("touchcancel",S)}},[f]);const _=()=>{if(g.current){g.current=!1;return}u(x=>!x)};return h.jsxs("div",{className:"fixed z-[100] flex flex-col items-end gap-3 pointer-events-none",style:{right:d.x,bottom:d.y},children:[l&&h.jsxs("div",{className:"pointer-events-auto w-[360px] max-w-[90vw] h-[520px] max-h-[80vh] rounded-2xl shadow-2xl border border-slate-800/70 bg-slate-950/95 backdrop-blur-2xl flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-800 bg-slate-950/95",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center text-white shadow-md",children:h.jsx(mo,{size:18})}),h.jsxs("div",{className:"flex flex-col leading-tight",children:[h.jsx("span",{className:"text-xs font-semibold text-slate-50",children:"Asistente IA"}),h.jsxs("span",{className:"text-[11px] text-slate-400",children:["Bot contable de ",r||"tu financiera"]})]})]}),h.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-100 transition-colors",children:h.jsx(xi,{size:16})})]}),h.jsx("div",{className:"flex-1 bg-slate-950/60 p-2",children:h.jsx(qg,{chatHistory:t,setChatHistory:e,dbData:n,showToast:o,ownerName:s,companyName:r})})]}),h.jsxs("button",{type:"button",onMouseDown:T,onTouchStart:T,onClick:_,className:"pointer-events-auto w-16 h-16 rounded-full bg-gradient-to-tr from-violet-600 via-indigo-600 to-blue-500 shadow-2xl shadow-indigo-500/50 flex items-center justify-center text-white border-2 border-white/20 hover:scale-110 active:scale-95 transition-all duration-300 touch-none relative group overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),h.jsx(mo,{size:28,className:"drop-shadow-md"}),h.jsxs("span",{className:"absolute -top-1 -right-1 flex h-5 w-5",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-sky-500 border-2 border-white dark:border-slate-900"})]})]})]})}class Et extends Error{}Et.prototype.name="InvalidTokenError";function Hg(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let o=n.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function Bg(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Hg(e)}catch{return atob(e)}}function $g(t,e){if(typeof t!="string")throw new Et("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,o=t.split(".")[n];if(typeof o!="string")throw new Et(`Invalid token specified: missing part #${n+1}`);let s;try{s=Bg(o)}catch(r){throw new Et(`Invalid token specified: invalid base64 for part #${n+1} (${r.message})`)}try{return JSON.parse(s)}catch(r){throw new Et(`Invalid token specified: invalid json for part #${n+1} (${r.message})`)}}function Og({onLogin:t}){const[e,n]=P.useState(!1),[o,s]=P.useState(!1),[r,l]=P.useState({username:"",password:""}),[u,d]=P.useState({companyName:"",name:"",email:"",password:""}),[c,f]=P.useState(""),[p,m]=P.useState(""),[g,y]=P.useState(!1),[T,E]=P.useState(""),[_,x]=P.useState(""),[S,A]=P.useState(!1),[b,V]=P.useState(!1),M=async N=>{N.preventDefault(),s(!0),f("");try{const B=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.username,password:r.password})}),U=await B.json();B.ok&&U.token?t({name:U.user.name,email:U.user.email,token:U.token,role:U.user.role,tenantId:U.tenant.id}):U.accountExpired?(y(!0),E(U.email),x(U.tenantName||"tu empresa"),f(""),s(!1)):(f(U.error||"Credenciales inválidas"),s(!1))}catch(B){console.error("Login error:",B),f("Error de conexión con el servidor. Verifica que esté ejecutando."),s(!1)}},O=async()=>{A(!0),f(""),V(!1);try{const N=await fetch("/api/tenants/resend-verification-public",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:T})}),B=await N.json();N.ok&&B.success?(V(!0),m("¡Correo enviado! Revisa tu bandeja de entrada para activar tu cuenta.")):f(B.error||"Error al enviar el correo de verificación")}catch(N){console.error("Resend verification error:",N),f("Error de conexión con el servidor.")}finally{A(!1)}},D=async N=>{N.preventDefault(),s(!0),f(""),m("");try{const B=u.companyName.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),U={tenantName:u.companyName,tenantSlug:B,adminEmail:u.email,adminPassword:u.password},X=await fetch("/api/tenants/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)}),se=await X.json();X.ok&&se.success?(m("¡Cuenta creada con éxito! Revisa tu correo para verificar la cuenta."),setTimeout(()=>{n(!1),l({username:u.email,password:u.password}),m("")},3e3)):f(se.error||"Error al crear la cuenta. Intente nuevamente.")}catch(B){console.error(B),f("Error de conexión con el servidor.")}finally{s(!1)}},$=async N=>{try{if(e){const B=$g(N.credential);d(U=>({...U,name:B.name,email:B.email,companyName:U.companyName||`${B.given_name||"My"} Company`})),m("Datos de Google cargados. Por favor ingresa el nombre de tu empresa y una contraseña.")}else{s(!0),f("");const B=await fetch("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:N.credential})}),U=await B.json();B.ok&&U.token?t({name:U.user.name,email:U.user.email,token:U.token,role:U.user.role,tenantId:U.tenant.id,photoUrl:U.user.photoUrl}):U.accountExpired?(y(!0),E(U.email),x(U.tenantName||"tu empresa"),f(""),s(!1)):(f(U.error||"Error al autenticar con Google"),s(!1))}}catch(B){console.error("Google Auth Error",B),f("Error al procesar autenticación de Google"),s(!1)}};return h.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex items-center justify-center bg-slate-900 relative overflow-hidden font-sans p-4",children:[h.jsxs("div",{className:"absolute inset-0 z-0",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-indigo-900 via-slate-900 to-black opacity-80"}),h.jsx("div",{className:"absolute -top-20 -left-20 w-64 md:w-96 h-64 md:h-96 bg-blue-600 rounded-full blur-[100px] opacity-20 animate-pulse"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-72 md:w-[500px] h-72 md:h-[500px] bg-indigo-600 rounded-full blur-[120px] opacity-20"})]}),h.jsx("div",{className:"relative z-10 w-full max-w-sm md:max-w-md flex flex-col justify-center",children:h.jsxs("div",{className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-4 md:p-8 transform transition-all duration-500 hover:shadow-indigo-500/20",children:[h.jsxs("div",{className:"flex flex-col items-center mb-0 md:mb-6 text-center",children:[h.jsx("img",{src:Yi,alt:"RenKredit",className:"w-32 h-32 md:w-52 md:h-52 object-contain drop-shadow-2xl mb-0 hover:scale-105 transition-transform"}),h.jsx("h1",{className:"text-xl md:text-3xl font-bold text-white tracking-tight leading-none -mt-4 relative z-10",children:"RenKredit"}),h.jsx("p",{className:"text-blue-200 text-[10px] md:text-base mt-1 md:mt-1 font-light leading-tight",children:"Gestión Inteligente de Préstamos"})]}),p&&h.jsxs("div",{className:"p-3 mb-4 rounded-lg bg-emerald-500/20 border border-emerald-500/30 text-emerald-200 text-sm text-center flex items-center justify-center gap-2 animate-pulse",children:[h.jsx(fl,{size:16})," ",p]}),g?h.jsx("div",{className:"space-y-4 animate-fade-in",children:h.jsxs("div",{className:"p-4 rounded-xl bg-amber-500/20 border border-amber-500/30 text-center",children:[h.jsxs("p",{className:"text-slate-200 text-sm",children:["Cuenta expirada. "," ",b?h.jsxs("span",{className:"text-emerald-400 font-medium",children:["✓ Correo enviado a ",T]}):h.jsx("button",{type:"button",onClick:O,disabled:S,className:"text-amber-400 hover:text-amber-300 underline font-medium transition-colors",children:S?"Enviando...":"Reenviar verificación"})]}),c&&h.jsx("p",{className:"text-red-300 text-xs mt-2",children:c})]})}):e?h.jsxs("div",{className:"space-y-4 animate-fade-in",children:[h.jsxs("form",{onSubmit:D,className:"space-y-4",children:[h.jsx("h3",{className:"text-white text-lg font-semibold text-center mb-2",children:"Crear Nueva Cuenta"}),h.jsx("div",{className:"flex justify-center mb-4",children:h.jsx(co,{onSuccess:$,onError:()=>f("Error al conectar con Google"),theme:"filled_black",shape:"pill",size:"large",text:"signup_with",width:"300"})}),h.jsx("div",{className:"relative flex justify-center text-sm mb-4",children:h.jsx("span",{className:"px-2 bg-transparent text-slate-400 bg-slate-900/0 backdrop-blur-sm",children:"O ingresa tus datos manual"})}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:h.jsx(cl,{size:18})}),h.jsx("input",{type:"text",placeholder:"Nombre de la Empresa",required:!0,className:"w-full pl-10 pr-4 py-2.5 md:py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",value:u.companyName,onChange:N=>d({...u,companyName:N.target.value})})]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:h.jsx(vo,{size:18})}),h.jsx("input",{type:"text",placeholder:"Tu Nombre Completo",required:!0,className:"w-full pl-10 pr-4 py-2.5 md:py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",value:u.name,onChange:N=>d({...u,name:N.target.value})})]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:h.jsx(Eo,{size:18})}),h.jsx("input",{type:"email",placeholder:"Correo Electrónico",required:!0,className:"w-full pl-10 pr-4 py-2.5 md:py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",value:u.email,onChange:N=>d({...u,email:N.target.value})})]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:h.jsx(yo,{size:18})}),h.jsx("input",{type:"password",placeholder:"Contraseña",required:!0,minLength:6,className:"w-full pl-10 pr-4 py-2 md:py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-sm",value:u.password,onChange:N=>d({...u,password:N.target.value})})]}),c&&h.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 border border-red-500/30 text-red-200 text-sm text-center",children:c}),h.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl shadow-lg transition-all transform hover:-translate-y-0.5 disabled:opacity-70",children:o?"Registrando...":"Terminar Registro"})]}),h.jsx("div",{className:"text-center pt-2",children:h.jsx("button",{type:"button",onClick:()=>n(!1),className:"text-slate-400 hover:text-white text-sm transition-colors border-b border-transparent hover:border-slate-400 pb-0.5",children:"¿Ya tienes cuenta? Inicia Sesión"})})]}):h.jsxs("div",{className:"space-y-4 animate-fade-in",children:[h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsx("div",{children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:h.jsx(vo,{size:18})}),h.jsx("input",{type:"text",placeholder:"Usuario o Email",className:"w-full pl-10 pr-4 py-2 md:py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:r.username,onChange:N=>l({...r,username:N.target.value})})]})}),h.jsx("div",{children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:h.jsx(yo,{size:18})}),h.jsx("input",{type:"password",placeholder:"Contraseña",className:"w-full pl-10 pr-4 py-2 md:py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",value:r.password,onChange:N=>l({...r,password:N.target.value})})]})}),c&&h.jsx("div",{className:"p-3 rounded-lg bg-red-500/20 border border-red-500/30 text-red-200 text-sm text-center",children:c}),h.jsx("button",{type:"submit",disabled:o,className:"w-full py-2.5 md:py-3.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-xl shadow-lg hover:shadow-blue-500/25 transition-all transform hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-70 disabled:cursor-not-allowed",children:o?h.jsxs("span",{className:"flex items-center justify-center gap-2",children:[h.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Conectando..."]}):"Iniciar Sesión"})]}),h.jsxs("div",{className:"mt-8",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-slate-700"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-transparent text-slate-400 bg-slate-900/0 backdrop-blur-sm",children:"O continúa con"})})]}),h.jsx("div",{className:"mt-6 flex justify-center",children:h.jsx(co,{onSuccess:$,onError:()=>f("Error al conectar con Google"),theme:"filled_black",shape:"pill",size:"large",text:"continue_with",width:"300"})})]}),h.jsxs("div",{className:"text-center pt-4 border-t border-slate-800 mt-4",children:[h.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"¿Nuevo en RenKredit?"}),h.jsx("button",{type:"button",onClick:()=>n(!0),className:"w-full py-2.5 text-white font-medium bg-slate-800 hover:bg-slate-700 rounded-xl transition-colors border border-slate-700",children:"Crear Cuenta Gratis"})]})]}),h.jsxs("div",{className:"mt-4 md:mt-8 text-center space-y-2 md:space-y-3",children:[h.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-3 md:p-4 border border-slate-700",children:[h.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"¿Problemas para acceder?"}),h.jsxs("div",{className:"flex items-center justify-center gap-3 md:gap-4 flex-wrap",children:[h.jsxs("a",{href:"mailto:info@renace.tech",className:"flex items-center gap-1.5 text-xs md:text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[h.jsx(Eo,{size:14}),h.jsx("span",{className:"hidden sm:inline",children:"info@renace.tech"}),h.jsx("span",{className:"sm:hidden",children:"Email"})]}),h.jsxs("a",{href:"https://wa.me/84994577463",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-xs md:text-sm text-emerald-400 hover:text-emerald-300 transition-colors",children:[h.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),h.jsx("span",{children:"WhatsApp"})]})]})]}),h.jsxs("p",{className:"text-[10px] md:text-xs text-slate-500",children:["© ",new Date().getFullYear()," Renace Tech"]})]})]})})]})}const Ci=te.lazy(()=>oe(()=>import("./index-19cfa5f0.js"),["./index-19cfa5f0.js","./vendor-8a332d8f.js","./crown-11975964.js","./trending-down-36e32bc6.js","./trending-up-aed1c674.js","./clock-0f83d6c6.js","./alert-triangle-f3e24c64.js","./calendar-da7962d8.js"],import.meta.url).then(t=>({default:t.DashboardView}))),Jg=te.lazy(()=>oe(()=>import("./index-467e2c54.js").then(t=>t.i),["./index-467e2c54.js","./vendor-8a332d8f.js","./bar-chart-3-d18468b2.js","./filter-ac94b5de.js","./file-spreadsheet-00869b6b.js","./printer-82ab4f0e.js","./search-001f2433.js","./alert-triangle-f3e24c64.js","./clock-0f83d6c6.js","./dollar-sign-e74c04f1.js","./trending-up-aed1c674.js","./trending-down-36e32bc6.js","./download-ccc94549.js"],import.meta.url).then(t=>({default:t.CuadreView}))),zg=te.lazy(()=>oe(()=>import("./index-a1f18291.js"),["./index-a1f18291.js","./vendor-8a332d8f.js","./file-spreadsheet-00869b6b.js","./upload-5b885fb0.js","./plus-968e5801.js","./search-001f2433.js","./arrow-up-down-59719749.js","./phone-69323ed2.js","./calendar-da7962d8.js","./alert-triangle-f3e24c64.js","./star-7ffeefff.js"],import.meta.url).then(t=>({default:t.ClientsView}))),Wg=te.lazy(()=>oe(()=>import("./index-7de6e91d.js"),["./index-7de6e91d.js","./vendor-8a332d8f.js","./Badge-2d4e4979.js","./amortization-62a7b0b1.js","./PaymentConfirmationModal-888311d5.js","./printUtils-04a0a819.js","./printer-82ab4f0e.js","./banknote-5ac92043.js","./plus-968e5801.js","./trending-up-aed1c674.js","./clock-0f83d6c6.js","./calendar-da7962d8.js","./x-circle-177d4c0c.js","./trash-2-8bdf2c52.js","./refresh-cw-25914484.js","./sticky-note-bd8db19a.js"],import.meta.url).then(t=>({default:t.LoansView}))),Yg=te.lazy(()=>oe(()=>import("./index-261c7076.js"),["./index-261c7076.js","./vendor-8a332d8f.js","./download-ccc94549.js","./trending-up-aed1c674.js","./filter-ac94b5de.js","./bar-chart-3-d18468b2.js","./search-001f2433.js","./calendar-da7962d8.js","./plus-circle-bec9c90c.js","./upload-5b885fb0.js","./refresh-cw-25914484.js","./trash-2-8bdf2c52.js"],import.meta.url).then(t=>({default:t.ExpensesView}))),Kg=te.lazy(()=>oe(()=>import("./index-68f4045d.js"),["./index-68f4045d.js","./vendor-8a332d8f.js","./plus-circle-bec9c90c.js","./clock-0f83d6c6.js","./x-circle-177d4c0c.js","./filter-ac94b5de.js","./calendar-da7962d8.js","./sticky-note-bd8db19a.js"],import.meta.url).then(t=>({default:t.RequestsView}))),Xg=te.lazy(()=>oe(()=>import("./index-da5340b1.js"),["./index-da5340b1.js","./vendor-8a332d8f.js","./DigitalReceipt-c3acdccc.js","./html2canvas.esm-e0a7d97b.js","./printUtils-04a0a819.js","./PaymentConfirmationModal-888311d5.js","./printer-82ab4f0e.js","./trending-up-aed1c674.js","./filter-ac94b5de.js","./arrow-up-down-59719749.js","./search-001f2433.js","./plus-circle-bec9c90c.js","./sticky-note-bd8db19a.js","./phone-69323ed2.js","./clock-0f83d6c6.js","./x-circle-177d4c0c.js","./alert-triangle-f3e24c64.js"],import.meta.url).then(t=>({default:t.RoutesView}))),Qg=te.lazy(()=>oe(()=>import("./index-298c3d55.js"),["./index-298c3d55.js","./vendor-8a332d8f.js"],import.meta.url).then(t=>({default:t.NotesView})));te.lazy(()=>oe(()=>import("./index-39fc0d52.js"),["./index-39fc0d52.js","./vendor-8a332d8f.js","./credit-card-9381f742.js","./banknote-5ac92043.js","./alert-circle-3c072fc1.js","./upload-5b885fb0.js","./crown-11975964.js","./building-2-134235b3.js"],import.meta.url).then(t=>({default:t.PricingView})));const Zg=te.lazy(()=>oe(()=>import("./index-39fc0d52.js"),["./index-39fc0d52.js","./vendor-8a332d8f.js","./credit-card-9381f742.js","./banknote-5ac92043.js","./alert-circle-3c072fc1.js","./upload-5b885fb0.js","./crown-11975964.js","./building-2-134235b3.js"],import.meta.url).then(t=>({default:t.SettingsView}))),jg=te.lazy(()=>oe(()=>import("./index-9fec0c52.js"),["./index-9fec0c52.js","./vendor-8a332d8f.js","./ConfirmDialog-28f4d78f.js","./alert-triangle-f3e24c64.js","./printUtils-04a0a819.js","./search-001f2433.js","./credit-card-9381f742.js","./eye-bb721541.js","./download-ccc94549.js","./trash-2-8bdf2c52.js"],import.meta.url).then(t=>({default:t.DocumentsView}))),ey=te.lazy(()=>oe(()=>import("./index-9aaf77dd.js"),["./index-9aaf77dd.js","./vendor-8a332d8f.js"],import.meta.url).then(t=>({default:t.HRView}))),ty=te.lazy(()=>oe(()=>import("./index-467e2c54.js").then(t=>t.i),["./index-467e2c54.js","./vendor-8a332d8f.js","./bar-chart-3-d18468b2.js","./filter-ac94b5de.js","./file-spreadsheet-00869b6b.js","./printer-82ab4f0e.js","./search-001f2433.js","./alert-triangle-f3e24c64.js","./clock-0f83d6c6.js","./dollar-sign-e74c04f1.js","./trending-up-aed1c674.js","./trending-down-36e32bc6.js","./download-ccc94549.js"],import.meta.url).then(t=>({default:t.AccountingView}))),ny=te.lazy(()=>oe(()=>import("./index-6258a786.js"),["./index-6258a786.js","./vendor-8a332d8f.js"],import.meta.url).then(t=>({default:t.AIView}))),oy=te.lazy(()=>oe(()=>import("./index-396e5082.js"),["./index-396e5082.js","./vendor-8a332d8f.js","./amortization-62a7b0b1.js","./printUtils-04a0a819.js","./download-ccc94549.js","./calendar-da7962d8.js","./dollar-sign-e74c04f1.js","./trending-up-aed1c674.js","./clock-0f83d6c6.js"],import.meta.url).then(t=>({default:t.CalculatorView}))),sy=te.lazy(()=>oe(()=>import("./index-347bad55.js"),["./index-347bad55.js","./vendor-8a332d8f.js","./alert-triangle-f3e24c64.js","./calendar-da7962d8.js","./clock-0f83d6c6.js","./trash-2-8bdf2c52.js"],import.meta.url).then(t=>({default:t.NotificationsView}))),iy=te.lazy(()=>oe(()=>import("./index-7172cd2d.js"),["./index-7172cd2d.js","./vendor-8a332d8f.js","./ConfirmDialog-28f4d78f.js","./alert-triangle-f3e24c64.js","./plus-968e5801.js","./search-001f2433.js","./filter-ac94b5de.js","./phone-69323ed2.js","./dollar-sign-e74c04f1.js","./x-circle-177d4c0c.js","./trash-2-8bdf2c52.js","./Badge-2d4e4979.js","./DigitalReceipt-c3acdccc.js","./html2canvas.esm-e0a7d97b.js","./printUtils-04a0a819.js","./PaymentConfirmationModal-888311d5.js","./printer-82ab4f0e.js","./clock-0f83d6c6.js","./alert-circle-3c072fc1.js","./building-2-134235b3.js","./eye-bb721541.js"],import.meta.url).then(t=>({default:t.CollectorsView}))),ry=te.lazy(()=>oe(()=>import("./index-42e3d503.js"),["./index-42e3d503.js","./vendor-8a332d8f.js","./building-2-134235b3.js","./trending-up-aed1c674.js","./credit-card-9381f742.js","./dollar-sign-e74c04f1.js","./search-001f2433.js","./clock-0f83d6c6.js","./eye-bb721541.js","./x-circle-177d4c0c.js"],import.meta.url).then(t=>({default:t.AdminDashboard}))),ly=te.lazy(()=>oe(()=>import("./index-411fba92.js"),["./index-411fba92.js","./vendor-8a332d8f.js","./credit-card-9381f742.js","./alert-triangle-f3e24c64.js","./star-7ffeefff.js","./upload-5b885fb0.js","./calendar-da7962d8.js"],import.meta.url).then(t=>({default:t.SubscriptionDashboard}))),de=({icon:t,label:e,id:n,activeTab:o,onClick:s,badge:r})=>h.jsxs("button",{onClick:()=>s(n),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl mb-1 transition-all ${o===n?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(t,{size:20}),h.jsx("span",{className:"font-medium text-sm",children:e})]}),r&&h.jsx("span",{className:"bg-blue-500/20 text-blue-200 text-xs px-2 py-0.5 rounded-full border border-blue-500/30",children:r})]}),Dt=({title:t,children:e})=>h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest px-4 mb-3",children:t}),e]});function ay(){var ct,xt,dt,At,ft,pt;const[t,e]=P.useState(localStorage.getItem("authToken")),[n,o]=P.useState(()=>{const C=localStorage.getItem("user");return C?JSON.parse(C):null}),[s,r]=P.useState(localStorage.getItem("theme")||"light"),[l,u]=P.useState("dashboard"),[d,c]=P.useState(!1),[f,p]=P.useState(!1),[m,g]=P.useState([]),[y,T]=P.useState([]),[E,_]=P.useState(!1),[x,S]=P.useState(null),[A,b]=P.useState(null),[V,M]=P.useState(null),[O,D]=P.useState(null),[$,N]=P.useState(!1),[B,U]=P.useState(null),[X,se]=P.useState(null),[R,J]=P.useState(()=>{const C=localStorage.getItem("systemSettings"),I=C?JSON.parse(C):{};return{clients:[],loans:[],expenses:[],receipts:[],requests:[],notes:[],employees:[],collectors:[],routes:[],clientDocuments:{},goals:{monthly:5e5,daily:15e3},systemSettings:{companyName:I.companyName||"RenKredit",currency:"DOP",allowLatePayments:!0,interestMethod:"simple",themeColor:I.themeColor||"indigo",companyLogo:I.companyLogo||"",ownerDisplayName:I.ownerDisplayName||"",...I}}}),ue=P.useMemo(()=>R.requests.filter(C=>C.status==="REVIEW").length,[R.requests]),Re=P.useMemo(()=>R.loans.filter(C=>C.status==="ACTIVE").length,[R.loans]);P.useEffect(()=>{s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",s)},[s]),P.useEffect(()=>{t&&Pe()},[t]);const Ge=(C,I)=>{localStorage.setItem("authToken",I),localStorage.setItem("user",JSON.stringify(C)),e(I),o(C)},Te=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),e(null),o(null),J({clients:[],loans:[],expenses:[],receipts:[],requests:[],notes:[],employees:[],collectors:[],routes:[],goals:{monthly:5e5,daily:15e3},systemSettings:{companyName:"RenKredit"}})},G=(C,I="info")=>{I==="error"&&He(C,"error");const F=document.createElement("div");F.className=`fixed top-4 right-4 z-50 px-6 py-3 rounded-xl shadow-2xl text-white font-bold animate-fade-in ${I==="error"?"bg-rose-500":I==="success"?"bg-emerald-500":"bg-blue-600"}`,F.innerText=C,document.body.appendChild(F),setTimeout(()=>{F.remove()},3e3)},He=(C,I="info")=>{g(F=>[{id:ht(),text:C,type:I,date:new Date().toISOString(),read:!1},...F])},Pe=async()=>{if(t){p(!0);try{const[C,I,F,H,Z,ee,ce]=await Promise.all([Je.getAll(),gn.getAll(),qo.getAll(),yn.getAll(),Rt.getAll(),ze.getAll(),iu.get()]),W=ce||{companyName:"RenKredit"};J(le=>({...le,clients:Array.isArray(C)?C:[],loans:Array.isArray(I)?I:[],receipts:Array.isArray(F)?F:[],expenses:Array.isArray(H)?H:[],employees:Array.isArray(Z)?Z:[],collectors:Array.isArray(ee)?ee:[],systemSettings:{...le.systemSettings,...W}}))}catch(C){console.error("Error loading data:",C),G("Error conectando con el servidor","error")}finally{p(!1)}}},Be=async(C,I,F)=>{try{const H=R.loans.find(ie=>ie.id===C),Z=R.clients.find(ie=>ie.id===(H==null?void 0:H.clientId)),ce=((H==null?void 0:H.schedule)||(H==null?void 0:H.installments)||[]).filter(ie=>ie.status!=="PAID").sort((ie,Ne)=>(ie.number||0)-(Ne.number||0)),W=ce.find(ie=>ie.id===I)||ce[0],le=(F==null?void 0:F.customAmount)||(W==null?void 0:W.payment)||0,me=(F==null?void 0:F.penaltyAmount)||0,w=(W==null?void 0:W.payment)||le,k=[];let q=le;const j=[],ye=[];for(const ie of ce){if(q<=0)break;const Ne=ie.paidAmount||0,Me=(ie.payment||w)-Ne,Fe=Math.min(q,Me),wt=Fe>=Me-.01;if(k.push({number:ie.number,id:ie.id,amount:Fe,date:new Date().toISOString(),isPartialPayment:!wt,previouslyPaid:Ne,totalInstallmentAmount:ie.payment}),wt?j.push(ie.id):ye.push({id:ie.id,amountPaid:Fe,newTotalPaid:Ne+Fe}),q-=Fe,q<1)break}const Qe=ye.length>0&&j.length===0,Or={loanId:C,installmentId:(W==null?void 0:W.id)||I,installmentNumber:(W==null?void 0:W.number)||(F==null?void 0:F.installmentNumber)||1,amount:le,penaltyAmount:me,installmentsPaid:k.length,isPartialPayment:Qe,...F},Oe=await qo.create(Or),lo=((H==null?void 0:H.totalPaid)||0)+le+me,Jr=Math.max(0,((H==null?void 0:H.amount)||0)+((H==null?void 0:H.totalInterest)||0)-lo),ao={...Oe,id:(Oe==null?void 0:Oe.id)||ht(),clientId:H==null?void 0:H.clientId,clientName:(Z==null?void 0:Z.name)||"Cliente",clientPhone:(Z==null?void 0:Z.phone)||"",loanId:C,amount:le,penaltyAmount:me,installmentNumber:k.length>1?`${k[0].number}-${k[k.length-1].number}`:(W==null?void 0:W.number)||1,date:(Oe==null?void 0:Oe.date)||new Date().toISOString(),loanAmount:H==null?void 0:H.amount,remainingBalance:Jr,paymentBreakdown:k,installmentsPaidCount:j.length,isPartialPayment:Qe,partialPaymentToInstallment:Qe?W==null?void 0:W.number:null,concept:Qe?`Abono a Cuota #${W==null?void 0:W.number}`:k.length>1?`Cuotas #${k[0].number}-${k[k.length-1].number}`:`Cuota #${W==null?void 0:W.number}`};J(ie=>({...ie,receipts:[...ie.receipts,ao],loans:ie.loans.map(Ne=>Ne.id===C?{...Ne,totalPaid:lo,schedule:(Ne.schedule||[]).map(Me=>{if(j.includes(Me.id))return{...Me,status:"PAID",paidDate:new Date,paidAmount:Me.payment};const Fe=ye.find(wt=>wt.id===Me.id);return Fe?{...Me,paidAmount:Fe.newTotalPaid,status:"PARTIAL"}:Me})}:Ne)}));const zr=k.length>1?`Pago registrado (${k.length} cuotas)`:"Pago registrado";return G(zr,"success"),ao}catch(H){return console.error("registerPayment error:",H),G(H.message||"Error al registrar pago","error"),null}},_t=()=>{var W,le,me;const C={dbData:R,setDbData:J,showToast:G,user:n},I=async(w,k)=>{try{const q=await Je.uploadDocument(w,k),j=q.data||q;J(ye=>({...ye,clients:ye.clients.map($e=>$e.id===w?{...$e,documents:[...$e.documents||[],j]}:$e)})),G("Documento guardado correctamente","success")}catch(q){console.error(q),G("Error al guardar documento","error")}},F=async w=>{try{const k=await yn.create(w);J(q=>({...q,expenses:[...q.expenses,k]})),G("Gasto registrado","success")}catch(k){console.error("addExpense error:",k);const q={...w,id:ht(),date:new Date().toISOString()};J(j=>({...j,expenses:[...j.expenses,q]})),G("Gasto guardado localmente","warning")}},H=async w=>{try{const k=await ze.create(w);J(q=>({...q,collectors:[...q.collectors,k]})),G("Cobrador agregado","success")}catch(k){console.error("addCollector error:",k);const q={...w,id:ht()};J(j=>({...j,collectors:[...j.collectors,q]})),G("Cobrador guardado localmente","warning")}},Z=async w=>{try{await ze.update(w.id,w),J(k=>({...k,collectors:k.collectors.map(q=>q.id===w.id?{...q,...w}:q)}))}catch(k){console.error("updateCollector error:",k),J(q=>({...q,collectors:q.collectors.map(j=>j.id===w.id?{...j,...w}:j)}))}},ee=async w=>{try{await ze.delete(w),J(k=>({...k,collectors:k.collectors.filter(q=>q.id!==w)})),G("Cobrador eliminado","success")}catch(k){console.error("removeCollector error:",k),J(q=>({...q,collectors:q.collectors.filter(j=>j.id!==w)}))}},ce=async(w,k)=>{try{await Je.update(w,{collectorId:k}),J(q=>({...q,clients:q.clients.map(j=>j.id===w?{...j,collectorId:k}:j)})),G("Cliente asignado a ruta","success")}catch(q){console.error("assignCollectorToClient error:",q),J(j=>({...j,clients:j.clients.map(ye=>ye.id===w?{...ye,collectorId:k}:ye)})),G("Asignado localmente","warning")}};switch(l){case"dashboard":return h.jsx(Ci,{...C,stats:R,loans:R.loans,clients:R.clients,receipts:R.receipts,expenses:R.expenses,user:n,onNavigate:w=>u(w)});case"cuadre":return h.jsx(Jg,{loans:R.loans,receipts:R.receipts,expenses:R.expenses,collectors:R.collectors,showToast:G});case"clients":return h.jsx(zg,{clients:R.clients,loans:R.loans,receipts:R.receipts,collectors:R.collectors,selectedClientId:A,onNewClient:()=>{S(null),_(!0)},onSelectClient:w=>{b(w)},onSelectLoan:w=>{u("loans")},onEditClient:w=>{S(w),_(!0)},onUpdateClient:async w=>{if(w.collectorId!==void 0)await ce(w.id,w.collectorId);else try{await Je.update(w.id,w),J(k=>({...k,clients:k.clients.map(q=>q.id===w.id?{...q,...w}:q)})),G("Cliente actualizado","success")}catch(k){console.error("Update client error:",k),G("Error al actualizar cliente","error")}},onNavigateToDocuments:w=>{b(w),u("documents")},addClientDocument:I,onDeleteClient:w=>{se({type:"client",item:w})}});case"loans":return h.jsx(Wg,{loans:R.loans,clients:R.clients,collectors:R.collectors,registerPayment:Be,selectedLoanId:V,onSelectLoan:w=>M(w===V?null:w),onUpdateLoan:w=>{J(k=>({...k,loans:k.loans.map(q=>q.id===w.id?w:q)})),G("Préstamo actualizado","success")},onCreateLoan:async w=>{try{const k=await gn.create(w);J(q=>({...q,loans:[...q.loans,{...k,schedule:k.installments||[]}]})),G("Préstamo creado exitosamente","success")}catch(k){console.error("Create loan error:",k),G(k.message||"Error al crear préstamo","error")}},addClientDocument:I,onNavigateToDocuments:w=>{b(w),u("documents")},onNewClient:()=>{S(null),_(!0)}});case"requests":return h.jsx(Kg,{clients:R.clients,showToast:G,onNewClient:w=>{D(()=>w),S(null),_(!0)},onCreateLoan:async w=>{try{const k=await gn.create(w);J(q=>({...q,loans:[...q.loans,{...k,schedule:k.installments||[]}]})),G("Préstamo creado desde solicitud","success")}catch(k){console.error("Create loan error:",k),G(k.message||"Error al crear préstamo","error")}}});case"routes":return h.jsx(Xg,{loans:R.loans,clients:R.clients,registerPayment:Be,collectors:R.collectors,receipts:R.receipts,currentRouteLoanIds:R.routes||[],routeActive:R.routeActive||!1,toggleLoanInRoute:(w,k)=>{J(q=>{const j=q.routes||[],ye=k?`${w}:${k}`:w,$e=j.includes(ye);return{...q,routes:$e?j.filter(Qe=>Qe!==ye):[...j,ye]}})},clearCurrentRoute:()=>J(w=>({...w,routes:[]})),startRoute:()=>J(w=>({...w,routeActive:!0})),finishRoute:()=>J(w=>({...w,routeActive:!1})),showToast:G,addRouteClosing:w=>J(k=>({...k,routeClosings:[...k.routeClosings||[],w]})),routeClosings:R.routeClosings||[],includeFutureInstallments:((W=R.systemSettings)==null?void 0:W.includeFutureInstallmentsInRoutes)??!0,systemSettings:R.systemSettings});case"notes":return h.jsx(Qg,{showToast:G});case"expenses":return h.jsx(Yg,{expenses:R.expenses,addExpense:F,onDeleteExpense:async w=>{try{await yn.delete(w),J(k=>({...k,expenses:k.expenses.filter(q=>q.id!==w)})),G("Gasto eliminado","success")}catch(k){console.error("Delete expense error:",k),J(q=>({...q,expenses:q.expenses.filter(j=>j.id!==w)})),G("Gasto eliminado localmente","warning")}}});case"hr":return h.jsx(ey,{employees:R.employees,onNewEmployee:()=>{U(null),N(!0)},onEditEmployee:w=>{U(w),N(!0)},onDeleteEmployee:w=>{se({type:"employee",item:w})}});case"accounting":return h.jsx(ty,{loans:R.loans,expenses:R.expenses,receipts:R.receipts,systemSettings:R.systemSettings,routeClosings:R.routeClosings||[]});case"documents":return h.jsx(jg,{clients:R.clients,loans:R.loans,companyName:(le=R.systemSettings)==null?void 0:le.companyName,selectedClientId:A,onSelectClient:b,clientDocuments:R.clientDocuments||{},addClientDocument:I});case"calc":return h.jsx(oy,{});case"ai":return h.jsx(ny,{chatHistory:[],setChatHistory:()=>{},dbData:R,showToast:G,ownerName:n==null?void 0:n.name,companyName:(me=R.systemSettings)==null?void 0:me.companyName});case"settings":return h.jsx(Zg,{systemSettings:R.systemSettings,setSystemSettings:w=>J(k=>({...k,systemSettings:{...k.systemSettings,...w}})),collectors:R.collectors,addCollector:H,updateCollector:Z,removeCollector:ee,clients:R.clients,assignCollectorToClient:ce,auth:{user:n},showToast:G,setActiveTab:u});case"pricing":return h.jsx(ly,{showToast:G});case"notifications":return h.jsx(sy,{showToast:G});case"collectors-manage":return h.jsx(iy,{showToast:G,clients:R.clients});case"admin-panel":return h.jsx(ry,{showToast:G});default:return h.jsx(Ci,{...C})}},cn=window.location.pathname.includes("collector-login"),[St,ut]=P.useState(()=>{const C=localStorage.getItem("collectorToken"),I=localStorage.getItem("collectorData");return C&&I?{token:C,collector:JSON.parse(I)}:null}),[dn,Ue]=P.useState(!1);if(St){const C=te.lazy(()=>oe(()=>import("./index-7172cd2d.js"),["./index-7172cd2d.js","./vendor-8a332d8f.js","./ConfirmDialog-28f4d78f.js","./alert-triangle-f3e24c64.js","./plus-968e5801.js","./search-001f2433.js","./filter-ac94b5de.js","./phone-69323ed2.js","./dollar-sign-e74c04f1.js","./x-circle-177d4c0c.js","./trash-2-8bdf2c52.js","./Badge-2d4e4979.js","./DigitalReceipt-c3acdccc.js","./html2canvas.esm-e0a7d97b.js","./printUtils-04a0a819.js","./PaymentConfirmationModal-888311d5.js","./printer-82ab4f0e.js","./clock-0f83d6c6.js","./alert-circle-3c072fc1.js","./building-2-134235b3.js","./eye-bb721541.js"],import.meta.url).then(F=>({default:F.CollectorDashboard}))),I=te.lazy(()=>oe(()=>import("./index-7172cd2d.js"),["./index-7172cd2d.js","./vendor-8a332d8f.js","./ConfirmDialog-28f4d78f.js","./alert-triangle-f3e24c64.js","./plus-968e5801.js","./search-001f2433.js","./filter-ac94b5de.js","./phone-69323ed2.js","./dollar-sign-e74c04f1.js","./x-circle-177d4c0c.js","./trash-2-8bdf2c52.js","./Badge-2d4e4979.js","./DigitalReceipt-c3acdccc.js","./html2canvas.esm-e0a7d97b.js","./printUtils-04a0a819.js","./PaymentConfirmationModal-888311d5.js","./printer-82ab4f0e.js","./clock-0f83d6c6.js","./alert-circle-3c072fc1.js","./building-2-134235b3.js","./eye-bb721541.js"],import.meta.url).then(F=>({default:F.ChangePasswordModal})));return h.jsx("div",{className:s==="dark"?"dark":"",children:h.jsxs(P.Suspense,{fallback:h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:h.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"})}),children:[h.jsx(C,{collector:St.collector,onLogout:()=>{localStorage.removeItem("collectorToken"),localStorage.removeItem("collectorData"),localStorage.removeItem("collectorTenant"),ut(null),window.location.href="/"},onChangePassword:()=>Ue(!0),showToast:G}),dn&&h.jsx(I,{collectorId:St.collector.id,onClose:()=>Ue(!1),onSuccess:()=>{localStorage.setItem("mustChangePassword","false")},showToast:G})]})})}if(!t){if(cn){const C=te.lazy(()=>oe(()=>import("./index-7172cd2d.js"),["./index-7172cd2d.js","./vendor-8a332d8f.js","./ConfirmDialog-28f4d78f.js","./alert-triangle-f3e24c64.js","./plus-968e5801.js","./search-001f2433.js","./filter-ac94b5de.js","./phone-69323ed2.js","./dollar-sign-e74c04f1.js","./x-circle-177d4c0c.js","./trash-2-8bdf2c52.js","./Badge-2d4e4979.js","./DigitalReceipt-c3acdccc.js","./html2canvas.esm-e0a7d97b.js","./printUtils-04a0a819.js","./PaymentConfirmationModal-888311d5.js","./printer-82ab4f0e.js","./clock-0f83d6c6.js","./alert-circle-3c072fc1.js","./building-2-134235b3.js","./eye-bb721541.js"],import.meta.url).then(I=>({default:I.CollectorLoginView})));return h.jsx("div",{className:s==="dark"?"dark":"",children:h.jsx(P.Suspense,{fallback:h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:h.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"})}),children:h.jsx(C,{onLogin:I=>{ut({token:I.token,collector:I.collector}),I.mustChangePassword&&Ue(!0)},onSwitchToUserLogin:()=>window.location.href="/"})})})}return h.jsx("div",{className:s==="dark"?"dark":"",children:h.jsx(Og,{onLogin:C=>Ge(C,C.token),showToast:G})})}return h.jsxs("div",{className:"flex h-screen bg-slate-100 dark:bg-slate-900 overflow-hidden font-sans transition-colors duration-300",children:[d&&h.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>c(!1)}),h.jsx("div",{className:`${d?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:relative z-50 transition-transform duration-300 h-full`,children:h.jsxs(au,{activeTab:l,setActiveTab:C=>{u(C),c(!1)},pendingRequestsCount:ue,activeLoansCount:Re,theme:s,toggleTheme:()=>r(C=>C==="light"?"dark":"light"),onLogout:Te,companyName:(ct=R.systemSettings)==null?void 0:ct.companyName,children:[h.jsxs(Dt,{title:"Principal",children:[h.jsx(de,{id:"dashboard",label:"Dashboard",icon:go,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"routes",label:"Ruta de Cobros",icon:To,activeTab:l,onClick:C=>{u(C),c(!1)},badge:R.loans.length>0?"Activa":null}),h.jsx(de,{id:"cuadre",label:"Cuadre de Caja",icon:Co,activeTab:l,onClick:C=>{u(C),c(!1)}})]}),h.jsxs(Dt,{title:"Operaciones",children:[h.jsx(de,{id:"clients",label:"Clientes",icon:fn,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"loans",label:"Préstamos",icon:Co,activeTab:l,onClick:C=>{u(C),c(!1)},badge:Re||null}),h.jsx(de,{id:"requests",label:"Solicitudes",icon:ho,activeTab:l,onClick:C=>{u(C),c(!1)},badge:ue||null}),h.jsx(de,{id:"expenses",label:"Gastos",icon:gl,activeTab:l,onClick:C=>{u(C),c(!1)}})]}),h.jsxs(Dt,{title:"Herramientas",children:[h.jsx(de,{id:"documents",label:"Documentos",icon:ml,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"calc",label:"Calculadora",icon:dl,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"notes",label:"Notas",icon:ho,activeTab:l,onClick:C=>{u(C),c(!1)}})]}),h.jsxs(Dt,{title:"Administración",children:[h.jsx(de,{id:"hr",label:"RRHH",icon:vl,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"accounting",label:"Contabilidad",icon:_o,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"collectors-manage",label:"Cobradores",icon:fn,activeTab:l,onClick:C=>{u(C),c(!1)},badge:"V2"}),(n==null?void 0:n.role)==="SUPER_ADMIN"&&h.jsx(de,{id:"admin-panel",label:"Admin Panel",icon:Cl,activeTab:l,onClick:C=>{u(C),c(!1)}}),h.jsx(de,{id:"pricing",label:"Suscripción",icon:yl,activeTab:l,onClick:C=>{u(C),c(!1)},badge:"Pro"}),h.jsx(de,{id:"settings",label:"Configuración",icon:Tl,activeTab:l,onClick:C=>{u(C),c(!1)}})]})]})}),h.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[h.jsx(Tu,{activeTitle:{dashboard:"Panel de Control",routes:"Ruta de Cobros",cuadre:"Cuadre de Caja",clients:"Clientes",loans:"Préstamos",expenses:"Gastos",requests:"Solicitudes",notes:"Notas",hr:"Recursos Humanos",settings:"Ajustes",pricing:"Planes",accounting:"Contabilidad",documents:"Documentos",calculator:"Calculadora",ai:"Asistente IA"}[l]||l.charAt(0).toUpperCase()+l.slice(1),setMobileMenuOpen:c,theme:s,toggleTheme:()=>r(C=>C==="light"?"dark":"light"),companyName:(xt=R.systemSettings)==null?void 0:xt.companyName,companyLogo:(dt=R.systemSettings)==null?void 0:dt.companyLogo,userName:n==null?void 0:n.name,onLogout:Te,notifications:m,onClearNotifications:()=>g([]),onNavigate:u}),h.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6 pb-20 md:pb-6 scrollbar-thin scrollbar-thumb-slate-300 dark:scrollbar-thumb-slate-600",children:h.jsx(P.Suspense,{fallback:h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:_t()})})]}),h.jsx(_u,{open:E,onClose:()=>{_(!1),S(null),D(null)},onSave:async C=>{try{if(x){const I=await Je.update(x.id,C);J(F=>({...F,clients:F.clients.map(H=>H.id===x.id?{...H,...I}:H)})),G("Cliente actualizado","success")}else{const I=await Je.create(C);J(F=>({...F,clients:[...F.clients,I]})),G("Cliente creado","success"),O&&(O(I.id),D(null))}}catch(I){if(console.error("Error saving client:",I),G("Error al guardar cliente","error"),!x){const F=ht(),H={...C,id:F};J(Z=>({...Z,clients:[...Z.clients,H]})),O&&(O(F),D(null))}}_(!1),S(null)},initialClient:x}),h.jsx(Su,{open:$,onClose:()=>{N(!1),U(null)},onSave:async C=>{var I;try{if(B){const F=await Rt.update(B.id,C);J(H=>{var le,me;const Z=H.employees.map(w=>w.id===B.id?{...w,...F}:w);let ee=[...H.collectors];const ce=((le=B.role)==null?void 0:le.toLowerCase())==="cobrador",W=((me=C.role)==null?void 0:me.toLowerCase())==="cobrador";if(!ce&&W)ze.create({name:F.name,phone:F.phone||""}),ee.push({id:F.id,name:F.name,phone:F.phone||""});else if(ce&&!W){const w=H.collectors.find(k=>k.name===B.name);w&&ze.delete(w.id),ee=ee.filter(k=>k.name!==B.name)}else W&&(ee=ee.map(w=>w.name===B.name?{...w,name:F.name,phone:F.phone||""}:w));return{...H,employees:Z,collectors:ee}}),G("Empleado actualizado","success")}else{const F=await Rt.create(C);J(H=>{var ee;const Z={...H,employees:[...H.employees,F]};return((ee=C.role)==null?void 0:ee.toLowerCase())==="cobrador"&&ze.create({name:F.name,phone:F.phone||""}).then(ce=>{J(W=>({...W,collectors:[...W.collectors,ce]}))}),Z}),G("Empleado creado","success"),((I=C.role)==null?void 0:I.toLowerCase())==="cobrador"&&G("Agregado a cobradores automáticamente","info")}}catch(F){console.error("Error saving employee:",F),G("Error al guardar empleado","error")}N(!1),U(null)},initialEmployee:B}),h.jsx(Gg,{chatHistory:y,setChatHistory:T,dbData:R,showToast:G,ownerName:(At=R.systemSettings)==null?void 0:At.ownerDisplayName,companyName:(ft=R.systemSettings)==null?void 0:ft.companyName}),X&&h.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-sm animate-fade-in",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 mb-3",children:"Confirmar Eliminación"}),h.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["¿Eliminar a ",h.jsx("strong",{children:(pt=X.item)==null?void 0:pt.name}),"? Esta acción no se puede deshacer."]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>se(null),className:"flex-1 py-2.5 rounded-lg font-semibold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Cancelar"}),h.jsx("button",{onClick:async()=>{var F,H;const{type:C,item:I}=X;try{C==="client"?(await Je.delete(I.id),J(Z=>({...Z,clients:Z.clients.filter(ee=>ee.id!==I.id)})),b(null),G("Cliente eliminado","success")):C==="employee"&&(await Rt.delete(I.id),J(Z=>({...Z,employees:Z.employees.filter(ee=>ee.id!==I.id)})),G("Empleado eliminado","success"))}catch(Z){G(((H=(F=Z.response)==null?void 0:F.data)==null?void 0:H.error)||`Error eliminando ${C==="client"?"cliente":"empleado"}`,"error")}se(null)},className:"flex-1 py-2.5 rounded-lg font-semibold bg-rose-600 text-white hover:bg-rose-500",children:"Eliminar"})]})]})}),h.jsx(xu,{activeTab:l,setActiveTab:u,setMobileMenuOpen:c,items:[{id:"dashboard",label:"Inicio",icon:go},{id:"clients",label:"Clientes",icon:fn},{id:"routes",label:"Cobros",icon:To},{id:"expenses",label:"Gastos",icon:_o},{id:"more",label:"Menú",icon:hl}]})]})}const uy={}.VITE_GOOGLE_CLIENT_ID||"609647959676-ujoqo6p8qe10ehu3cro2i26ci8nnks8j.apps.googleusercontent.com";Sn.createRoot(document.getElementById("root")).render(h.jsx(te.StrictMode,{children:h.jsx(tl,{clientId:uy,children:h.jsx(ay,{})})}));export{qg as A,po as B,uu as C,Su as E,ho as F,yo as L,Eo as M,Eu as N,gl as P,El as S,fn as U,_o as W,xi as X,_l as Z,oe as _,fl as a,En as b,ne as c,ru as d,vl as e,Ce as f,_u as g,ou as h,K as i,h as j,To as k,su as l,pl as m,dl as n,ht as o,Go as p,Tl as q,vo as r,iu as s,Cl as t,go as u,fy as v};
