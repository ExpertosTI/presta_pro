import{i as c,j as r,C as h,d as D}from"./index-d07a4565.js";import{r as l}from"./vendor-8a332d8f.js";function z({showToast:t}){const[g,n]=l.useState([]),[d,m]=l.useState(""),[j,b]=l.useState(!0),[o,y]=l.useState(!1),[v,s]=l.useState(null),[i,N]=l.useState("");l.useEffect(()=>{k()},[]);const k=async()=>{try{b(!0);const e=await c.get("/notes");n(Array.isArray(e)?e:[])}catch(e){console.error("Error loading notes:",e),t==null||t("Error cargando notas","error")}finally{b(!1)}},f=async()=>{if(d.trim())try{y(!0);const e=await c.post("/notes",{text:d.trim()});n(a=>[e,...a]),m(""),t==null||t("Nota guardada","success")}catch(e){console.error("Error saving note:",e),t==null||t("Error guardando nota","error")}finally{y(!1)}},x=async e=>{if(i.trim())try{const a=await c.put(`/notes/${e}`,{text:i.trim()});n(u=>u.map(p=>p.id===e?{...p,text:i.trim()}:p)),s(null),t==null||t("Nota actualizada","success")}catch(a){console.error("Error updating note:",a),t==null||t("Error actualizando nota","error")}},E=async e=>{try{await c.delete(`/notes/${e}`),n(a=>a.filter(u=>u.id!==e)),t==null||t("Nota eliminada","success")}catch(a){console.error("Error deleting note:",a),t==null||t("Error eliminando nota","error")}},C=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),f())},S=e=>{s(e.id),N(e.text)};return r.jsx("div",{className:"max-w-4xl mx-auto animate-fade-in",children:r.jsxs(h,{children:[r.jsx("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-slate-100",children:"ðŸ“ Bloc de Notas"}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsx("input",{className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder:text-slate-400",placeholder:"Escribe una nota rÃ¡pida...",value:d,onChange:e=>m(e.target.value),onKeyDown:C,disabled:o}),r.jsx("button",{onClick:f,disabled:o||!d.trim(),className:"bg-blue-600 text-white px-6 rounded-xl font-bold hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"...":"Agregar"})]}),j?r.jsx("p",{className:"text-center text-slate-400 py-8",children:"Cargando notas..."}):r.jsxs("div",{className:"space-y-3",children:[g.map(e=>r.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700/50 rounded-xl relative group",children:[v===e.id?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{className:"flex-1 p-2 border border-blue-400 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100",value:i,onChange:a=>N(a.target.value),onBlur:()=>x(e.id),onKeyDown:a=>a.key==="Enter"&&x(e.id),autoFocus:!0}),r.jsx("button",{onClick:()=>x(e.id),className:"px-3 py-1 bg-green-600 text-white rounded-lg text-sm",children:"âœ“"}),r.jsx("button",{onClick:()=>s(null),className:"px-3 py-1 bg-slate-400 text-white rounded-lg text-sm",children:"âœ•"})]}):r.jsx("p",{className:"text-slate-800 dark:text-slate-200 whitespace-pre-wrap cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-800/30 p-1 rounded transition-colors",onClick:()=>S(e),title:"Click para editar",children:e.text}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:D(e.createdAt||e.date)}),r.jsx("button",{onClick:()=>E(e.id),className:"absolute top-2 right-2 text-red-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity text-xl font-bold",title:"Eliminar nota",children:"Ã—"})]},e.id)),g.length===0&&r.jsx("p",{className:"text-center text-slate-400 py-4",children:"No hay notas guardadas."})]})]})})}export{z as NotesView};
