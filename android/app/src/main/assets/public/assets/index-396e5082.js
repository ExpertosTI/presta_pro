import{j as e,n as j,C as p,f as s,b as y,Z as P}from"./index-d07a4565.js";import{r as n}from"./vendor-8a332d8f.js";import{c as T}from"./amortization-62a7b0b1.js";import{printHtmlContent as $}from"./printUtils-04a0a819.js";import{D as S}from"./download-ccc94549.js";import{C as z}from"./calendar-da7962d8.js";import{D as A}from"./dollar-sign-e74c04f1.js";import{T as D}from"./trending-up-aed1c674.js";import{C as F}from"./clock-0f83d6c6.js";const I=({size:a=14})=>e.jsx("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),q=[{name:"Corto Plazo",amount:5e3,rate:15,term:4,frequency:"Semanal",icon:P},{name:"Personal",amount:2e4,rate:10,term:12,frequency:"Mensual",icon:A},{name:"Largo Plazo",amount:5e4,rate:8,term:24,frequency:"Mensual",icon:D},{name:"Micro Diario",amount:3e3,rate:20,term:30,frequency:"Diario",icon:F}];function V(){const[a,d]=n.useState({amount:1e4,rate:10,term:12,frequency:"Mensual",startDate:new Date().toISOString().split("T")[0],amortizationType:"FLAT",closingCosts:0}),[r,N]=n.useState([]);n.useEffect(()=>{if(a.amount&&a.rate&&a.term){const t=parseFloat(a.amount)+parseFloat(a.closingCosts||0);N(T(t,a.rate,a.term,a.frequency,a.startDate,a.amortizationType))}},[a]);const l=n.useMemo(()=>{var f;if(r.length===0)return null;const t=r.reduce((x,m)=>x+(m.interest||0),0),c=r.reduce((x,m)=>x+(m.principal||0),0),o=r.reduce((x,m)=>x+(m.payment||0),0),b=parseFloat(a.amount)||0,g=parseFloat(a.closingCosts)||0,u=t+g,w=b>0?(u/b*100).toFixed(2):0;return{monthlyPayment:((f=r[0])==null?void 0:f.payment)||0,totalInterest:t,totalPrincipal:c,totalPayment:o,costOfCredit:u,effectiveRate:w,closingCosts:g,baseAmount:b}},[r,a.amount,a.closingCosts]),i=n.useMemo(()=>r.length===0?[]:r.map(t=>({number:t.number,principal:t.principal||0,interest:t.interest||0,balance:t.balance||0})),[r]),k=t=>{d({...a,amount:t.amount,rate:t.rate,term:t.term,frequency:t.frequency})},v=()=>{if(r.length===0||!l)return;const t=r.map(o=>`
      <tr>
        <td style="padding:8px;border:1px solid #ddd">${o.number}</td>
        <td style="padding:8px;border:1px solid #ddd">${y(o.date)}</td>
        <td style="padding:8px;border:1px solid #ddd;text-align:right">${s(o.payment)}</td>
        <td style="padding:8px;border:1px solid #ddd;text-align:right">${s(o.interest)}</td>
        <td style="padding:8px;border:1px solid #ddd;text-align:right">${s(o.principal)}</td>
        <td style="padding:8px;border:1px solid #ddd;text-align:right">${s(o.balance)}</td>
      </tr>
    `).join(""),c=`
      <div style="font-family:Arial,sans-serif;max-width:800px;margin:0 auto">
        <h1 style="color:#1e293b;border-bottom:2px solid #3b82f6;padding-bottom:10px">Simulaci√≥n de Pr√©stamo</h1>
        
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin:20px 0">
          <div style="background:#f0fdf4;padding:15px;border-radius:8px;border:1px solid #86efac">
            <p style="margin:0;font-size:12px;color:#166534">Monto a Prestar</p>
            <p style="margin:5px 0 0;font-size:20px;font-weight:bold;color:#166534">${s(l.baseAmount)}</p>
          </div>
          <div style="background:#eff6ff;padding:15px;border-radius:8px;border:1px solid #93c5fd">
            <p style="margin:0;font-size:12px;color:#1e40af">Cuota ${a.frequency}</p>
            <p style="margin:5px 0 0;font-size:20px;font-weight:bold;color:#1e40af">${s(l.monthlyPayment)}</p>
          </div>
          <div style="background:#fef3c7;padding:15px;border-radius:8px;border:1px solid #fcd34d">
            <p style="margin:0;font-size:12px;color:#92400e">Total a Pagar</p>
            <p style="margin:5px 0 0;font-size:20px;font-weight:bold;color:#92400e">${s(l.totalPayment)}</p>
          </div>
        </div>
        
        <p style="margin:10px 0;font-size:14px;color:#64748b">
          <strong>Tipo:</strong> ${a.amortizationType==="FLAT"?"Saldo Absoluto":"Saldo Insoluto"} | 
          <strong>Tasa:</strong> ${a.rate}% | 
          <strong>Plazo:</strong> ${a.term} cuotas ${a.frequency.toLowerCase()}
        </p>
        
        <h2 style="color:#1e293b;margin-top:30px">Tabla de Amortizaci√≥n</h2>
        <table style="width:100%;border-collapse:collapse;font-size:12px">
          <thead>
            <tr style="background:#f1f5f9">
              <th style="padding:8px;border:1px solid #ddd;text-align:left">#</th>
              <th style="padding:8px;border:1px solid #ddd;text-align:left">Fecha</th>
              <th style="padding:8px;border:1px solid #ddd;text-align:right">Cuota</th>
              <th style="padding:8px;border:1px solid #ddd;text-align:right">Inter√©s</th>
              <th style="padding:8px;border:1px solid #ddd;text-align:right">Capital</th>
              <th style="padding:8px;border:1px solid #ddd;text-align:right">Saldo</th>
            </tr>
          </thead>
          <tbody>
            ${t}
            <tr style="background:#f8fafc;font-weight:bold">
              <td colspan="2" style="padding:8px;border:1px solid #ddd">TOTALES</td>
              <td style="padding:8px;border:1px solid #ddd;text-align:right">${s(l.totalPayment)}</td>
              <td style="padding:8px;border:1px solid #ddd;text-align:right;color:#dc2626">${s(l.totalInterest)}</td>
              <td style="padding:8px;border:1px solid #ddd;text-align:right;color:#16a34a">${s(l.totalPrincipal)}</td>
              <td style="padding:8px;border:1px solid #ddd;text-align:right">-</td>
            </tr>
          </tbody>
        </table>
        
        <p style="margin-top:30px;font-size:10px;color:#94a3b8;text-align:center">
          Generado el ${new Date().toLocaleDateString("es-DO")} | Presta Pro
        </p>
      </div>
    `;$("Simulaci√≥n de Pr√©stamo",c)},C=()=>{if(!l)return;const t=`üìä *Simulaci√≥n de Pr√©stamo*

üí∞ Monto: ${s(l.baseAmount)}
üìÖ Plazo: ${a.term} cuotas ${a.frequency.toLowerCase()}
üìà Tasa: ${a.rate}%
üè¶ Tipo: ${a.amortizationType==="FLAT"?"Saldo Absoluto":"Saldo Insoluto"}

üíµ *Cuota ${a.frequency}:* ${s(l.monthlyPayment)}
üí∞ *Total a Pagar:* ${s(l.totalPayment)}
üìâ *Costo del Cr√©dito:* ${s(l.costOfCredit)}

_Simulaci√≥n generada con Presta Pro_`;window.open(`https://wa.me/?text=${encodeURIComponent(t)}`,"_blank")},h=n.useMemo(()=>i.length===0?100:Math.max(...i.map(t=>t.principal+t.interest))||100,[i]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(j,{className:"w-6 h-6 text-blue-600"}),"Calculadora de Pr√©stamos"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:v,disabled:r.length===0,className:"px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-blue-500 disabled:opacity-50",children:[e.jsx(S,{size:16})," PDF"]}),e.jsxs("button",{onClick:C,disabled:!l,className:"px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-green-500 disabled:opacity-50",children:[e.jsx(I,{size:16})," Compartir"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(t=>e.jsxs("button",{onClick:()=>k(t),className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-blue-300 transition-colors",children:[e.jsx(t.icon,{size:14,className:"text-blue-500"}),t.name]},t.name))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs(p,{children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 text-slate-800 dark:text-slate-100",children:[e.jsx(j,{size:20})," Par√°metros"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1",children:"Monto a Prestar"}),e.jsx("input",{type:"number",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.amount,onChange:t=>d({...a,amount:t.target.value})}),e.jsx("p",{className:"mt-1 text-xs text-emerald-600 dark:text-emerald-400 font-semibold",children:s(a.amount||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1",children:"Gastos de Cierre"}),e.jsx("input",{type:"number",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.closingCosts,onChange:t=>d({...a,closingCosts:t.target.value}),placeholder:"0"}),a.closingCosts>0&&e.jsxs("p",{className:"mt-1 text-xs text-amber-600",children:["Total a financiar: ",s(parseFloat(a.amount||0)+parseFloat(a.closingCosts||0))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1",children:"Tasa %"}),e.jsx("input",{type:"number",step:"0.5",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.rate,onChange:t=>d({...a,rate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1",children:"Plazo"}),e.jsx("input",{type:"number",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.term,onChange:t=>d({...a,term:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1",children:"Frecuencia"}),e.jsxs("select",{className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.frequency,onChange:t=>d({...a,frequency:t.target.value}),children:[e.jsx("option",{children:"Diario"}),e.jsx("option",{children:"Semanal"}),e.jsx("option",{children:"Quincenal"}),e.jsx("option",{children:"Mensual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.amortizationType,onChange:t=>d({...a,amortizationType:t.target.value}),children:[e.jsx("option",{value:"FLAT",children:"Saldo Absoluto"}),e.jsx("option",{value:"FRENCH",children:"Saldo Insoluto"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-600 dark:text-slate-300 mb-1 flex items-center gap-1",children:[e.jsx(z,{size:14})," Fecha Inicio"]}),e.jsx("input",{type:"date",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:a.startDate,onChange:t=>d({...a,startDate:t.target.value})})]})]})]}),l&&e.jsxs(p,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-100 dark:border-blue-800",children:[e.jsx("h3",{className:"font-bold text-sm text-blue-800 dark:text-blue-300 mb-3 uppercase tracking-wider",children:"Resumen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-400",children:["Cuota ",a.frequency,":"]}),e.jsx("span",{className:"font-bold text-lg text-blue-900 dark:text-blue-200",children:s(l.monthlyPayment)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Inter√©s:"}),e.jsx("span",{className:"font-semibold text-rose-600 dark:text-rose-400",children:s(l.totalInterest)})]}),l.closingCosts>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Gastos Cierre:"}),e.jsx("span",{className:"font-semibold text-amber-600",children:s(l.closingCosts)})]}),e.jsxs("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Costo del Cr√©dito:"}),e.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:s(l.costOfCredit)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tasa Efectiva:"}),e.jsxs("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:[l.effectiveRate,"%"]})]})]}),e.jsx("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-blue-800 dark:text-blue-300",children:"TOTAL A PAGAR:"}),e.jsx("span",{className:"font-black text-xl text-blue-900 dark:text-blue-200",children:s(l.totalPayment)})]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.length>0&&e.jsxs(p,{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 dark:text-slate-300 mb-3",children:"Distribuci√≥n Capital vs Inter√©s"}),e.jsx("div",{className:"flex items-end gap-1 h-32 overflow-x-auto pb-2",children:i.map((t,c)=>e.jsxs("div",{className:"flex flex-col items-center min-w-[20px] flex-1",children:[e.jsxs("div",{className:"w-full flex flex-col-reverse",style:{height:"100px"},children:[e.jsx("div",{className:"bg-emerald-500 rounded-t-sm",style:{height:`${t.principal/h*100}%`},title:`Capital: ${s(t.principal)}`}),e.jsx("div",{className:"bg-rose-500 rounded-t-sm",style:{height:`${t.interest/h*100}%`},title:`Inter√©s: ${s(t.interest)}`})]}),e.jsx("span",{className:"text-[8px] text-slate-400 mt-1",children:t.number})]},c))}),e.jsxs("div",{className:"flex justify-center gap-6 mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-sm"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Capital"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-rose-500 rounded-sm"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Inter√©s"})]})]})]}),e.jsxs(p,{className:"overflow-hidden flex flex-col",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-slate-100",children:"Tabla de Amortizaci√≥n"}),e.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px]",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Fecha"}),e.jsx("th",{className:"p-2 text-right",children:"Cuota"}),e.jsx("th",{className:"p-2 text-right",children:"Inter√©s"}),e.jsx("th",{className:"p-2 text-right",children:"Capital"}),e.jsx("th",{className:"p-2 text-right",children:"Saldo"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[r.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"p-2 font-bold text-slate-500 dark:text-slate-400",children:t.number}),e.jsx("td",{className:"p-2 text-slate-800 dark:text-slate-200",children:y(t.date)}),e.jsx("td",{className:"p-2 text-right font-bold text-slate-800 dark:text-slate-200",children:s(t.payment)}),e.jsx("td",{className:"p-2 text-right text-rose-500 dark:text-rose-400",children:s(t.interest)}),e.jsx("td",{className:"p-2 text-right text-emerald-600 dark:text-emerald-400",children:s(t.principal)}),e.jsx("td",{className:"p-2 text-right text-slate-500 dark:text-slate-400",children:s(t.balance)})]},t.number)),l&&e.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-800 font-bold",children:[e.jsx("td",{colSpan:2,className:"p-2 text-slate-700 dark:text-slate-300",children:"TOTALES"}),e.jsx("td",{className:"p-2 text-right text-slate-800 dark:text-slate-200",children:s(l.totalPayment)}),e.jsx("td",{className:"p-2 text-right text-rose-600 dark:text-rose-400",children:s(l.totalInterest)}),e.jsx("td",{className:"p-2 text-right text-emerald-600 dark:text-emerald-400",children:s(l.totalPrincipal)}),e.jsx("td",{className:"p-2 text-right text-slate-500",children:"-"})]})]})]})})]})]})]})]})}export{V as CalculatorView};
