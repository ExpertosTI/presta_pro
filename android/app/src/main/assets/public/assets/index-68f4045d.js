import{c as ae,i as j,j as e,F as se,a as le,C as G,b as F,f as b,X as D,S as re}from"./index-d07a4565.js";import{r as i}from"./vendor-8a332d8f.js";import{P as ne}from"./plus-circle-bec9c90c.js";import{C as de}from"./clock-0f83d6c6.js";import{X as oe}from"./x-circle-177d4c0c.js";import{F as ie}from"./filter-ac94b5de.js";import{C as ce}from"./calendar-da7962d8.js";import{S as xe}from"./sticky-note-bd8db19a.js";const me=ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ue=async()=>await j.get("/loan-requests"),be=async r=>await j.get(`/loan-requests/${r}`),pe=async r=>await j.post("/loan-requests",r),ge=async r=>await j.put(`/loan-requests/${r}/approve`),he=async r=>await j.put(`/loan-requests/${r}/reject`),je=async r=>await j.delete(`/loan-requests/${r}`),S={getLoanRequests:ue,getLoanRequest:be,createLoanRequest:pe,approveLoanRequest:ge,rejectLoanRequest:he,deleteLoanRequest:je},fe=({size:r=14})=>e.jsx("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})});function Ae({clients:r,showToast:s,onNewClient:R,onCreateLoan:L}){var q,V,O,W,J;const[m,f]=i.useState([]),[T,P]=i.useState(!0),[c,u]=i.useState(!1),[p,B]=i.useState("REVIEW"),[l,x]=i.useState({clientId:"",amount:"",rate:"",term:"",frequency:"Mensual",startDate:new Date().toISOString().split("T")[0],amortizationType:"FLAT",notes:""}),[n,v]=i.useState(null),[N,A]=i.useState("0"),[w,M]=i.useState(!1),[g,y]=i.useState(null),[$,z]=i.useState(""),[k,C]=i.useState(null),[o,h]=i.useState({});i.useEffect(()=>{U()},[]);const U=async()=>{try{P(!0);const t=await S.getLoanRequests();f(Array.isArray(t)?t:[])}catch(t){console.error("Error loading requests:",t),s==null||s("Error cargando solicitudes","error")}finally{P(!1)}},I=i.useMemo(()=>p==="ALL"?m:m.filter(t=>t.status===p),[m,p]),H=i.useMemo(()=>({REVIEW:m.filter(t=>t.status==="REVIEW").length,APPROVED:m.filter(t=>t.status==="APPROVED").length,REJECTED:m.filter(t=>t.status==="REJECTED").length,ALL:m.length}),[m]),X=async t=>{try{u(!0);const a=await S.createLoanRequest({clientId:t.clientId,amount:parseFloat(t.amount),rate:parseFloat(t.rate),term:parseInt(t.term),frequency:t.frequency,startDate:t.startDate,amortizationType:t.amortizationType,notes:t.notes});f(d=>[a,...d]),x({clientId:"",amount:"",rate:"",term:"",frequency:"Mensual",startDate:new Date().toISOString().split("T")[0],amortizationType:"FLAT",notes:""}),s==null||s("Solicitud creada","success")}catch(a){console.error("Error creating request:",a),s==null||s("Error al crear solicitud","error")}finally{u(!1)}},Q=t=>{v(t),A("0"),M(!1)},Z=async()=>{if(n)try{u(!0),await S.approveLoanRequest(n.id);const t=r.find(a=>a.id===n.clientId);if(L){const a=parseFloat(N)||0,d=parseFloat(n.amount);L({clientId:n.clientId,clientName:t==null?void 0:t.name,amount:d+a,closingCosts:a,rate:parseFloat(n.rate),term:parseInt(n.term),frequency:n.frequency||"Mensual",amortizationType:n.amortizationType||"FLAT",startDate:n.startDate?typeof n.startDate=="string"?n.startDate.split("T")[0]:new Date(n.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]})}if(f(a=>a.map(d=>d.id===n.id?{...d,status:"APPROVED",approvedAt:new Date().toISOString()}:d)),w&&(t!=null&&t.phone)){const a=`https://wa.me/${t.phone.replace(/\D/g,"")}?text=${encodeURIComponent(`¡Hola ${t.name}! Tu solicitud de crédito por ${b(n.amount)} ha sido APROBADA. Pronto te contactaremos para los detalles.`)}`;window.open(a,"_blank")}s==null||s("Solicitud aprobada y préstamo creado","success"),v(null),A("0")}catch(t){console.error("Error approving request:",t),s==null||s("Error al aprobar solicitud","error")}finally{u(!1)}},_=t=>{y(t),z("")},K=async()=>{if(g)try{u(!0),await S.rejectLoanRequest(g.id),f(t=>t.map(a=>a.id===g.id?{...a,status:"REJECTED",rejectedAt:new Date().toISOString(),rejectReason:$}:a)),s==null||s("Solicitud rechazada","success"),y(null),z("")}catch(t){console.error("Error rejecting request:",t),s==null||s("Error al rechazar solicitud","error")}finally{u(!1)}},Y=t=>{var a,d,E;C(t),h({amount:((a=t.amount)==null?void 0:a.toString())||"",rate:((d=t.rate)==null?void 0:d.toString())||"",term:((E=t.term)==null?void 0:E.toString())||"",frequency:t.frequency||"Mensual",startDate:t.startDate?t.startDate.split("T")[0]:new Date().toISOString().split("T")[0],amortizationType:t.amortizationType||"FLAT",notes:t.notes||""})},ee=async()=>{if(k)try{u(!0);const t={...k,amount:parseFloat(o.amount),rate:parseFloat(o.rate),term:parseInt(o.term),frequency:o.frequency,startDate:o.startDate,amortizationType:o.amortizationType,notes:o.notes};f(a=>a.map(d=>d.id===k.id?t:d)),s==null||s("Solicitud actualizada","success"),C(null)}catch(t){console.error("Error updating request:",t),s==null||s("Error al actualizar solicitud","error")}finally{u(!1)}},te=t=>{const a={REVIEW:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-700 dark:text-amber-300",label:"En Revisión"},APPROVED:{bg:"bg-emerald-100 dark:bg-emerald-900/30",text:"text-emerald-700 dark:text-emerald-300",label:"Aprobada"},REJECTED:{bg:"bg-rose-100 dark:bg-rose-900/30",text:"text-rose-700 dark:text-rose-300",label:"Rechazada"}},d=a[t]||a.REVIEW;return e.jsx("span",{className:`text-xs ${d.bg} ${d.text} px-2 py-0.5 rounded-full font-semibold`,children:d.label})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50 flex items-center gap-3",children:[e.jsx(se,{className:"text-teal-500",size:28}),"Solicitudes de Crédito"]}),e.jsxs("button",{onClick:()=>document.getElementById("reqForm").scrollIntoView(),className:"bg-teal-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-teal-500 transition-colors",children:[e.jsx(ne,{size:18}),"Nueva Solicitud"]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{key:"REVIEW",label:"Pendientes",icon:de,color:"amber"},{key:"APPROVED",label:"Aprobadas",icon:le,color:"emerald"},{key:"REJECTED",label:"Rechazadas",icon:oe,color:"rose"},{key:"ALL",label:"Todas",icon:ie,color:"slate"}].map(t=>e.jsxs("button",{onClick:()=>B(t.key),className:`px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 transition-all ${p===t.key?`bg-${t.color}-600 text-white shadow-lg`:`bg-${t.color}-100 dark:bg-${t.color}-900/20 text-${t.color}-700 dark:text-${t.color}-300 hover:bg-${t.color}-200`}`,children:[e.jsx(t.icon,{size:16}),t.label," (",H[t.key],")"]},t.key))}),T?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400",children:"Cargando solicitudes..."})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-slate-600 dark:text-slate-400 uppercase text-sm tracking-wider",children:[p==="ALL"?"Todas las Solicitudes":p==="REVIEW"?"Pendientes de Revisión":p==="APPROVED"?"Solicitudes Aprobadas":"Solicitudes Rechazadas"," (",I.length,")"]}),I.map(t=>{var d;const a=r.find(E=>E.id===t.clientId)||t.client;return e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-500/20 flex items-center justify-center overflow-hidden border border-indigo-200 dark:border-indigo-500/30",children:a!=null&&a.photoUrl?e.jsx("img",{src:a.photoUrl,className:"w-full h-full object-cover",alt:""}):e.jsx("span",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-300",children:(d=a==null?void 0:a.name)==null?void 0:d.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100",children:a==null?void 0:a.name}),te(t.status)]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(ce,{size:10}),t.createdAt?F(t.createdAt):"Sin fecha",t.approvedAt&&e.jsxs("span",{className:"text-emerald-600",children:[" · Aprobada ",F(t.approvedAt)]}),t.rejectedAt&&e.jsxs("span",{className:"text-rose-600",children:[" · Rechazada ",F(t.rejectedAt)]})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300 grid grid-cols-2 gap-2 mb-3 bg-slate-100 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700/50",children:[e.jsxs("div",{children:["Monto: ",e.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:b(t.amount)})]}),e.jsxs("div",{children:["Tasa: ",e.jsxs("span",{className:"font-semibold",children:[t.rate,"%"]})]}),e.jsxs("div",{children:["Plazo: ",e.jsxs("span",{className:"font-semibold",children:[t.term," ",t.frequency]})]}),e.jsxs("div",{children:["Cuota: ",e.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:b(parseFloat(t.amount)*(1+parseFloat(t.rate)/100)/parseInt(t.term||1))})]}),t.amortizationType&&e.jsxs("div",{className:"col-span-2 text-xs",children:["Tipo: ",e.jsx("span",{className:"font-semibold",children:t.amortizationType==="FLAT"?"Saldo Absoluto":"Saldo Insoluto"})]})]}),t.notes&&e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3 flex items-start gap-1",children:[e.jsx(xe,{size:12,className:"mt-0.5"}),e.jsx("span",{children:t.notes})]}),t.status==="REJECTED"&&t.rejectReason&&e.jsxs("div",{className:"text-xs text-rose-600 dark:text-rose-400 mb-3 bg-rose-50 dark:bg-rose-900/20 p-2 rounded",children:[e.jsx("strong",{children:"Motivo:"})," ",t.rejectReason]}),t.status==="REVIEW"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Q(t),disabled:c,className:"flex-1 bg-teal-600 text-white py-1.5 rounded-lg text-sm font-bold hover:bg-teal-500 transition-all disabled:opacity-50",children:"Aprobar"}),e.jsx("button",{onClick:()=>_(t),disabled:c,className:"flex-1 bg-rose-600 text-white py-1.5 rounded-lg text-sm font-bold hover:bg-rose-500 transition-all disabled:opacity-50",children:"Rechazar"}),e.jsx("button",{onClick:()=>Y(t),disabled:c,className:"p-1.5 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-all",title:"Editar",children:e.jsx(me,{size:16})})]})]},t.id)}),I.length===0&&e.jsx("div",{className:"text-center py-8 glass rounded-xl border-dashed border-slate-300 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm",children:"No hay solicitudes en esta categoría"})})]}),e.jsx("div",{id:"reqForm",children:e.jsxs(G,{children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-slate-100",children:"Crear Nueva Solicitud"}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),l.clientId&&X(l)},className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{required:!0,className:"flex-1 p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:l.clientId,onChange:t=>x({...l,clientId:t.target.value}),children:[e.jsx("option",{value:"",children:"Seleccionar Cliente"}),r.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{type:"button",onClick:()=>R==null?void 0:R(t=>{x({...l,clientId:t})}),className:"bg-blue-600/20 text-blue-400 border border-blue-500/30 p-2 rounded-lg hover:bg-blue-600/30 transition-colors",children:"+"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{required:!0,min:"1",type:"number",placeholder:"Monto",className:"p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:l.amount,onChange:t=>x({...l,amount:t.target.value})}),l.amount&&e.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-mono",children:b(l.amount)})]}),e.jsx("input",{required:!0,min:"0",step:"0.1",type:"number",placeholder:"Tasa %",className:"p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:l.rate,onChange:t=>x({...l,rate:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{required:!0,min:"1",type:"number",placeholder:"Plazo",className:"p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:l.term,onChange:t=>x({...l,term:t.target.value})}),e.jsxs("select",{className:"p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:l.frequency,onChange:t=>x({...l,frequency:t.target.value}),children:[e.jsx("option",{children:"Diario"}),e.jsx("option",{children:"Semanal"}),e.jsx("option",{children:"Quincenal"}),e.jsx("option",{children:"Mensual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Amortización"}),e.jsxs("select",{className:"w-full p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",value:l.amortizationType,onChange:t=>x({...l,amortizationType:t.target.value}),children:[e.jsx("option",{value:"FLAT",children:"Saldo Absoluto (Interés Simple)"}),e.jsx("option",{value:"FRENCH",children:"Saldo Insoluto (Interés Compuesto)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Notas Internas"}),e.jsx("textarea",{placeholder:"Observaciones del analista...",className:"w-full p-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200 min-h-[60px]",value:l.notes,onChange:t=>x({...l,notes:t.target.value})})]}),l.amount&&l.rate&&l.term&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/30 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-400 mb-1",children:"Cuota Estimada"}),e.jsxs("p",{className:"text-xl font-bold text-emerald-700 dark:text-emerald-400",children:[b(parseFloat(l.amount)*(1+parseFloat(l.rate)/100)/parseInt(l.term))," / ",l.frequency]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg font-bold shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 hover:scale-[1.02] transition-all disabled:opacity-50",children:c?"Guardando...":"Guardar Solicitud"})]})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-600 p-4 text-white text-center relative",children:[e.jsx("button",{onClick:()=>v(null),className:"absolute top-3 right-3 p-1.5 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(D,{size:18})}),e.jsx("h3",{className:"text-lg font-bold",children:"Aprobar Solicitud"}),e.jsx("p",{className:"text-sm text-white/80",children:((q=r.find(t=>t.id===n.clientId))==null?void 0:q.name)||((V=n.client)==null?void 0:V.name)})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monto del préstamo"}),e.jsx("p",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:b(n.amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Gastos de Cierre (opcional)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:N,onChange:t=>A(t.target.value),placeholder:"0.00",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200 text-lg font-mono"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se sumará al capital para el cálculo de cuotas"})]}),parseFloat(N)>0&&e.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700 rounded-lg p-3 text-center",children:e.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:["Total a financiar: ",e.jsx("strong",{children:b(parseFloat(n.amount)+parseFloat(N))})]})}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg cursor-pointer border border-green-200 dark:border-green-700",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:t=>M(t.target.checked),className:"w-5 h-5 rounded text-green-600"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{size:18}),e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Notificar al cliente por WhatsApp"})]})]})]}),e.jsxs("div",{className:"p-4 pt-0 flex gap-3",children:[e.jsx("button",{onClick:()=>v(null),className:"flex-1 py-2.5 rounded-lg text-sm font-semibold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Cancelar"}),e.jsxs("button",{onClick:Z,disabled:c,className:"flex-1 py-2.5 rounded-lg text-sm font-semibold bg-teal-600 text-white hover:bg-teal-500 disabled:opacity-50 flex items-center justify-center gap-2",children:[w&&e.jsx(re,{size:14}),c?"Procesando...":"Confirmar"]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-rose-500 to-red-600 p-4 text-white text-center relative",children:[e.jsx("button",{onClick:()=>y(null),className:"absolute top-3 right-3 p-1.5 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(D,{size:18})}),e.jsx("h3",{className:"text-lg font-bold",children:"Rechazar Solicitud"}),e.jsx("p",{className:"text-sm text-white/80",children:((O=r.find(t=>t.id===g.clientId))==null?void 0:O.name)||((W=g.client)==null?void 0:W.name)})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monto solicitado"}),e.jsx("p",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:b(g.amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Motivo del rechazo"}),e.jsx("textarea",{value:$,onChange:t=>z(t.target.value),placeholder:"Explica el motivo del rechazo...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200 min-h-[80px]"})]})]}),e.jsxs("div",{className:"p-4 pt-0 flex gap-3",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 py-2.5 rounded-lg text-sm font-semibold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Cancelar"}),e.jsx("button",{onClick:K,disabled:c,className:"flex-1 py-2.5 rounded-lg text-sm font-semibold bg-rose-600 text-white hover:bg-rose-500 disabled:opacity-50",children:c?"Procesando...":"Confirmar Rechazo"})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-4 text-white text-center relative",children:[e.jsx("button",{onClick:()=>C(null),className:"absolute top-3 right-3 p-1.5 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(D,{size:18})}),e.jsx("h3",{className:"text-lg font-bold",children:"Editar Solicitud"}),e.jsx("p",{className:"text-sm text-white/80",children:(J=r.find(t=>t.id===k.clientId))==null?void 0:J.name})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Monto"}),e.jsx("input",{type:"number",value:o.amount,onChange:t=>h({...o,amount:t.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Tasa %"}),e.jsx("input",{type:"number",step:"0.1",value:o.rate,onChange:t=>h({...o,rate:t.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Plazo"}),e.jsx("input",{type:"number",value:o.term,onChange:t=>h({...o,term:t.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Frecuencia"}),e.jsxs("select",{value:o.frequency,onChange:t=>h({...o,frequency:t.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",children:[e.jsx("option",{children:"Diario"}),e.jsx("option",{children:"Semanal"}),e.jsx("option",{children:"Quincenal"}),e.jsx("option",{children:"Mensual"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Tipo de Amortización"}),e.jsxs("select",{value:o.amortizationType,onChange:t=>h({...o,amortizationType:t.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200",children:[e.jsx("option",{value:"FLAT",children:"Saldo Absoluto"}),e.jsx("option",{value:"FRENCH",children:"Saldo Insoluto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Notas"}),e.jsx("textarea",{value:o.notes,onChange:t=>h({...o,notes:t.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900/50 text-slate-800 dark:text-slate-200 min-h-[60px]"})]})]}),e.jsxs("div",{className:"p-4 pt-0 flex gap-3",children:[e.jsx("button",{onClick:()=>C(null),className:"flex-1 py-2.5 rounded-lg text-sm font-semibold bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Cancelar"}),e.jsx("button",{onClick:ee,disabled:c,className:"flex-1 py-2.5 rounded-lg text-sm font-semibold bg-blue-600 text-white hover:bg-blue-500 disabled:opacity-50",children:c?"Guardando...":"Guardar Cambios"})]})]})})]})}export{Ae as RequestsView};
